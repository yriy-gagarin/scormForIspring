"use strict";(()=>{function jp(e,t,o){return o?`${e}_${t}_${o}`:`${e}_${t}`}function T2(e,t={},o){let r=[e];o&&r.push(o);let n=r.slice();for(let i of Object.keys(t)){let s=t[i];for(let a of r)if(typeof s=="boolean")s&&n.push(jp(a,i,null));else if(typeof s=="string")n.push(jp(a,i,s));else throw new Error(`modifier '${i}' has invalid type`)}return n.join(" ")}window.__getCssClass=T2;function Xp(e,t){return t||e}var R=class e{static log(t,...o){console.log(t,...o)}static warn(t,...o){console.warn(t,...o)}static error(t,...o){console.error(t,...o)}static assert(t,o){t||e.error("Assertion failed"+(o?": "+o:""))}};function d(e,t){return R.assert(e,t),e}function Xe(e){return e!==void 0}function Di(e){let t=typeof e;return t=="object"&&e!=null||t=="function"}function Ei(e){return typeof e=="function"}function Xt(e){return typeof e=="string"}function Zm(e){return Array.isArray(e)}function Os(e){return e===null}var br=e=>e!=null,I=(e,t=`Unhandled value: ${JSON.stringify(e,null," ")}`)=>R.error(t);function Zp(e,t,o){return function(...r){o&&o(...r);let n=e(...r);return t(this,n,...r),n}}var w2=0,Vs=class{constructor(t,o,r,n,i=null){this.listener=t,this.src=o,this.type=r,this.capture=!!n,this.handler=i,this.key=++w2}};var Fs=class extends Vs{constructor(t,o,r,n,i,s){super(t,r,n,i,s),this.proxy=o,this.callOnce=!1,this.removed=!1}markAsRemoved(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null}};function Jp(e,t,o){for(let r in e)if(t.call(o,e[r],r,e))return!0;return!1}function ef(e,t,o){if(e){for(let r in e)if(t.call(o,e[r],r,e))return r}}function cn(e,t){for(let o in e)if(!(o in t)||e[o]!==t[o])return!1;for(let o in t)if(!(o in e))return!1;return!0}function Ks(e,t,o){let r={};if(e)for(let n in e)t.call(o,e[n],n,e)&&(r[n]=e[n]);return r}function Ri(e,t,o){for(let r in e)e.hasOwnProperty(r)&&t.call(o,e[r],r,e)}function vr(e,t){let o={};for(let r of Object.keys(e))o[r]=t(e[r]);return o}function _o(e,t){let o=t(e);if(o!==void 0)return o;if(typeof e!="object"||e==null)return e;if(Array.isArray(e))return e.map(n=>_o(n,t));let r={};for(let n of Object.keys(e))r[n]=_o(e[n],t);return r}function Jm(e,t){if(typeof e=="object"&&typeof t=="object"&&e&&t){let o=Object.keys(e),r=Object.keys(t);if(!o.length&&!r.length)return e.toString()===t.toString();if(o.length!=r.length)return!1;for(let n of o)if(!r.includes(n)||!Jm(e[n],t[n]))return!1;return!0}return e===t}function tf(e,t){for(let o of Object.keys(t))e[o]=t[o]}function Nt(e){return e&&JSON.parse(JSON.stringify(e))}var Mi=class{constructor(t){this.src=t,this.listeners={},this._typeCount=0}getTypeCount(){return this._typeCount}getListenerCount(){let t=0;for(let o of Object.keys(this.listeners))t+=this.listeners[o].length;return t}add(t,o,r,n,i){let s=t.toString(),a=this.listeners[s];a||(a=this.listeners[s]=[],this._typeCount++);let c,l=this._findListenerIndex(a,o,n,i);return l>-1?(c=a[l],r||(c.callOnce=!1)):(c=new Fs(o,null,this.src,s,!!n,i),c.callOnce=r,a.push(c)),c}remove(t,o,r,n){let i=t.toString();if(!(i in this.listeners))return!1;let s=this.listeners[i],a=this._findListenerIndex(s,o,r,n);return a>-1?(s[a].markAsRemoved(),s.splice(a,1),s.length==0&&(delete this.listeners[i],this._typeCount--),!0):!1}removeByKey(t){let o=t.type;if(!(o in this.listeners))return!1;let r=this.listeners[o],n=r.indexOf(t),i=n>=0;return i&&(r.splice(n,1),t.markAsRemoved(),this.listeners[o].length==0&&(delete this.listeners[o],--this._typeCount)),i}getListeners(t,o){let r=this.listeners[t.toString()],n=[];if(r)for(let i=0;i<r.length;++i){let s=r[i];s.capture==o&&n.push(s)}return n}getListener(t,o,r,n){let i=this.listeners[t.toString()],s=-1;return i&&(s=this._findListenerIndex(i,o,r,n)),s>-1?i[s]:null}hasListener(t="",o){let r=Xe(t),n=r?t.toString():"",i=Xe(o);return Jp(this.listeners,s=>{for(let a=0;a<s.length;++a)if((!r||s[a].type==n)&&(!i||s[a].capture==o))return!0;return!1})}_findListenerIndex(t,o,r,n){for(let i=0;i<t.length;++i){let s=t[i];if(!s.removed&&s.listener==o&&s.capture==!!r&&s.handler==n)return i}return-1}};var tu="ispring_lm_"+(Math.random()*1e6|0),eu;function D2(){if(!et.addEventListener||!Object.defineProperty)return!1;let e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});return et.addEventListener("test",Function.prototype,t),et.removeEventListener("test",Function.prototype,t),e}function E2(){return Xe(eu)||(eu=D2()),eu}function ou(e){let t=e[tu];return t instanceof Mi?t:null}function zt(e){let t=e;if(!t||t.removed)return!1;let o=t.src,r=t.type,n=t.proxy;o.removeEventListener&&o.removeEventListener(r,n,t.capture);let i=ou(o);return i?(i.removeByKey(t),i.getTypeCount()==0&&(o[tu]=null)):t.markAsRemoved(),!0}function R2(e){let{listener:t,handler:o,callOnce:r}=e,n=o?t.bind(o):t;return r?(...i)=>{n(...i),zt(e)}:n}function St(e,t,o,r,n=null){let i=Di(r)?d(r).capture:!!r,s=ou(e);s||(s=new Mi(e),e[tu]=s);let a=!!(r&&r.once),c=s.add(t,o,a,i,n);if(c.proxy)return c;let l=R2(c);if(c.proxy=l,e.addEventListener){let m=E2()?r:i;Xe(m)||(m=!1),e.addEventListener(t.toString(),l,m)}else throw new Error("addEventListener is unavailable.");return c}function of(e,t,o,r,n){r=!!r;let i=ou(e);return i?i.getListener(t,o,r,n):null}var Ls=class{dispose(){}};var M2=0,No=class extends Ls{constructor(){super(),this._listenersKeys=null,this._activeSignals=null,this._disposables=null,this._customDestructHandlers=null}addDestructHandler(t){this._customDestructHandlers=this._customDestructHandlers||[],this._customDestructHandlers.push(t)}dispose(){if(this._destruct(),this._customDestructHandlers)for(let t of this._customDestructHandlers)t();if(this._disposables)for(let t of this._disposables)ru(t);if(this._listenersKeys){for(let t of this._listenersKeys)zt(t);this._listenersKeys=null}if(this._activeSignals)for(let t of Object.keys(this._activeSignals))this._removeSignalByKey(t)}_listen(t,o,r,n){this._listenersKeys=this._listenersKeys||[];let i=St(this._getEventTarget(t),o,r,n,this);return this._listenersKeys.push(i),i}_unlisten(t,o,r){let n=of(this._getEventTarget(t),o,r,!1);return!!n&&this._unlistenByKey(n)}_unlistenByKey(t){let o=d(this._listenersKeys),r=o.indexOf(t);return r>=0&&o.splice(r,1),zt(t)}_addSignal(t,o,r){this._activeSignals=this._activeSignals||{},t.add(o,this,r);let n=++M2;return this._activeSignals[n]={dispatcher:t,fn:o,priority:r},n}_addSignalCallOnce(t,o,r){let n=(...i)=>{o.apply(this,i),this._removeSignal(t,n,r)};this._addSignal(t,n,r)}_removeSignal(t,o,r){let n=ef(this._activeSignals,i=>cn(i,{dispatcher:t,fn:o,priority:r}));n?this._removeSignalByKey(n):!1&&R.warn("unknown signal")}_removeSignalByKey(t){if(!(this._activeSignals&&this._activeSignals[t])){R.warn("unknown signal key");return}let{dispatcher:o,fn:r,priority:n}=this._activeSignals[t];o.remove(r,this,n),delete this._activeSignals[t]}_removeAllEvents(t){if(t){if(this._activeSignals){let o=Ks(this._activeSignals,r=>r.dispatcher.eventOwner()==t);for(let r of Object.keys(o))this._removeSignalByKey(r)}if(this._listenersKeys){let o=this._getEventTarget(t),r=this._listenersKeys.filter(n=>n.src==o);for(let n of r)this._unlistenByKey(n)}}}_name(){let t=this,o=t.owner,r=`[${this.constructor.name}]`;return o&&(r+=` in [${o.constructor.name}].${t.ownerPropertyName()}`),r}_addDisposable(t){if(this._disposables=this._disposables||[],!t||this._disposables.includes(t))return t;if(!1){let o=t;d(this._disposables.indexOf(t)<0),d(!o.owner),o.owner=this,o.ownerPropertyName=()=>{let r=this;for(let n of Object.keys(r))if(r[n]==o)return n;return"unknown"}}return this._disposables.push(t),t}_removeDisposable(...t){if(this._disposables){for(let o of t)if(o){this._cleanItemDependencies(o);let r=this._disposables.indexOf(o);r>=0&&(this._disposables.splice(r,1),ru(o))}}}_cleanItemDependencies(t){this._removeAllEvents(t)}_cleanDependencies(...t){for(let o of t)o&&this._cleanItemDependencies(o)}_getEventTarget(t){return t}_destruct(){}};function nu(e,t){return e>t?1:e<t?-1:0}function rf(e,t){if(!e)return!1;let o=e.indexOf(t),r=o>=0;return r&&e.splice(o,1),r}function I2(e,t,o,r,n){let i=0,s=e.length,a;for(;i<s;){let c=i+s>>1,l;o?l=t.call(n,e[c],c,e):l=t(r,e[c]),l>0?i=c+1:(s=c,a=!l)}return a?i:~i}function A2(e,t,o=nu){return I2(e,o,!1,t)}function nf(e,t,o){let r=A2(e,t,o);return r<0?(e.splice(-(r+1),0,t),!0):!1}function ko(e,t){if(e.length!==t.length)return!1;for(let o=0;o<e.length;++o)if(e[o]!==t[o])return!1;return!0}function sf(e,t,o){return e.reduce((r,n,i)=>(r[t(n,i)]=o?o(n,i):n,r),{})}function ln(e){return e.filter(t=>t)}function xo(e){for(let t=e.length-1;t>0;t--){let o=Math.floor(Math.random()*(t+1));[e[t],e[o]]=[e[o],e[t]]}}function af(e,t,o){let r=e[t];e[t]=e[o],e[o]=r}var $s=class{constructor(){this._priorities=null,this._values=null,this._zeroPriorityValues=null}push(t,o){this._addPriority(o);let r=this._getPriorityValues(o);r?r.push(t):R.warn("Priority array values are zero")}remove(t,o){let r=this._getPriorityValues(o);r&&rf(r,t)}removeAt(t,o){let r=this._getPriorityValues(o);r&&r.splice(t,1)}getValuesWithPriority(t){if(t==0)return this._zeroPriorityValues||[];if(!this._values)return R.warn("Priority array values are zero"),[];if(!(t in this._values))return[];let o=this._getPriorityValues(t);return o||(R.warn("Priority array values are zero"),[])}getAllValues(){if(!this._values)return this._zeroPriorityValues?this._zeroPriorityValues.slice():[];let t=[],o=d(this._priorities);for(let r=0;r<o.length;++r){let n=o[r],i=this._getPriorityValues(n);i&&t.push(...i)}return t}_addPriority(t){if(t==0){this._zeroPriorityValues=this._zeroPriorityValues||[];return}this._priorities=this._priorities||[0],this._values=this._values||{},t in this._values||(this._values[t]=[],nf(this._priorities,t))}_getPriorityValues(t){return t==0?this._zeroPriorityValues:d(this._values)[t]}};var He=class extends No{constructor(t=null){super(),this._handlers=null,this._owner=t}eventOwner(){return this._owner}add(t,o,r=0){this._handlers=this._handlers||new $s,this._handlers.push({fn:t,context:o},r)}addCallOnce(t,o,r=0){let n=i=>{t.call(o,i),this.remove(n,o,r)};this.add(n,o,r)}remove(t,o,r=0){if(!this._handlers){R.warn("Signal has no handlers!");return}let n=this._handlers.getValuesWithPriority(r),i=n.length;for(let s=0;s<i;++s){let a=n[s];if(a.fn==t&&a.context==o){this._handlers.removeAt(s,r);break}}}has(t,o,r=0){if(!this._handlers)return!1;let n=this._handlers.getValuesWithPriority(r),i=n.length;for(let s=0;s<i;++s){let a=n[s];if(a.fn==t&&a.context==o)return!0}return!1}dispatch(t){if(!this._handlers)return;let o=this._handlers.getAllValues(),r=o.length;for(let n=0;n<r;++n){let i=o[n];if(this._handlers.getAllValues().indexOf(i)!=-1)if(!1)i.fn.apply(i.context,[t]);else try{i.fn.apply(i.context,[t])}catch(s){iu(s,!0)}}}toFn(){return t=>this.dispatch(t)}handlersCount(){return this._handlers?this._handlers.getAllValues().length:0}};var et=Function("return this")(),P2=()=>!0;function Ns(e,t){if(P2()){if(t){R.error(e);return}R.warn(e)}}function iu(e,t){let o=e.stack||e.toString();String(o).indexOf(e.message)<0&&Ns(e.message,t),Ns(o,t)}var O2=Object.getPrototypeOf({});function ru(e){e&&(d(!e.disposed),!1&&setTimeout(()=>{let t=e.owner?e.owner.constructor.name:null,o=e.owner?e.ownerPropertyName():null;if(e.owner=null,e.ownerPropertyName=null,e instanceof He){let i=t?`[${t}].${o} have active signals`:void 0;d(e.handlersCount()==0,i)}let r=e,n=new Set;for(;(r=d(Object.getPrototypeOf(r)))!=O2;)Object.getOwnPropertyNames(r).forEach(i=>{i!="constructor"&&n.add(i)});n.forEach(i=>{Ei(e[i])&&(e[i]=Zp(e[i].bind(e),()=>{Ns(`using method ${i} from disposed object ${e.constructor.name}`,!0)}))})},100),Ei(e.dispose)&&e.dispose(),e.disposed=!0)}function cf(e,t){let o=e.split("."),r=et;!(o[0]in r)&&typeof r.execScript!="undefined"&&r.execScript("var "+o[0]);for(let n;o.length&&(n=o.shift());)!o.length&&Xe(t)?r[n]=t:r[n]&&r[n]!==Object.prototype[n]?r=r[n]:r=r[n]={}}!1||(et.onerror=function(...e){let[t,,,,o]=e;return o?iu(o,!0):Ns(t,!0),!0});var tt=et.requestAnimationFrame||et.mozRequestAnimationFrame||et.webkitRequestAnimationFrame||et.msRequestAnimationFrame||setTimeout,V2=et.cancelAnimationFrame||et.mozCancelAnimationFrame||et.webkitCancelAnimationFrame||et.msCancelAnimationFrame||clearTimeout,HA=et.requestIdleCallback||F2,UA=et.cancelIdleCallback||K2;function F2(e){let t=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)}function K2(e){clearTimeout(e)}function zs(e,t){let o=t?e.bind(t):e,r;function n(){V2(r),r=null}function i(){r&&n(),r=tt(o)}function s(){return r!=null}return{call:i,cancel:n,isSheduled:s}}function L2(e,t){if(typeof e.className=="string"){e.className=t;return}e.className.baseVal=t}function $2(e){return typeof e.className=="string"?e.className:e.className.baseVal}function N2(e){if(e.classList)return e.classList;let t=e.className;return Xt(t)&&t.match(/\S+/g)||[]}function z2(e,t){return e.classList?e.classList.contains(t):N2(e).includes(t)}function lf(e,t){if(e instanceof Element){if(e.classList){e.classList.add(t);return}if(!z2(e,t)){let o=$2(e),r="";o&&(r=`${o} `),L2(e,r+t)}}}var Bo=new Map,su=null;function mf(){return su||(su=new MutationObserver(e=>{for(let t of e){for(let o of t.removedNodes)for(let r of Bo.keys()){let n=d(Bo.get(r));n.remove&&o.contains&&o.contains(r)&&n.remove()}for(let o of t.addedNodes)for(let r of Bo.keys()){let n=d(Bo.get(r));n.add&&o.contains&&o.contains(r)&&n.add()}}})),su}function uf(e,t){let o=Bo.size==0;return R.assert(!Bo.has(e)),Bo.set(e,t),o&&mf().observe(document,{subtree:!0,childList:!0}),()=>{Bo.delete(e),Bo.size==0&&mf().disconnect()}}var df={},Q2=Math.pow(2,24);function cu(){let e;for(;e===void 0||df.hasOwnProperty(e)||!isNaN(+e);)e=Math.floor(Math.random()*Q2).toString(32);return df[e]=!0,e}var au=new WeakMap;function pf(e){return au.has(e)||au.set(e,cu()),au.get(e)}var ff="renderBinding",f=(e,t=void 0,o=void 0)=>{let r=()=>[e,t,o];return r._meta=ff,r},ye=(e,t,o=void 0,r=void 0)=>({id:typeof e=="string"?e:pf(e),binding:f(t,o,r)});function hf(e){return typeof e=="function"&&e._meta==ff}function vt(e){return Object.freeze({initialValue:e})}function Qs(e,t,o){let r=e.get(t);if(!(r&&r.value===o)){if(lu.set(t,!0),r){r.value=o;return}e.set(t,{value:o})}}function gf(e,t){return e.has(t)?e.get(t).value:t.initialValue}function yf(){lu.clear()}var lu=new Map;function Cf(e){for(let t of e.keys())if(lu.has(t))return!0;return!1}var Sf=[],_f=[];function kf(e){for(let t of e){t.clear&&t.clear();try{let o=t.callback();typeof o=="function"?t.clear=o:o&&(R.error("useEffect's callback should return a function"),t.clear=void 0)}catch(o){console.log(o)}}e.length=0}function xf(){kf(_f)}function Hs(){kf(Sf)}function Bf(e){e.clear&&(e.clear(),e.clear=null),e.sync?Sf.push(e):_f.push(e)}var mu=null,du=new Map;function pu(){if(!mu){let{call:e}=zs(fu);mu=e}mu()}var uu=!1,Us=!1;function fu(){if(uu)return;if(uu=!0,xf(),uu=!1,Us){R.error("render was already started"),pu();return}Us=!0,yf();let e=du;du=new Map;for(let t of e.keys())try{t()}catch(o){console.log(o)}Hs(),Us=!1}function bf(e){du.set(e,!0),pu()}function vf(){return Us}function hu(e){Bf(e),e.sync||pu()}var zo=new Map,Tr=[];function Tf(e,t){if(Tr.push({redrawFn:e,contextMap:t}),zo.has(e)){let o=d(zo.get(e));o.hookIndex=0,o.effectIndex=0}}function wf(e){let t=d(Tr.pop()),o=zo.get(t.redrawFn);if(o){if(R.assert(e instanceof Element),o.connected)R.assert(o.firstRenderHooksCount==o.hookData.length,`Incorrect hooks count
expected: ${o.firstRenderHooksCount}
actual: ${o.hookData.length}`),R.assert(o.firstRenderEffectsCount==o.effects.length,`Incorrect effects count
expected: ${o.firstRenderEffectsCount}
actual: ${o.effects.length}`);else{o.connected=!0;for(let r of o.effects)hu(r);o.firstRenderHooksCount=o.hookData.length,o.firstRenderEffectsCount=o.effects.length}return!0}return!1}function Df(e){let t=zo.get(e);if(t){for(let o of t.effects)o.clear&&o.clear();zo.delete(e)}}function gu(){if(!Tr.length)throw new Error("Hooks can be used only in render functions");let e=d(Tr[Tr.length-1]).redrawFn;return zo.has(e)||zo.set(e,{hookIndex:0,hookData:[],effectIndex:0,effects:[],redraw:e,connected:!1}),d(zo.get(e))}var j=e=>{!1&&e!=null&&typeof e=="object"&&R.error("useState: you should use lazy initialization for complex types");let t=gu(),o=t.hookIndex;if(t.hookData.length==o){let r=i=>{typeof i=="function"&&(i=i(t.hookData[o][0])),t.hookData[o][0]=i,bf(t.redraw)},n=Ei(e)?e():e;!1&&typeof n=="function"&&R.error("useState: do not store functions in state"),t.hookData.push([n,r])}return++t.hookIndex,t.hookData[o]};function P(e){let t=gu(),o=t.hookIndex;if(t.hookData.length==o){let n={current:e};t.hookData.push(n)}let r=t.hookData[o];return++t.hookIndex,r}function Ef(e,t,o){let r=gu(),n=r.effectIndex;if(r.effects.length==n){let s={callback:e,sync:o,clear:null,deps:t};r.effects.push(s)}else{let s=r.effects[n];s.callback=e}let i=r.effects[n];r.connected&&(!t||!ko(d(i.deps),t))&&hu(i),i.deps=t,++r.effectIndex}function A(e,t){Ef(e,t,!1)}function X(e,t){Ef(e,t,!0)}function H2(e){let t=P();return A(()=>{t.current=e},[e]),t.current}function Q(e,t){let o=P(),r=H2(t);return(!r||!ko(r,t))&&(o.current=e()),o.current}function O(e,t){return Q(()=>e,t)}function Ie(e){return gf(Tr[Tr.length-1].contextMap,e)}function Ws(...e){}function U2(e,t={}){t.current=e}hyperHTML.define("save-ref",U2);var Rf=new WeakMap;function W2(e,t){let o=Rf.get(e)||Rf.set(e,{}).get(e);for(let r of Object.keys(t))if(r.slice(0,2)==="on"&&o[r]!==t[r]){let i=r.slice(2);o[r]&&e.removeEventListener(i,o[r]),o[r]=t[r],o[r]&&e.addEventListener(i,o[r],{passive:!0})}return""}hyperHTML.define("passive-events",W2);var J=hyperHTML.wire;if(!1){let e=new WeakMap;J=(t,o="__default__")=>{t=t||{},e.has(t)||e.set(t,{});let r=e.get(t);if(!r[o]){let n=hyperHTML.wire(t,o),i;r[o]=function(s,...a){return i||(i=s),i!=s&&s.join("_")==i.join("_")&&(s=i),d(r)[o].__tmp.history.push([s,...a]),n(s,...a)},r[o].__tmp={obj:t,id:o,history:[]}}return r[o]}}var wP=hyperHTML.bind;var yu=new Map,qs=new WeakMap;function q2(e,t){return e===t?!0:typeof e=="object"&&typeof t=="object"&&cn(e,t)}function Qo(e,t,o=new Map,r,n="html"){let i=t?`${t}`:"__root";yu.has(e)||yu.set(e,{});let s=yu.get(e);if(!s[i]){let a=J(void 0,n),c=0,l=new Map(o),m=0,u=[],p=[],S=null,b=new Map,y=new Map,_=(C,...T)=>{if(hf(C)||C==null){let x=T[0];return _.switch(()=>C,x)}else if(typeof C=="function"){let x=T[0],B=T[1];return _._getHtmlWireResultWithOptimizations(`_c${++c}`,C,x,B)}S&&!Object.is(C,S)&&R.warn("Template literal was changed"),S=C;let h=a(C,...T);return h.__clearCache=()=>{a=J(void 0,n)},_._finishRender(),r&&(r.current=h),h};_.contextMap=o,_.switch=(C,T)=>{u[m]||(u[m]=new Map);let h=u[m],x=p[m],B=C();if(!B)return++m,null;let[L,$,z]=B();if(!h.get(L)){let Z=h.has(L)?[...h.keys()].indexOf(L):h.size;h.set(L,Su(L,_._createChild(`_u${m}_${Z}`,n),l,T,z))}return++m,x&&x.delete(L),d(h.get(L))($)},_.renderAll=(C,T)=>{let h=[],x=new Set;return C.forEach((B,L)=>{let $=T(B,L);if($){let{id:z,binding:ue}=$,Z=z;for(;x.has(z);)z=`${z}_copy`;x.add(z),Z!=z&&R.error(`duplicated child id: ${Z}`);let[Je,jt,wi]=ue();z||(R.error("unexpected error: empty id in render all"),z=`_c${++c}`),h.push(_._getHtmlWireResultWithOptimizations(z,Je,jt,wi))}}),h},_.toSvgMode=()=>{let C=_._createChild(`_c${++c}`,"svg");return _._finishRender(),C},_.setRenderTypeForChildren=C=>{n=C},_._createChild=(C,T)=>Qo(e,(t||"")+C,l,void 0,T),_._getHtmlWireResultWithOptimizations=(C,T,h,x)=>{let B=_._createChild(C,n);if(b.has(B))y.delete(B);else{let $=Su(T,B,l,x);b.set(B,$)}return d(b.get(B))(h)},_._finishRender=()=>{if(y.size)for(let C of y.keys()){let T=b.get(C);T?(T.clean(),b.delete(C)):R.warn("clean child error")}for(let C=0;C<p.length;++C){let T=p[C];for(let h of T.keys()){let x=T.get(h);x?(x.clean(),u[C].set(h,null)):x!==null&&R.warn("clean child error")}}y=new Map(b),p=u.map(C=>new Map(C)),c=0,m=0},_.renderIf=function(C,T,h){let x=T();return x?_(C,x,h):(++c,null)},_.setContext=(C,T)=>(Qs(l,C,T),_),_.clean=function(){_.clean=()=>console.log("clean already complete"),s[i]=null;for(let C of b.values())C.clean();for(let C of u)for(let T of C.values())T&&T.clean();b.clear(),y.clear()},s[i]=_}return s[i]}function Ae(e,t,o){let[r,n,i]=t(),s=r(e,n);return s instanceof Element&&Cu(s,i),o&&(o.current=s),s}function Cu(e,t){if(!t)return;let o=String(t);if(o.includes(" ")){R.error(`multiple classNames not allowed: ${o}`);return}lf(e,o)}function Su(e,t,o=new Map,r="",n=""){let i,s=null,a=typeof r=="string"||r.___css?{className:String(r)}:r,c=!1;function l(){if(c)return;Tf(l,d(o));let u=e(t,i),p=wf(u);return s&&p?s!=u&&window.console.error(`[${e.name}] dom element was changed`):s=u,s instanceof Element&&(Cu(s,a.className),Cu(s,n)),a.ref&&(a.ref.current=s),u}function m(u){return!Cf(d(o))&&q2(i,u)&&s?s:(i=u,d(l()))}return m.clean=function(){c=!0,Df(l),t.clean()},m}function G2(e,t,o=Qo(t),r=new Map){let n=qs.has(o);n||qs.set(o,Su(e,o,r));let i=qs.get(o),s=i(t);if(!n){let a=uf(s,{remove:()=>{document.body.contains(s)||(i.clean(),a(),qs.delete(o))}})}return tt(Hs),s}function Pe(e){return(o,r)=>{let n=r&&r.contextMap;return G2(e,o,r,n)}}function _t(e,t,o){return Math.max(t,Math.min(o,e))}function Mf(e){return e>0?1:e==0?0:-1}function Ii(e,t=0){return parseFloat(e.toFixed(t))}function Y2(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function j2(e,t,o,r="g"){return e.replace(new RegExp(Y2(t),r),o)}function X2(e,t,o,r){return e.substr(0,o)+t+e.substr(r)}function If(e,t){let o=e;return t.sort((r,n)=>n.startIndex-r.startIndex).forEach(({text:r,startIndex:n,endIndex:i})=>{o=X2(o,r,n,i)}),o}function Af(e,t,o){let r=e;for(let n of Object.keys(t)){let i=t[n],s=o(n);r=j2(r,s,i)}return r}function Pf(e,t){return e.slice(0,t).replace(/[^\s]*\s*$/,"").length}function Of(e,t){let o=/^\s*[^\s]*/i.exec(e.slice(t)),r=o?o[0].length:0;return t+r}function _u(e,t={}){return new Promise((o,r)=>{let n=new XMLHttpRequest;d(t),n.open(t.method||"get",e,!0);for(let s in t.headers)t.headers.hasOwnProperty(s)&&n.setRequestHeader(s,t.headers[s]);n.withCredentials=t.credentials=="include",n.onload=()=>{o(i())},n.onerror=r,n.send(t.body);function i(){let s=[],a=[],c={},l;return n.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(m,u,p)=>(s.push(u=u.toLowerCase()),a.push([u,p]),l=c[u],c[u]=l?`${l},${p}`:p,"")),{ok:(n.status/100|0)==2,status:n.status,statusText:n.statusText,url:n.responseURL,clone:i,text:()=>Promise.resolve(n.responseText),json:()=>Promise.resolve(n.responseText).then(m=>JSON.parse(m)),blob:()=>Promise.resolve(new Blob([n.response])),headers:{keys:()=>s,entries:()=>a,get:m=>c[m.toLowerCase()],has:m=>m.toLowerCase()in c}}}})}async function ku(e){let t=await _u(e);return t.ok?t.json():null}function Vf(e){return new Promise((t,o)=>{let r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){let n=r.response;t(new Blob([n]))},r.onerror=o,r.send(null)})}async function Ff(e){let t=await _u(e);return t.ok?t.text():""}function Z2(e){return window.path.normalize(e).replace(/\\/g,"/")}function J2(e,t){return t?`@media ${t} {${e}}`:e}function eB(e,t,o){let r=new RegExp(/@import ['"]([./\w-_]+)['"]\s*(.+)?;/gi),n=r.exec(t),i=[];for(;n;){let s=n.index,a=s+n[0].length,c=window.path,l=n[2],m=Z2(c.join(c.dirname(e),n[1])),u=xu(m).then(p=>({text:J2(p,l),startIndex:s,endIndex:a}));i.push(u),n=r.exec(t)}return Promise.all(i)}async function tB(e,t){let o=await Ff(e);o=o.replace(/(url\()([^/])/g,`$1${t}$2`);let r=await eB(e,o,t);return If(o,r)}async function xu(e){if(window.path){let o=window.path;return tB(e,o.dirname(e)+"/")}let t=await Ff(e);return t.includes("@import")&&console.error('import is not supported without "browser-path" dependency'),t}var Gs={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};function Kf(e){return new Promise(t=>{let o=document.createElement("style");o.onload=()=>t(),o.innerHTML=e,d(d(document).head).appendChild(o),o.sheet.cssRules[0].type!==CSSRule.IMPORT_RULE&&t()})}var Bu=0,Ys=[],Lf=null;function oB(e,t,o={},r){return!1&&[t,...Object.keys(o),...Object.values(o).filter(i=>typeof i=="string")].some(i=>i.includes("_"))&&console.error('css className should not contain "_" character'),__getCssClass(e+t,o,r)}function rB(e,t){e.includes("@import")&&console.error("import is not supported");let o=/^\s*\w*\..*[{,]/gm;return e.replace(o,r=>r.replace(/\.([a-zA-Z_])/g,`.${t}$1`))}var $f="";function nB(e){return $f=iB(aB(cB(sB(e),8*e.length))),$f.toLowerCase()}function iB(e){for(var t,o="0123456789ABCDEF",r="",n=0;n<e.length;n++)t=e.charCodeAt(n),r+=o.charAt(t>>>4&15)+o.charAt(15&t);return r}function sB(e){for(var t=Array(e.length>>2),o=0;o<t.length;o++)t[o]=0;for(o=0;o<8*e.length;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<o%32;return t}function aB(e){for(var t="",o=0;o<32*e.length;o+=8)t+=String.fromCharCode(e[o>>5]>>>o%32&255);return t}function cB(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var o=1732584193,r=-271733879,n=-1732584194,i=271733878,s=0;s<e.length;s+=16){var a=o,c=r,l=n,m=i;r=dt(r=dt(r=dt(r=dt(r=ut(r=ut(r=ut(r=ut(r=mt(r=mt(r=mt(r=mt(r=lt(r=lt(r=lt(r=lt(r,n=lt(n,i=lt(i,o=lt(o,r,n,i,e[s+0],7,-680876936),r,n,e[s+1],12,-389564586),o,r,e[s+2],17,606105819),i,o,e[s+3],22,-1044525330),n=lt(n,i=lt(i,o=lt(o,r,n,i,e[s+4],7,-176418897),r,n,e[s+5],12,1200080426),o,r,e[s+6],17,-1473231341),i,o,e[s+7],22,-45705983),n=lt(n,i=lt(i,o=lt(o,r,n,i,e[s+8],7,1770035416),r,n,e[s+9],12,-1958414417),o,r,e[s+10],17,-42063),i,o,e[s+11],22,-1990404162),n=lt(n,i=lt(i,o=lt(o,r,n,i,e[s+12],7,1804603682),r,n,e[s+13],12,-40341101),o,r,e[s+14],17,-1502002290),i,o,e[s+15],22,1236535329),n=mt(n,i=mt(i,o=mt(o,r,n,i,e[s+1],5,-165796510),r,n,e[s+6],9,-1069501632),o,r,e[s+11],14,643717713),i,o,e[s+0],20,-373897302),n=mt(n,i=mt(i,o=mt(o,r,n,i,e[s+5],5,-701558691),r,n,e[s+10],9,38016083),o,r,e[s+15],14,-660478335),i,o,e[s+4],20,-405537848),n=mt(n,i=mt(i,o=mt(o,r,n,i,e[s+9],5,568446438),r,n,e[s+14],9,-1019803690),o,r,e[s+3],14,-187363961),i,o,e[s+8],20,1163531501),n=mt(n,i=mt(i,o=mt(o,r,n,i,e[s+13],5,-1444681467),r,n,e[s+2],9,-51403784),o,r,e[s+7],14,1735328473),i,o,e[s+12],20,-1926607734),n=ut(n,i=ut(i,o=ut(o,r,n,i,e[s+5],4,-378558),r,n,e[s+8],11,-2022574463),o,r,e[s+11],16,1839030562),i,o,e[s+14],23,-35309556),n=ut(n,i=ut(i,o=ut(o,r,n,i,e[s+1],4,-1530992060),r,n,e[s+4],11,1272893353),o,r,e[s+7],16,-155497632),i,o,e[s+10],23,-1094730640),n=ut(n,i=ut(i,o=ut(o,r,n,i,e[s+13],4,681279174),r,n,e[s+0],11,-358537222),o,r,e[s+3],16,-722521979),i,o,e[s+6],23,76029189),n=ut(n,i=ut(i,o=ut(o,r,n,i,e[s+9],4,-640364487),r,n,e[s+12],11,-421815835),o,r,e[s+15],16,530742520),i,o,e[s+2],23,-995338651),n=dt(n,i=dt(i,o=dt(o,r,n,i,e[s+0],6,-198630844),r,n,e[s+7],10,1126891415),o,r,e[s+14],15,-1416354905),i,o,e[s+5],21,-57434055),n=dt(n,i=dt(i,o=dt(o,r,n,i,e[s+12],6,1700485571),r,n,e[s+3],10,-1894986606),o,r,e[s+10],15,-1051523),i,o,e[s+1],21,-2054922799),n=dt(n,i=dt(i,o=dt(o,r,n,i,e[s+8],6,1873313359),r,n,e[s+15],10,-30611744),o,r,e[s+6],15,-1560198380),i,o,e[s+13],21,1309151649),n=dt(n,i=dt(i,o=dt(o,r,n,i,e[s+4],6,-145523070),r,n,e[s+11],10,-1120210379),o,r,e[s+2],15,718787259),i,o,e[s+9],21,-343485551),o=Ho(o,a),r=Ho(r,c),n=Ho(n,l),i=Ho(i,m)}return Array(o,r,n,i)}function js(e,t,o,r,n,i){return Ho(lB(Ho(Ho(t,e),Ho(r,i)),n),o)}function lt(e,t,o,r,n,i,s){return js(t&o|~t&r,e,t,n,i,s)}function mt(e,t,o,r,n,i,s){return js(t&r|o&~r,e,t,n,i,s)}function ut(e,t,o,r,n,i,s){return js(t^o^r,e,t,n,i,s)}function dt(e,t,o,r,n,i,s){return js(o^(t|~r),e,t,n,i,s)}function Ho(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function lB(e,t){return e<<t|e>>>32-t}function mB(e){let t=`x${nB(e).slice(0,5)}__`;function o(n){Ys[r]=rB(n,t),--Bu,Bu||(Kf(Ys.join(`
`)),Lf&&Lf())}let r=Ys.length;if(Ys.push(""),!1){++Bu;let n=window.rootPath||"";xu(n+e).then(o).catch(()=>{o(e)})}return t}function Nf(e){let t=e[0],o=mB(t);return{getCssClass:oB.bind(null,o)}}function uB(){return window.navigator.platform.includes("Mac")}function dB(){return window.navigator.userAgent.includes("Chrome")}function zf(){return uB()&&!dB()}function Ai(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)}function Xs(){return/Firefox/.test(navigator.userAgent)}function Zs(){return window.navigator.userAgent.includes("MSIE")||window.navigator.userAgent.includes("Trident")}function mn(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(window.navigator.userAgent)}var Qf={};function Hf(e,t){Qf[e]=t}function Uo(e){return Qf[e]||document.body}var Js={topLayer:"xced93__top-layer",popupLayer:"xced93__popup-layer",popupLayerIos:"xced93__popup-layer-ios",uploaderLayer:"xced93__uploader-layer"};function pB(e,t){let o=[Js.topLayer];e==="popup"&&(o.push(Js.popupLayer),Ai()&&o.push(Js.popupLayerIos)),e==="uploader"&&o.push(Js.uploaderLayer),t.classList.add(...o)}function bu(e){let t=document.createElement("div");return pB(e,t),Hf(e,t),t}var ea=class extends No{addDisposable(t){return this._addDisposable(t)}addSignal(t,o,r){return this._addSignal(t,o,r)}addSignalCallOnce(t,o,r){return this._addSignalCallOnce(t,o,r)}listen(t,o,r,n){return this._listen(t,o,r,n)}};var Tt=class extends No{_createDependencyGroup(){return this._addDisposable(new ea)}_createSignal(t){let o=new He(this);if(this._addDisposable(o),t)if(Array.isArray(t))for(let r of t)this._addSignal(r,n=>o.dispatch(n));else this._addSignal(t,r=>o.dispatch(r));return o}_createSignalProxy({signal:t,checkDispatchFn:o,modifyDataFn:r}){let n=new He(this);return this._addDisposable(n),this._addSignal(t,i=>{if(!o||o(i)){let s=r?r(i):i;n.dispatch(s)}}),n}};var Uf=["Learn.Reports.SendReportOnSchedulePopup.Schedule.Month.Day","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part1","Learn.EditContent.CompletionTab.ReenrollmentBeforeCertExpires.Part1","Learn.EditContent.CompletionTab.ReenrollmentAfterCourseCompletion.Part2","Studio.SideBar.StorageBar.Progress.Part1","Studio.SideBar.StorageBar.Progress.Part2"];var ta=class extends Tt{constructor(t){super(),this._messages=t}addMessages(t){this._messages={...this._messages,...t}}getMessage(t,o){if(!this._messages.hasOwnProperty(t))return t;let r=d(this._messages[t]||Uf.includes(t));return typeof r!="string"&&(r=""),o&&(r=Af(r,o,this._generateKey)),r}messages(){return this._messages}hasMessage(t){return this._messages.hasOwnProperty(t)}_generateKey(t){return"{"+t.toLowerCase()+"}"}};var un,vu=null;function fB(e){if(un){R.warn("i18n has already been declared");return}un=e}function Wf(e){if(un){un.addMessages(e);return}let t=new ta(e);fB(t)}function k(e,t){let o=typeof e=="string"?e:e.value;return un?un.getMessage(o,t):(R.warn("i18n is not initialized"),o)}function io(e){return{value:e}}function qf(e){return k("Common.Colon",{text:e})}var oa=null;function Gf(e){if(oa){R.warn("direction has already been declared");return}hB(e)}function hB(e){oa=e,document.documentElement.dir=e}function ot(){return oa||(R.warn("direction is not initialized"),"ltr")}function dn(){return ot()==="rtl"}function Zt(e){return e.order.length}function ra(e,t,o){e.order.includes(t)||e.order.push(t),e.blocks[t]=o}function so(e){let t=[];return se(e,o=>{t.push(o)}),t}function Wo(){return{order:[],blocks:{}}}function Fe(e,t){let o=Wo();for(let r of e){let n=t(r);o.order.push(n),o.blocks[n]=r}return o}function gB(e,t){if(t<0||t>=e.order.length)return null;let o=e.order[t];return e.blocks[o]}function $e(e){return gB(e,0)}function bo(e,t){if(t<0||t>=e.order.length)return null;let o=e.order[t];return e.blocks[o]}function Yf(e){return bo(e,0)}function jf(e){return bo(e,e.order.length-1)}function Xf(e,t){let o=e.order.indexOf(t);return bo(e,o-1)}function Zf(e,t){let o=e.order.indexOf(t);return bo(e,o+1)}function se(e,t){e.order.forEach(o=>{t(e.blocks[o])})}function Oe(e,t){let o=Wo();return e.order.forEach(r=>{let n=t(e.blocks[r]);o.order.push(r),o.blocks[r]=n}),o}function Jf(e,t){e.order.forEach(o=>{t(e.blocks[o])})}function eh(e,t,o){let r=e.order.indexOf(t);e.order.splice(r+1,0,o.key),e.blocks[o.key]=o}function na(e,t){e.order.push(t.id),e.blocks[t.id]=t}function Tu(e,t){e.order.push(t.key),e.blocks[t.key]=t}function vo(e,t){let o=e.order.indexOf(t);e.order.splice(o,1),delete e.blocks[t]}function th(e,t,o){e.order.includes(t)&&(delete e.blocks[t],e.order[e.order.indexOf(t)]=o.key,e.blocks[o.key]=o)}function wu(e,t,o){let r=e/255,n=t/255,i=o/255,s=Math.max(r,n,i),a=Math.min(r,n,i),c=0,l=0,m=.5*(s+a);return s!=a&&(s==r?c=60*(n-i)/(s-a):s==n?c=60*(i-r)/(s-a)+120:s==i&&(c=60*(r-n)/(s-a)+240),m>0&&m<=.5?l=(s-a)/(2*m):l=(s-a)/(2-2*m)),[Math.round(c+360)%360,l,m]}function pe(e){let t=parseInt(e.substr(1,2),16),o=parseInt(e.substr(3,2),16),r=parseInt(e.substr(5,2),16);return[t,o,r]}function ia(e){let t=pe(e);return wu(t[0],t[1],t[2])}function pn(e,t){let o=t[3];return[(1-o)*e[0]+o*t[0],(1-o)*e[1]+o*t[1],(1-o)*e[2]+o*t[2]]}var oh="#E73018",rh="#FF8400",nh="#FFC252";var ih="#3CB46E";var sh="#7C46B9";var sa="#323537",aa="#818181";var pt="noColor";function ca(e){if(e&&e.color&&e.color!==pt){let t=pe(e.color),o=e.opacity;return`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${o})`}return""}function wr(e){return{x:e.left,y:e.top}}function Pi(e){return{x:e.width,y:e.height}}function Dr(e,t){return{x:e.x*t.x,y:e.y*t.y}}function ah(e,t){return{x:e.x/t.x,y:e.y/t.y}}function To(e,t){return{x:e.x+t.x,y:e.y+t.y}}function la(e){return{x:e,y:e}}function Ue(e,t){return e.find(o=>o.name===t)}function Jt(e,t){let o=[...e],r=o.findIndex(n=>n.name===t.name);return r>=0?o[r]=t:o.push(t),o}function ma(e,t){return e.filter(o=>!t.includes(o.name))}function ch(e,t){return e.some(o=>o.name===t)}var yB="$",ve={create(e){return e},add(e,t){return t.reduce((o,r)=>Jt(o,r),e)},compareTextStyles(e,t){return ve.serializeStyles(e)===ve.serializeStyles(t)},serializeStyles(e){return[...e].sort((t,o)=>nu(t.name,o.name)).map(t=>JSON.stringify(t)).join(yB)},compareSingleTextStyles(e,t){return JSON.stringify(e)===JSON.stringify(t)},remove(e,t){return ma(e,t)},has(e,t){return ch(e,t)},getAlignment(e){let t=Ue(e,"alignment");return t&&t.name==="alignment"?t.type:null},getFontSize(e){let t=Ue(e,"fontSize");return t&&t.name==="fontSize"?t.size:null},getFontColor(e){let t=Ue(e,"fontColor");return t&&t.name==="fontColor"?t.color:null},getTextHighlightColor(e){let t=Ue(e,"textHighlightColor");return t&&t.name==="textHighlightColor"?t.color:null},getTextHighlightOpacity(e){let t=Ue(e,"textHighlightOpacity");return t&&t.name==="textHighlightOpacity"?t.opacity:null}};var CB=aa,SB=.1;var re={create(e={}){let{url:t=null,style:o=ve.create([])}=e;return{url:t,style:o}},applyStyle(e,t){return re.create({...e,style:ve.add(e.style,t)})},removeStyles(e,t){return re.create({...e,style:ve.remove(e.style,t)})},hasStyle(e,t){return ve.has(e.style,t)},compare(e,t){return e.url===t.url&&ve.compareTextStyles(e.style,t.style)},setUrl(e,t){return re.create({...e,url:t})},removeUrl(e){return re.create({...e,url:null})},isInlineCodeMeta(e){return e.style.some(t=>t.name==="code")},getInlineCodeAdditionStyles(e=CB){return[{name:"code"},{name:"fontColor",color:e},{name:"textHighlightColor",color:e},{name:"textHighlightOpacity",opacity:SB}]},getInlineCodeAdditionStylesNames(){return this.getInlineCodeAdditionStyles().map(e=>e.name)}};var qo={accent:"#2972E0",link:"#2972E0",topPanelBackground:"#FFFFFF",topPanelText:"#42484E"};function Oi(e,t){let[o,r,n]=pe(e);return`rgba(${o}, ${r}, ${n}, ${t})`}function lh(e,t){let[o,r,n]=ia(e);return`hsl(${o}, ${r*100}%, ${(n+t)*100}%)`}function mh(e=qo){return{"--color-accent-default":e.accent,"--color-accent-8":Oi(e.accent,.08),"--color-accent-16":Oi(e.accent,.16),"--color-accent-30":Oi(e.accent,.3),"--color-accent-60":Oi(e.accent,.6),"--color-accent-80":Oi(e.accent,.8),"--color-accent-dark":lh(e.accent,-.08),"--color-link-default":e.link,"--color-link-dark":lh(e.link,-.08),"--color-top-panel-background-default":e.topPanelBackground,"--color-top-panel-text-default":e.topPanelText}}var _B=['link[href*="bundle"]','link[href*="legacy_components_customization"]'],kB={include:_B.join(","),silent:!0};var uh={};function Te(e,t,o){rt(e,{[t]:o})}function rt(e,t,o=window){(e instanceof o.HTMLElement||e instanceof o.SVGElement)&&(Zs()?(Object.keys(t).forEach(r=>{let n=t[r];n=n===null?"":n.toString(),uh[r]=n}),cssVars({...kB,variables:uh})):Object.keys(t).forEach(r=>{let n=t[r];n!=null&&(n=n.toString()),e.style.setProperty(r,n)}))}function fn(e){rt(document.documentElement,e)}function hn(e){return d(getComputedStyle(document.documentElement)).getPropertyValue(e)}function ua(e){let t=window.getComputedStyle(e),o=t&&t.transform?t.transform:"";return o=="none"&&(o=""),o}function da(e){let t=0,o=0,r=e.style;if(r&&r.transform&&r.transform!="none"){let n=r.transform.match(/translate(.*)/);if(n){let i=d(n[0].match(/-?\d(.\d+)?/g));t=parseFloat(i[0])||0,o=parseFloat(i[1])||0}}return{x:t,y:o}}function de(...e){return e.filter(t=>t).join(" ")}var _e=null;function wt(){if(!_e)throw new Error("semanticColors not initialized");return _e}function dh({element:e,customColors:t,windowContext:o=window}){_e={...t,actionCriticalDefault:"#EB5B47",actionCriticalDisabled:"#FCB6AC",actionCriticalHovered:"#E2422C",actionCriticalPressed:"#CB3420",actionPrimaryDefault:t.customAccent,actionPrimaryDisabled:"#C4C7CA",actionPrimaryHovered:Yo(t.customAccent,0,-1,-4),actionPrimaryPressed:Yo(t.customAccent,0,-1,-8),actionSliderDefault:"#32353729",actionSliderDisabled:"#C4C7CA",actionToggleDepressedDefault:"#D6D7D7",actionToggleDepressedDisabled:"#EFEFEF",actionToggleDepressedHovered:"#BDBEBF",actionTogglePressedDisabled:Go(t.customAccent,.36),actionWarningDefault:"#FB8B28",actionWarningDisabled:"#FEC897",actionWarningHovered:"#EE7B17",actionWarningPressed:"#DF6316",backgroundActive:"#3235370F",backgroundBlue:"#ECEDEE",backgroundDefault:"#F6F6F7",backgroundHovered:"#3235370A",borderAccentDefault:t.customAccent,borderAccentDisabled:"#C4C7CA",borderAccentHovered:Yo(t.customAccent,0,-1,-4),borderAccentPressed:Yo(t.customAccent,0,-1,-8),borderCritical:"#EB5B47",borderCriticalActive:"#FCB6AC",borderCriticalSubdued:"#FFD6D1",borderDefault:"#D6D7D7",borderDisabled:"#E6E6E7",borderHovered:"#BDBEBF",borderInfoActive:"#99C9FA",borderInfoSubdued:"#C7E3FF",borderMediaDefault:"#3235371F",borderMediaDisabled:"#32353714",borderMediaHovered:"#32353729",borderNewActive:"#BCAEF7",borderNewSubdued:"#DED6FC",borderOncolorDefault:"#FFFFFF",borderOncolorSecondary:"#FFFFFF66",borderSuccessActive:"#9CE0B8",borderSuccessSubdued:"#C5ECD5",borderWarningActive:"#FEC897",borderWarningSubdued:"#FFDEC2",customPanelHovered:Go(t.customTextDefault,.12),customPanelSubdued:Go(t.customTextDefault,.08),customTextSubdued:Go(t.customTextDefault,.72),decorativeChartEight:"#323537",decorativeChartEleven:"#517CE9",decorativeChartFive:"#CB3420",decorativeChartFour:"#983484",decorativeChartFourteen:"#BDBEBF",decorativeChartNine:"#5DC9B5",decorativeChartOne:"#2984E0",decorativeChartSeven:"#EE5091",decorativeChartSix:"#745CDE",decorativeChartStatusBackground:"#EFEFEF",decorativeChartStatusBackgroundHovered:"#DEDEDFB8",decorativeChartStatusCritical:"#E86856",decorativeChartStatusCriticalHovered:"#E2422C3D",decorativeChartStatusInProgress:"#549DE6",decorativeChartStatusInProgressHovered:"#2985E03D",decorativeChartStatusNew:"#A695F1",decorativeChartStatusPromoBackground:"#DED6FC",decorativeChartStatusSubdued:"#ADAEAF",decorativeChartStatusSuccess:"#63C38B",decorativeChartStatusSuccessHovered:"#3CB46E3D",decorativeChartStatusWarning:"#FFCE74",decorativeChartStatusWarningHovered:"#FFC2527A",decorativeChartTen:"#EEA811",decorativeChartThirteen:"#33AFBD",decorativeChartThree:"#80B43C",decorativeChartTwelve:"#3CB46E",decorativeChartTwo:"#FB8B28",decorativeCollaborationEight:"#FFB9A3",decorativeCollaborationFive:"#FFB87A",decorativeCollaborationFour:"#FFA8CC",decorativeCollaborationNine:"#99E4FF",decorativeCollaborationOne:"#B19FFF",decorativeCollaborationSeven:"#A0E9BE",decorativeCollaborationSix:"#B19FFF",decorativeCollaborationTen:"#FEDC71",decorativeCollaborationThree:"#B1E868",decorativeCollaborationTwo:"#D594E4",decorativeIndicatorAmberYellow:"#FFE6C1",decorativeIndicatorBlue:"#D8EBFF",decorativeIndicatorCarrotOrange:"#FFDEC2",decorativeIndicatorIndigo:"#DED6FC",decorativeIndicatorRed:"#FFD6D1",decorativeReactionsOne:"#FEE9F1",decorativeReviewsStar:"#FB8B28",dividerBackground:"#32353714",dividerDefault:"#E6E6E7",dividerOncolor:"#FFFFFF33",editorBlueLight:"#D6E2FF",editorEmeraldLight:"#D9F6E5",editorGreenLight:"#E3F7C9",editorIndigoLight:"#E0D9FF",editorOrangeLight:"#FFE3CA",editorPinkLight:"#FFDCEB",editorPurpleLight:"#EED4F4",editorRedLight:"#FFE3DA",editorSkyLight:"#DEF6FF",editorTealLight:"#DBFCE5",editorYellowLight:"#FFF3CF",focusCritical:"#FFD6D1",focusDefault:Go(t.customAccent,.4),focusOncolor:"#FFFFFF",focusSuccess:"#D1F0DE",focusWarning:"#FFDEC2",iconAccentDefault:t.customAccent,iconAccentHovered:Yo(t.customAccent,0,-1,-4),iconAccentPressed:Yo(t.customAccent,0,-1,-8),iconAlphaDefault:"#323537",iconAlphaDisabled:"#32353752",iconAlphaPlaceholder:"#32353799",iconAlphaSubdued:"#030E1B94",iconCritical:"#E2422C",iconCriticalDisabled:"#FCB6AC",iconDefault:"#323537",iconDisabled:"#BDBEBF",iconInfo:"#2078CF",iconInfoDisabled:"#99C9FA",iconNew:"#654BD8",iconNewDisabled:"#BCAEF7",iconOncolorDefault:"#FFFFFF",iconOncolorDisabled:"#FFFFFF66",iconOncolorSecondary:"#FFFFFFA3",iconPlaceholder:"#848687",iconSubdued:"#6C737B",iconSuccess:"#389F62",iconSuccessDisabled:"#9CE0B8",iconWarning:"#FB8B28",iconWarningDisabled:"#FEC897",indicatorOncolor:"#FFFFFF",indicatorPrimary:t.customAccent,indicatorSpecial:"#EB5B47",indicatorSubdued:"#B2B8BD",overlayCritical:"#CB3420",overlayDark:"#323537",overlayHovered:"#FFFFFF66",overlayModalsActions:"#00000066",overlayModalsDark:"#000000B8",overlayModalsDefault:"#32353766",overlayModalsHovered:"#32353799",overlayModalsLight:"#FFFFFFE5",overlayNew:"#654BD8",overlayPressed:"#FFFFFF",overlaySemidark:"#323537DE",overlaySubdued:"#FFFFFF33",surfaceAccentDefault:Go(t.customAccent,.16),surfaceAccentHovered:Go(t.customAccent,.2),surfaceAccentSubdued:Go(t.customAccent,.12),surfaceCriticalDefault:"#FEE4DF",surfaceCriticalHovered:"#FFD6D1",surfaceCriticalSubdued:"#FFF5F5",surfaceDefault:"#FFFFFF",surfaceDisabled:"#3235370A",surfaceHovered:"#3235371F",surfaceInfoDefault:"#D8ECFF",surfaceInfoHovered:"#C7E3FF",surfaceInfoSubdued:"#ECF5FF",surfaceNeutralDefault:"#EFEFEF",surfaceNeutralHovered:"#E6E6E7",surfaceNeutralSubdued:"#F7F7F7",surfaceNewDefault:"#E7E2FE",surfaceNewHovered:"#DED6FC",surfaceNewSubdued:"#F3F0FF",surfacePressed:"#32353729",surfaceSubdued:"#3235370F",surfaceSuccessDefault:"#DFF4E8",surfaceSuccessHovered:"#C5ECD5",surfaceSuccessSubdued:"#EFF9F3",surfaceWarningDefault:"#FFEED4",surfaceWarningHovered:"#FFE6C1",surfaceWarningSubdued:"#FFF6E9",textAccentDefault:t.customAccent,textAccentHovered:Yo(t.customAccent,0,-1,-4),textAccentPressed:Yo(t.customAccent,0,-1,-8),textAlphaDefault:"#323537",textAlphaDisabled:"#32353752",textAlphaPlaceholder:"#32353766",textAlphaSubdued:"#030E1B94",textCritical:"#E2422C",textCriticalDisabled:"#FCB6AC",textDefault:"#323537",textDisabled:"#BDBEBF",textInfo:"#2078CF",textInfoDisabled:"#99C9FA",textLinkDefault:"#295DE0",textLinkPressed:"#214FC4",textNew:"#654BD8",textNewDisabled:"#BCAEF7",textOncolorDefault:"#FFFFFF",textOncolorDisabled:"#FFFFFF66",textOncolorSecondary:"#FFFFFFA3",textPlaceholder:"#ADAEAF",textSubdued:"#6C737B",textSuccess:"#389F63",textSuccessDisabled:"#9CE0B8",textWarning:"#FB8B28",textWarningDisabled:"#FEC897"};let r={"--color-action-primary-default":_e.actionPrimaryDefault,"--color-action-primary-hovered":_e.actionPrimaryHovered,"--color-action-primary-pressed":_e.actionPrimaryPressed,"--color-action-toggle-pressed-disabled":_e.actionTogglePressedDisabled,"--color-border-accent-default":_e.borderAccentDefault,"--color-border-accent-hovered":_e.borderAccentHovered,"--color-border-accent-pressed":_e.borderAccentPressed,"--color-custom-accent":_e.customAccent,"--color-custom-panel-default":_e.customPanelDefault,"--color-custom-panel-hovered":_e.customPanelHovered,"--color-custom-panel-subdued":_e.customPanelSubdued,"--color-custom-text-default":_e.customTextDefault,"--color-custom-text-subdued":_e.customTextSubdued,"--color-focus-default":_e.focusDefault,"--color-icon-accent-default":_e.iconAccentDefault,"--color-icon-accent-hovered":_e.iconAccentHovered,"--color-icon-accent-pressed":_e.iconAccentPressed,"--color-indicator-primary":_e.indicatorPrimary,"--color-surface-accent-default":_e.surfaceAccentDefault,"--color-surface-accent-hovered":_e.surfaceAccentHovered,"--color-surface-accent-subdued":_e.surfaceAccentSubdued,"--color-text-accent-default":_e.textAccentDefault,"--color-text-accent-hovered":_e.textAccentHovered,"--color-text-accent-pressed":_e.textAccentPressed};e?rt(e,r,o):fn(r)}function Go(e,t){let[o,r,n]=pe(e);return`rgba(${o}, ${r}, ${n}, ${t})`}function Yo(e,t,o,r){let[n,i,s]=ia(e),a=(n+t).toFixed(2),c=(i*100+o).toFixed(2),l=(s*100+r).toFixed(2);return`hsl(${a}, ${c}%, ${l}%)`}var pa={accent:qo.accent,link:qo.link,topPanelBackground:qo.topPanelBackground,topPanelText:qo.topPanelText};function ph(e){pa.accent=e.accent,pa.link=e.link,pa.topPanelBackground=e.topPanelBackground,pa.topPanelText=e.topPanelText}function fh(e){var n;let t=(n=e==null?void 0:e.windowContext)!=null?n:window,o={...qo,...e==null?void 0:e.baseColors};ph(o),dh({element:e==null?void 0:e.element,customColors:{customAccent:o.accent,customPanelDefault:o.topPanelBackground,customTextDefault:o.topPanelText},windowContext:t});let r=mh(o);e!=null&&e.element?rt(e.element,r,t):fn(r)}immer.enableAllPlugins();var Ve=immer.produce,hh=immer.applyPatches;!1&&immer.setAutoFreeze(!0);var gh=reatom.createStore,Du=reatom.declareAtom,fa=reatom.declareAction,ha=reatom.combine,yh=reatom.map,A5=reatom.initAction,P5=reatom.getTree,O5=reatom.getDepsShape;var xB="";function Er(){return xB}var we={LATO:"Lato",ROBOTO:"Roboto",OPEN_SANS:"Open Sans",MERRIWEATHER:"Merriweather",ROBOTO_SLAB:"Roboto Slab",EXO_2:"Exo 2",MONTSERRAT:"Montserrat",PT_SERIF:"PT Serif",IBM_PLEX_SANS:"IBM Plex Sans",INTER:"Inter",NUNITO_SANS:"Nunito Sans"};function Eu(e){return`${Vi(e)}, ${BB(e)}`}function Vi(e){switch(e){case we.LATO:return"Lato";case we.ROBOTO:return"roboto";case we.OPEN_SANS:return"open-sans";case we.MERRIWEATHER:return"merriweather";case we.ROBOTO_SLAB:return"roboto-slab";case we.EXO_2:return"exo-2";case we.MONTSERRAT:return"montserrat";case we.PT_SERIF:return"pt-serif";case we.IBM_PLEX_SANS:return"ibm-plex-sans";case we.INTER:return"inter";case we.NUNITO_SANS:return"nunito-sans";default:return""}}function BB(e){switch(e){case we.LATO:case we.ROBOTO:case we.OPEN_SANS:case we.EXO_2:case we.MONTSERRAT:case we.IBM_PLEX_SANS:case we.INTER:case we.NUNITO_SANS:return"sans-serif";case we.MERRIWEATHER:case we.ROBOTO_SLAB:case we.PT_SERIF:return"serif";default:return""}}function Ch({designSettings:e,element:t=document.documentElement}){let o=Eu(e.headerFont),r=Eu(e.contentFont);t.style.setProperty("--player-main-font",o),t.style.setProperty("--header-font-family",o),t.style.setProperty("--content-font",r),t.style.setProperty("--content-font-family",r),t.style.setProperty("--roll-player-accent-color",e.accentColor)}function Sh({settings:e,topPanelColors:t}){let o={accent:e.design.accentColor};t&&(o.topPanelBackground=t.topPanelBackground,o.topPanelText=t.topPanelText),Ch({designSettings:e.design}),fh({baseColors:o})}function _h({settings:e,i18nData:t}){Sh({settings:e}),Gf(e.advanced.direction),Wf(t)}var kh="data-1.bin",xh="data-1.json";var ee={CLICK:"click",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",CHANGE:"change",SELECTION_CHANGE:"selectionchange",INPUT:"input",TEXT_INPUT:"textInput",KEY_DOWN:"keydown",KEY_PRESS:"keypress",PASTE:"paste",CUT:"cut",COPY:"copy",BLUR:"blur",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",LOAD:"load",LOAD_END:"loadend",LOADED_METADATA:"loadedmetadata",UNLOAD:"unload",BEFOREUNLOAD:"beforeunload",ERROR:"error",DRAG_START:"dragstart",DRAG_OVER:"dragover",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DROP:"drop",RESIZE:"resize",SCROLL:"scroll",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",ORIENTATIONCHANGE:"orientationchange",CUSTOM_CONNECTED:"connected",CUSTOM_DISCONNECTED:"disconnected",TRANSITIONEND:"transitionend",TOUCHSTART:"touchstart",VISIBILITYCHANGE:"visibilitychange"};var jo=class{constructor(t){this.Type=t}};function bh(e,t){return new Promise((o,r)=>{if(e=e,typeof e.arrayBuffer=="undefined"){let n=new FileReader;St(n,ee.LOAD_END,()=>{n.result||r();let i=n.result;o(Bh(i,t))}),St(n,ee.ERROR,r),n.readAsArrayBuffer(e)}else e.arrayBuffer().then(n=>o(Bh(n,t))).catch(r)})}function Bh(e,t){let o=new Uint32Array(e.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],r=new Uint8Array(e.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:n}=t(o),i=n.decode(r),s=n.toObject(i);return{version:o,data:s}}var Xo={crop:{_:"cp",top:"tp",left:"lf",right:"rt",bottom:"bm"}};var Fi={color:"c",opacity:"o"},Ru={src:"s",width:"w",height:"h",overlay:{_:"o",...Fi},...Xo},Mu={type:"t",image:{_:"i",...Ru},overlay:{_:"O",...Fi},...Fi};var vh={_:"ds",background:{_:"b",color:"c",opacity:"o"},paddingTop:"pt",paddingBottom:"pb"},Th={_:"ds",background:{_:"bg",color:{_:"cl",color:"c",opacity:"o"},mediaResource:{_:"mr",type:"t",resource:{_:"rs",src:"s",width:"w",height:"h",...Xo},position:{_:"p",x:"x",y:"y"},overlay:{_:"k",...Fi}}},padding:{_:"p",bottom:"pb",top:"pt"},size:{_:"s",minHeight:"mh"}};var Ze={key:"k",type:"t"},le={key:"k",type:"t",designSettings:{...vh}},he={key:"k",type:"t",designSettings:{...Th}};var xe={...Ze,src:"s",fileName:"fn",fileExtension:"fe",fileSize:"fs",isLoading:"iL"},Qt={...xe,...le},ga={...xe,...he};var Ki="#",co={[Ki]:Ki},wh=1,Dh=2,Eh=4,Rh=8,Mh=16,ao={FONT_SIZE:2,FONT_COLOR:3,TEXT_HIGHLIGHT_COLOR:4,TEXT_HIGHLIGHT_OPACITY:5,ALIGNMENT:6},Ih="#";function wo(e){return e===Ih}function ya(e){let t=e;if(t&&t.style&&t.url!==void 0){let o=[...t.style],r=t.url,n=[],i=null,s=null,a=null,c=null,l=null;if(o.length){let m=0;for(let u of o)switch(u.name){case"bold":m|=wh;break;case"italic":m|=Dh;break;case"underline":m|=Eh;break;case"strikethrough":m|=Rh;break;case"code":m|=Mh;break;case"alignment":l=u.type;break;case"fontSize":i=u.size;break;case"fontColor":s=u.color;break;case"textHighlightColor":a=u.color;break;case"textHighlightOpacity":c=u.opacity;break}n.push(m)}r&&n.push(r),i&&(n[ao.FONT_SIZE]=i),s&&(n[ao.FONT_COLOR]=s),a&&(n[ao.TEXT_HIGHLIGHT_COLOR]=a),c&&(n[ao.TEXT_HIGHLIGHT_OPACITY]=c),l&&(n[ao.ALIGNMENT]=l);for(let m=0;m<n.length;m++)n[m]==null&&(n[m]=Ih);return{[Ki]:n}}}function gn(e){if(typeof e=="object"&&e&&e.hasOwnProperty(Ki)){let t=e[Ki],o=[],r=t.length&&!wo(t[0])&&typeof t[0]=="number"&&!isNaN(t[0])?t[0]:void 0,n=t.length&&!wo(t[0])&&Xt(t[0])?t[0]:t.length>1&&!wo(t[1])&&Xt(t[1])?t[1]:void 0,i=t[ao.FONT_SIZE],s=t[ao.FONT_COLOR],a=t[ao.TEXT_HIGHLIGHT_COLOR],c=t[ao.TEXT_HIGHLIGHT_OPACITY],l=t[ao.ALIGNMENT];return!wo(r)&&typeof r=="number"&&!isNaN(r)&&(r&wh&&o.push({name:"bold"}),r&Dh&&o.push({name:"italic"}),r&Eh&&o.push({name:"underline"}),r&Rh&&o.push({name:"strikethrough"}),r&Mh&&o.push({name:"code"})),!wo(i)&&(typeof i=="number"||i==="auto")&&o.push({name:"fontSize",size:i}),!wo(s)&&Xt(s)&&o.push({name:"fontColor",color:s}),!wo(a)&&Xt(a)&&o.push({name:"textHighlightColor",color:a}),!wo(c)&&typeof c=="number"&&!isNaN(c)&&o.push({name:"textHighlightOpacity",opacity:c}),!wo(l)&&(l==="superscript"||l==="subscript")&&o.push({name:"alignment",type:l}),re.create({style:ve.create(o),url:n})}}var Zo={text:"t",meta:{_:"m",...co},length:"l"};var Be={...Ze,src:"s",width:"w",height:"h",alignment:"a",characters:{_:"c",...Zo}},ft={...Be,...le},yn={...Be,...he};var Jo={...Ze,src:"s",width:"w",height:"h",alignment:"a",characters:{_:"c",...Zo},isBlob:"iB"},Cn={...Jo,...le},Ah={...Jo,...he};var bB={...Jo,parentCollageKey:"cK"},Ph={...Cn,parentCollageKey:"cK"},Ca={...Ze,alignment:"a",images:{_:"is",...bB,length:"l"}},De={...Ca,images:{...Ca.images,...Xo}},ht={...De,...le,images:{...De.images,...Ph}},Sn={...De,...he,images:{...De.images,...Ph}};function _a(e,t,o){let r=t[e];return r?Xt(r)?{keyValue:r,newKeys:t}:{keyValue:(_n(r)||r)._,newKeys:r}:(R.error(`key not found: ${e}, path: ${o.join(".")}`),{keyValue:e,newKeys:t})}function ka(e,t,o){for(let r of Object.keys(t)){let{keyValue:n,newKeys:i}=_a(r,t,o);if(n===e&&r!=="_")return{key:r,newKeys:i}}return R.error(`cant find value: ${e}, path: ${o.join(".")}`),{key:e,newKeys:t}}var Sa=class{constructor(t){this.keys=t}};function v(e){return new Sa(e)}function _n(e){return e instanceof Sa?e.keys:null}var me={...Ze,viewType:"v",textAlign:"tA",characters:{_:"c",...Zo},isOrderedListFirstItem:"iO"},Ke={...me,...le},nt={...Ke,defaultCharactersMeta:{_:"dCM",textStyles:{_:"tS",bold:"b",italic:"i",underline:"u",strikethrough:"s",alignment:"a",fontSize:"fs",fontColor:"fc",textHighlightColor:"thc",textHighlightOpacity:"tho"}}},Le={...nt,defaultCharactersMeta:{_:"dCM",textStyles:{_:"tS",bold:"b",italic:"i",underline:"u",strikethrough:"s",alignment:"a",fontSize:"fs",fontColor:"fc",textHighlightColor:"thc",textHighlightOpacity:"tho",code:"c"}}},Ne={...Le,...he};var xa={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me})}},Iu={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ke})}},Ba={blockMap:{...Iu.blockMap,blocks:v({_:"B",...nt})}},it={blockMap:{...Ba.blockMap,blocks:v({_:"B",...Le})}},Oh={blockMap:{...Ba.blockMap,blocks:v({_:"B",...Ne})}};var Vh={type:"t",width:"w",height:"h",src:"s"},Fh={...Vh,...Xo},Li={...Fh,title:"tl",previewSrc:"pws"},vB={caseSensitive:"cs",answers:{_:"a",key:"k",text:"t",length:"l"}},TB=e=>({choices:{_:"ch",key:"k",content:{_:"c",...e},correct:"cr",length:"l"}}),wB=e=>({type:"t",correct:{_:"c",...e},incorrect:{_:"i",...e},answered:{_:"a",...e}}),Rr=(e,t)=>({_:"q",key:"k",type:"t",description:{_:"d",...e},attachment:{_:"a",...t},content:{_:"c",...TB(e),...vB},feedback:{_:"f",...wB(e)}}),$i={...Ze,settings:{_:"ss",includeInProgress:"iip",shuffleAnswers:"sa",showCorrectAnswers:"sca"},questions:Rr(xa,Vh)},Au={...$i,questions:Rr(xa,Fh)},We={...Au,questions:Rr(xa,Li)},Mr={...We,questions:Rr(Iu,Li),...le},ba={...Mr,questions:Rr(Ba,Li),...le},Kh={...ba,questions:Rr(it,Li),...le},c6={...ba,questions:Rr(Oh,Li),...le};var Lh={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Jo,...Be,...xe,...$i})}},DB={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Lh}},EB={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Lh}},va={intro:{_:"i",...DB},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...EB})}},Ta={main:{_:"m",navigationType:"nT",numberingEnabled:"nE",nextButtonEnabled:"nbE",copyingEnabled:"cE"},design:{_:"d",accentColor:"aC",headerFont:"hF",contentFont:"cF"}};var $h={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...Ca,...$i})}},RB={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...$h}},MB={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...$h}},wa={intro:{_:"i",...RB},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...MB})}},Da=Ta;var Nh={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...Au})}},IB={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Nh}},AB={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Nh}},Ea={intro:{_:"i",...IB},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...AB})}},Ra=Da;var zh={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We})}},PB={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...zh}},OB={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...zh}},Ma={intro:{_:"i",...PB},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...OB})}},Ia=Ra;function M(){return cu()}var g={PARAGRAPH:"p",IMAGE:"i",COLLAGE:"c",EMBED:"e",EXERCISE:"E",QUIZ:"Q",ATTACHMENT:"a",NOTE:"n",TABLE:"t",FLIP_CARD:"fc",DIVIDER:"d",CONTINUE:"ct",VIDEO:"v",SNIPPET:"s",LAYOUT:"l",CODE:"cd"};var Do={create({key:e,fileName:t,fileExtension:o,fileSize:r,src:n,isLoading:i}){return{key:e||M(),type:g.ATTACHMENT,fileName:t||"",fileExtension:o||"pdf",fileSize:r||0,src:n,isLoading:i||!1}},clone(e){let t=M();return{...e,key:t}},toAttachmentBlock(e){return e&&e.type===g.ATTACHMENT?e:null},getBlockType(e){return"attachment"}};var kn=class{static create(t){return{codeTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.codeTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.codeTextSelected}};function Qh(e,t){let o=t&&t.crossOrigin;return new Promise((r,n)=>{let i=document.createElement("img");i.addEventListener(ee.LOAD,s),i.addEventListener(ee.ERROR,a),o&&(i.crossOrigin="Anonymous"),i.src=e;function s(){c(),r(i)}function a(){c(),n()}function c(){i.removeEventListener(ee.LOAD,s),i.removeEventListener(ee.ERROR,a)}})}function Hh(e){return{width:e.offsetWidth,height:e.offsetHeight}}function xn(e){return{width:e.right-e.left,height:e.bottom-e.top}}function Eo(e,t){return{left:e.x,top:e.y,right:e.x+t.width,bottom:e.y+t.height}}function Uh(e){let t=wr(e),o=xn(e),r=Pi(o);return To(t,ah(r,la(2)))}function VB(e,t){return e.right>=t.left&&e.left<=t.right&&e.bottom>=t.top&&e.top<=t.bottom}function Wh(e,t){if(!VB(e,t))return null;let o=Math.max(e.left,t.left),r=Math.max(e.top,t.top),n=Math.min(e.right,t.right),i=Math.min(e.bottom,t.bottom),s=n-o,a=i-r;return s*a}function qh(e){return{width:e.right-e.left,height:e.bottom-e.top}}var FB={top:0,right:0,bottom:0,left:0};function Pu(){return{...FB}}function Gh(e,t,o,r){let n=e,i=t;return o>r?(i=Math.min(e*(r/o),t),n=i*(o/r)):(n=Math.min(t*(o/r),e),i=n*(r/o)),{top:Math.ceil((t-i)/2),right:Math.ceil((e-n)/2),bottom:Math.ceil((t-i)/2),left:Math.ceil((e-n)/2)}}function Dt({width:e,height:t,crop:o,src:r}){return{src:r,crop:o||Pu(),width:o?e-o.left-o.right:e,height:o?t-o.top-o.bottom:t}}function Yh(e){let{width:t,height:o}=e,r=Dt(e),n=t-r.width,i=o-r.height,s=n===0?0:r.crop.left/t*(t/n)*100,a=i===0?0:r.crop.top/o*(o/i)*100;return{width:t/r.width*100,height:o/r.height*100,positionX:s,positionY:a}}function Ou(e){return e.crop?{src:e.src,width:e.width,height:e.height}:e}async function KB(e,t,o,r){let n=await Qh(e);return new Promise((i,s)=>{let a=document.createElement("canvas"),c=d(a.getContext("2d")),l=qh(t);a.width=o?Math.min(l.width,o):l.width,a.height=r?Math.min(l.height,r):l.height,c.drawImage(n,t.left,t.top,l.width,l.height,0,0,a.width,a.height),a.toBlob(m=>m?i(m):s())})}function jh({src:e,crop:t,width:o,height:r}){let n=LB(t,o,r);return KB(e,n)}function LB(e,t,o){return{left:e.left,right:t-e.right,top:e.top,bottom:o-e.bottom}}function Et(e){return{...e,background:e.background&&{...e.background}}}var $B="collage",NB=3;var zB=960,ae={create({key:e,images:t=[],alignment:o,designSettings:r}){let n=e||M(),i=t.map(s=>({...s,parentCollageKey:n}));return{key:n,type:g.COLLAGE,images:i,alignment:o||"inner",designSettings:r}},clone(e){let t=M();return{...e,key:t,images:e.images.map(o=>({...o,key:M(),parentCollageKey:t})),designSettings:e.designSettings&&Et(e.designSettings)}},cloneImage(e){return{...e,key:M()}},toCollageBlock(e){return e&&e.type===g.COLLAGE?e:null},getBlockType(e){return $B},isCollageBlock(e){return!!e&&e.type===g.COLLAGE},getCollagedImage(e,t){return e.images.find(o=>o.key===t)||null},getCaptionParagraphs(e){return e.images.map(t=>t)},getCollagedImageIndex(e,t){return e.images.findIndex(o=>o.key===t)},supportFullAlign(e){return e.images.length>1?!0:Dt(e.images[0]).width>=zB},supportFloat(e){return e.images.length>1?!1:!!e.images[0].width},supportAlignment(e,t){switch(t){case"float-left":return ae.supportFloat(e);case"full":case"outer":return ae.supportFullAlign(e);case"inner":return!0}},isOneImageCollage(e){return e.images.length===1},canAddImage(e){return e.images.length<NB}};var Aa=class{static create({itemKey:t,captionSelected:o}){return{collageSelectedItemKey:t||"",collageItemCaptionSelected:o||!1}}};function Xh(e){return e.length===2}function Zh({offset:e,textLength:t,getCharacterByIndex:o}){let r=0,n=0;for(;r<t;++r,++n)if(Xh(o(r))&&++n,n>=e)return r;return r}function Jh({offset:e,textLength:t,getCharacterByIndex:o}){let r=0,n=0;for(;r<t;++r,++n){if(r>=e)return n;Xh(o(r))&&++n}return n}function q(e){return!e||e.type!==g.PARAGRAPH?null:e}var eg=["ul","ol"],tg=["blockquote","pullquote"],og=["h1","h2","h3"],QB=[...og,...tg,...eg,"text"];function Vu(e,t){return e[t].meta.url}var w={create(e={}){!1&&d(e.viewType==null||QB.includes(e.viewType));let t=e.characters||[];typeof t=="string"&&(t=w.createCharacters(t,re.create()));let o={type:g.PARAGRAPH,key:e.key||M(),viewType:e.viewType||"text",textAlign:e.textAlign||"left",characters:t};return e.viewType==="ol"&&(o.isOrderedListFirstItem=e.isOrderedListFirstItem||!1),e.designSettings&&(o.designSettings=e.designSettings),e.defaultCharactersMeta&&(o.defaultCharactersMeta=e.defaultCharactersMeta),o},clone(e,t={}){return{...Nt(e),key:M(),...t}},createCharacters(e,t){return[...e].map(o=>({text:o,meta:t}))},extendHyperlinksSelection(e,t,o=e.characters.length){let{characters:r}=e,n=Vu.bind(null,r),i=n(t);if(i)for(;t>0&&i==n(t-1);)--t;let s=n(o-1);if(s)for(;o<r.length&&s==n(o);)++o;return{start:t,end:o}},hasHyperlink(e,t,o=e.characters.length){for(let r=t;r<o;++r)if(Vu(e.characters,r))return!0;return!1},getBlockViewType(e){return e.viewType},getHyperlinksInfo(e){let t=[],o=null;for(let r=0;r<e.length;++r){let n=Vu(e,r);o&&o.url!=n&&(t.push({start:o.start,end:r,url:o.url}),o=null),n&&!o&&(o={start:r,url:n})}return o&&t.push({start:o.start,end:e.length,url:o.url}),t},getParagraphText(e){return e.characters.reduce((t,o)=>t+o.text,"")},getCharacters(e){return e.characters.map(t=>t.text)},getWordStartIndex(e,t){return Pf(w.getParagraphText(e),t)},getWordEndIndex(e,t){return Of(w.getParagraphText(e),t)},getLastChapterStyles(e){let t=e.characters,o=t[t.length-1];return o&&o.meta.style},isList(e){let t=q(e);return!!t&&eg.includes(t.viewType)},isOrderedList(e){let t=q(e);return!!t&&t.viewType==="ol"},isQuote(e){let t=q(e);return!!t&&tg.includes(t.viewType)},isHeading(e){let t=q(e);return!!t&&og.includes(t.viewType)},isEmptyParagraph(e){let t=q(e);return!!t&&t.characters.length==0},getTextRuns(e,t){t||(t=n=>n);let o=e.characters;if(o.length==0)return[];let r=[{text:o[0].text,styles:t(o[0].meta),isLast:!1}];for(let n=1;n<o.length;++n){let i=o[n],s=t(i.meta),a=r.length-1,c=r[a].styles;re.compare(s,c)?r[a].text+=i.text:r.push({text:i.text,styles:s,isLast:!1})}return r[r.length-1].isLast=!0,r},convertBrowserToModelOffset(e,t){return Zh({offset:t,textLength:e.characters.length,getCharacterByIndex:o=>e.characters[o].text})},convertModelToBrowserOffset(e,t){return Jh({offset:t,textLength:e.characters.length,getCharacterByIndex:o=>e.characters[o].text})}};var st={basicPaletteCrimson:"#B8195B",basicPaletteDeepSpace:"#02318A",basicPaletteSpaceBlue:"#0047CB",black60:"#00000099",black8:"#00000014",black80:"#000000CC",blackDefault:"#000000",blue16:"#4A90E229",blue30:"#4A90E24D",blue8:"#4A90E214",blue80:"#4A90E2CC",blueBlack:"#0D2E53",blueDark:"#287BDC",blueDarker:"#1E67BD",blueDefault:"#4A90E2",dark12:"#42484E1F",dark14:"#42484E24",dark16:"#42484E29",dark20:"#42484E33",dark28:"#42484E47",dark40:"#42484E66",dark60:"#42484E99",dark72:"#42484EB8",dark8:"#42484E14",dark80:"#42484ECC",dark87:"#42484EDE",darkDark:"#2F3337",darkDefault:"#42484E",grayDark:"#D0D0D1",grayDarker:"#C0C0C1",grayDefault:"#EFEFF0",grayLight:"#F2F2F3",grayLighter:"#F6F6F7",green16:"#3CB46E29",green30:"#3CB46E4D",green8:"#3CB46E14",green80:"#3CB46ECC",greenBlack:"#091B10",greenDark:"#32955B",greenDarker:"#287748",greenDefault:"#3CB46E",orange16:"#FF9F3329",orange30:"#FF9F334D",orange8:"#FF9F3314",orange80:"#FF9F33CC",orangeBlack:"#603506",orangeDark:"#F08713",orangeDarker:"#CE720D",orangeDefault:"#FF9F33",purple16:"#6257BA29",purple30:"#6257BA4D",purple8:"#6257BA14",purple80:"#6257BACC",purpleBlack:"#262150",purpleDark:"#4F44A6",purpleDarker:"#413889",purpleDefault:"#6257BA",red16:"#F0513D29",red30:"#F0513D4D",red8:"#F0513D14",red80:"#F0513DCC",redBlack:"#5A1007",redDark:"#EE2F17",redDarker:"#CC250F",redDefault:"#F15541",slate10:"#8D98A21A",slate20:"#8D98A233",slate40:"#8D98A266",slate5:"#8D98A20D",slate60:"#8D98A299",slate80:"#8D98A2CC",slateDefault:"#8D98A2",white16:"#FFFFFF29",white30:"#FFFFFF4D",white60:"#FFFFFF99",white80:"#FFFFFFCC",whiteDefault:"#FFFFFF",yellow16:"#F9C60E29",yellow30:"#F9C60E4D",yellow8:"#F9C60E14",yellow80:"#F9C60ECC",yellowBlack:"#473800",yellowDark:"#E5B406",yellowDarker:"#C29800",yellowDefault:"#F9C60E"};var Fu=re.create({style:ve.create([{name:"fontColor",color:st.whiteDefault}])});function Ku(e){let t=w.createCharacters(e||k("Roll.Editor.Continue.DefaultText"),Fu);return w.create({characters:t,textAlign:"center"})}function rg(){return{color:Er(),opacity:1}}var Re={create(e={}){let t=e.key||M();return{type:g.CONTINUE,key:t,paragraph:e.paragraph||Ku(),continueColor:e.continueColor||rg(),meta:e.meta||[{name:"charactersMeta",data:Fu}],designSettings:e.designSettings}},createFromDivider(e){let t=e.dividerType==="line-with-text"?e.meta.filter(n=>n.name==="charactersMeta"):void 0,o=e.dividerType==="line-with-text"?w.getParagraphText(e.paragraph):void 0,r=Ku(o);return Re.create({...e,meta:t,paragraph:r,designSettings:e.designSettings?{...e.designSettings}:void 0})},clone(e){return Re.create({...e,key:M(),paragraph:{...e.paragraph,key:M()},designSettings:e.designSettings&&Et(e.designSettings)})},toContinueBlock(e){return e&&e.type===g.CONTINUE?e:null},getBlockType(e){return"continue"},getCharactersMeta(e){let t=Ue(e.meta,"charactersMeta");return(t==null?void 0:t.data)||null},addMeta(e,t){e.meta=Jt(e.meta,t)},changeContinueColor(e,t){e.continueColor=t}};var Bn=class{static create(t){return{continueTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.continueTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.continueTextSelected}};var HB="1",Lu={rounded:re.create({style:ve.create([{name:"fontColor",color:st.whiteDefault}])}),squared:re.create({style:ve.create([{name:"fontColor",color:st.whiteDefault},{name:"bold"}])})};function ng(e){let t=e==="squared"?k("Roll.Editor.Divider.Default.Rectangle.Paragraph.Text"):HB,o=w.createCharacters(t,Lu[e]);return w.create({characters:o,textAlign:"center"})}function bn(e){return e==="line"?{color:st.darkDefault,opacity:1}:{color:Er(),opacity:1}}var ge={createLineDivider(e={}){return{type:g.DIVIDER,key:e.key||M(),dividerType:"line",alignment:e.alignment||"inner",dividerColor:e.dividerColor||bn("line"),style:e.style||"solid",designSettings:e.designSettings}},createLineWithTextDivider(e){let t=e.key||M();return{type:g.DIVIDER,key:t,dividerType:"line-with-text",alignment:e.alignment||"inner",dividerColor:e.dividerColor||bn("line-with-text"),style:e.style||"solid",paragraph:e.paragraph||ng(e.paragraphStyle),paragraphStyle:e.paragraphStyle,meta:e.meta||[{name:"charactersMeta",data:Lu[e.paragraphStyle]}],designSettings:e.designSettings}},createDividerFromContinue(e){var t,o;return ge.createLineWithTextDivider({...e,dividerColor:e.continueColor,paragraphStyle:"squared",designSettings:{background:{color:(o=(t=e.designSettings)==null?void 0:t.background)==null?void 0:o.color}}})},createQuoteDivider(e={}){return{type:g.DIVIDER,key:e.key||M(),dividerType:"quotes",dividerColor:e.dividerColor||bn("quotes"),style:e.quoteStyle||"quote_1",designSettings:e.designSettings}},createDiamondsDivider(e={}){return{type:g.DIVIDER,key:e.key||M(),dividerType:"diamonds",dividerColor:e.dividerColor||bn("diamonds"),style:"default",designSettings:e.designSettings}},createArrowDivider(e={}){return{type:g.DIVIDER,key:e.key||M(),dividerType:"arrow",dividerColor:e.dividerColor||bn("arrow"),style:"default",designSettings:e.designSettings}},changeDividerType(e,t){if(e.dividerType===t)return e;let o=e.dividerType==="line-with-text"||e.dividerType==="line",r=e.dividerType==="line-with-text";switch(t){case"arrow":return ge.createArrowDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"diamonds":return ge.createDiamondsDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"quotes":return ge.createQuoteDivider({key:e.key,dividerColor:e.dividerColor,designSettings:e.designSettings});case"line":return ge.createLineDivider({key:e.key,dividerColor:e.dividerColor,alignment:o?e.alignment:void 0,style:o?e.style:void 0,designSettings:e.designSettings});case"line-with-rectangle":case"line-with-circle":return ge.createLineWithTextDivider({key:e.key,dividerColor:e.dividerColor,paragraphStyle:t==="line-with-circle"?"rounded":"squared",alignment:o?e.alignment:void 0,style:o?e.style:void 0,paragraph:r?e.paragraph:void 0,designSettings:e.designSettings});default:throw new Error(`unknown divider view type ${t}`)}},changeDividerColor(e,t){e.dividerColor=t},changeDividerLineStyle(e,t){e.style=t},changeQuoteStyle(e,t){e.style=t},addMeta(e,t){e.meta=Jt(e.meta,t)},changeDividerAlignment(e,t){e.alignment=t},clone(e,t=M()){let o={...e.dividerColor},r=e.designSettings&&Et(e.designSettings);switch(e.dividerType){case"line-with-text":return ge.createLineWithTextDivider({...e,key:t,paragraph:{...e.paragraph,key:t},dividerColor:o,designSettings:r});case"line":return ge.createLineDivider({...e,key:t,dividerColor:o,designSettings:r});case"arrow":return ge.createArrowDivider({...e,key:t,dividerColor:o,designSettings:r});case"diamonds":return ge.createDiamondsDivider({...e,key:t,dividerColor:o,designSettings:r});case"quotes":return ge.createQuoteDivider({...e,key:t,dividerColor:o,designSettings:r})}},toFigureDividerBlock(e){switch(e.dividerType){case"quotes":case"arrow":case"diamonds":return!0}return!1},toDividerWithLineBlock(e){switch(e.dividerType){case"line":case"line-with-text":return!0}return!1},toDividerBlock(e){return e&&e.type===g.DIVIDER?e:null},getBlockType(e){return`divider-${e.dividerType}`},getCommonBlockType(e){return"divider"},getCharactersMeta(e){let t=Ue(e.meta,"charactersMeta");return(t==null?void 0:t.name)==="charactersMeta"?t.data:null}};var vn=class{static create(t){return{dividerTextSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.dividerTextSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.dividerTextSelected}};function H(e,t,o){if(!t.hasOwnProperty(e)){if(o)return o(e);throw new Error(`getValueByCheckedKey(${e})`)}return t[e]}function Pa(e){if(e.type==="image")return null;let t=Ue(e.meta,"charactersMeta");return t&&t.name==="charactersMeta"?t.data:null}var ig=new Map,UB=new He;function sg(e,t){ig.set(e,t),UB.dispatch()}function Oa(e){return ig.get(e)||null}function ag(e){let t=Wo();return se(e,o=>{let r=K.cloneBlock(o);ra(t,r.key,r)}),t}var eo={PARAGRAPH:g.PARAGRAPH,COLLAGE:g.COLLAGE,EMBED:g.EMBED,NOTE:g.NOTE,DIVIDER:g.DIVIDER,VIDEO:g.VIDEO,SNIPPET:g.SNIPPET,CODE:g.CODE};var $u=["layout-column-2","layout-column-3","layout-column-4"],cg=["layout-column-1",...$u];var WB=Object.values(eo),qB=4;var GB=2,YB=1;function jB(e,t=[]){let o={};for(let r in e){let n=t[r]?t[r]:[w.create()],i=e[r];o[i]=ie.createBlocksMap(n)}return o}function lg(e,t,o=[w.create({textAlign:e.horizontalTextAlign})]){let r=M();return e.colsMap[r]=ie.createBlocksMap(o),t(r,e.colsOrder),r}var ie={create(e={}){let t=e.colsOrder||Array.from(new Array(e.columnCount),M),o=e.colsMap||jB(t,e.fillBlocks),r={type:g.LAYOUT,layoutType:e.layoutType||"column",key:e.key||M(),alignment:"inner",horizontalTextAlign:"left",verticalBlockAlign:e.verticalBlockAlign||"top",colsOrder:t,colsMap:o};return e.designSettings&&(r.designSettings=e.designSettings),r},createFromBlock(e){let t=[M()],o={[t[0]]:ie.createBlocksMap([K.cloneBlock(e)])};return ie.create({key:e.key,colsMap:o,colsOrder:t})},createBlocksMap(e){let t={order:[],blocks:{}};for(let o of e)t.order.push(o.key),t.blocks[o.key]=o;return{blockMap:t}},toLayoutBlock(e){return e&&e.type===g.LAYOUT?e:null},getBlock(e,t,o){return e.colsMap[t].blockMap.blocks[o]},getColumn(e,t){return e.colsMap[t]},getMinColumns(e){switch(e.layoutType){case"column":return GB;case"column-background":return YB;default:throw new Error("Unsupported layout type")}},isBackgroundLayoutBlock(e){return e.layoutType==="column-background"},getColumnBlockTypes(e){switch(e.layoutType){case"column":return $u;case"column-background":return cg;default:throw new Error("Unsupported layout type")}},getColumnType(e){if(e.colsOrder.length===1&&ie.isBackgroundLayoutBlock(e))return"layout-column-1";switch(e.colsOrder.length){case 2:return"layout-column-2";case 3:return"layout-column-3";case 4:return"layout-column-4";default:throw new Error(`Layout unsupported columns ${e.colsOrder.length}`)}},getColumnCount(e){switch(e){case"layout-column-1":return 1;case"layout-column-2":return 2;case"layout-column-3":return 3;case"layout-column-4":return 4;default:throw I(e),new Error(`unknown layout block type: ${e}`)}},getBlockType(e){return`layout-${e.layoutType}`},getFirstBlockContext(e){return{blockKey:e.key,colKey:e.colsOrder[0],key:e.colsMap[e.colsOrder[0]].blockMap.order[0]}},addColumnToStart(e,t){return lg(e,(o,r)=>r.unshift(o),t)},addColumnToEnd(e,t){return lg(e,(o,r)=>r.push(o),t)},addColumns(e,t){let o=e.colsOrder.length;for(let r=0;r<t-o;r++)ie.addColumnToEnd(e)},getAllBlocks(e){let t=[];for(let o=0;o<e.colsOrder.length;o++)t.push(...Object.values(e.colsMap[e.colsOrder[o]].blockMap.blocks));return t},insertBlockInColumn(e,t,o){e.colsMap[t].blockMap.order.push(o.key),e.colsMap[t].blockMap.blocks[o.key]=o},changeAlignment(e,t){e.alignment=t},changeVerticalAlign(e,t){e.verticalBlockAlign=t},changeHorizontalAlign(e,t){e.horizontalTextAlign=t,Object.values(e.colsMap).forEach(o=>{Object.values(o.blockMap.blocks).forEach(r=>{let n=q(r);!n||w.isList(n)||(n.textAlign=t)})})},transformColumnsCount(e,t){let o={order:[],blocks:{}};for(let r=t;r<e.colsOrder.length;r++){let n=e.colsOrder[r],i=e.colsMap[n];K.isOneEmptyParagraph(i)||(o.order.push(...i.blockMap.order),o.blocks={...o.blocks,...Nt(i.blockMap.blocks)}),delete e.colsMap[n]}return e.colsOrder.splice(t),o},deleteColumn(e,t){delete e.colsMap[t],e.colsOrder=e.colsOrder.filter(o=>o!==t)},cloneColumn(e){return{blockMap:ag(e.blockMap)}},isLayoutColumnBlock(e){let t=ae.toCollageBlock(e);return t&&ae.isOneImageCollage(t)?!0:WB.includes(e.type)},canInsertColumn(e){return e.colsOrder.length<qB},getBeforeColumnBlock(e,t){let o=ie.getBeforeColumnKey(e,t);if(!o)return null;let{order:r,blocks:n}=e.colsMap[o].blockMap;return{block:n[r[r.length-1]],colKey:o}},getAfterColumnBlock(e,t){let o=ie.getAfterColumnKey(e,t);if(!o)return null;let{order:r,blocks:n}=e.colsMap[o].blockMap;return{block:n[r[0]],colKey:o}},getBeforeColumnKey(e,t){let o=e.colsOrder.indexOf(t);return o===0?null:e.colsOrder[o-1]},getAfterColumnKey(e,t){let o=e.colsOrder.indexOf(t);return o===e.colsOrder.length-1?null:e.colsOrder[o+1]},getColumnBlocks(e,t){let o=e.colsMap[t].blockMap,r=[];return o.order.forEach(n=>{r.push(o.blocks[n])}),r},clone(e){let t=Wo();return e.colsOrder.forEach(o=>{let r=M();ra(t,r,ie.cloneColumn(e.colsMap[o]))}),{...e,key:M(),colsOrder:t.order,colsMap:t.blocks}}};function Va(e,t,o,r){return th(e.blockMap,t,o),{selection:D.createSelectionFromBlockData(o,r)}}function mg(e,t,o){let r=ae.toCollageBlock(e.blockMap.blocks[t]);if(!r||!r.images.map(i=>i.key).includes(o))return R.warn("Block must exist in contentState and must have collaged image with id:"+o),{selection:D.createTextSelection()};if(r.images.length<=1)return Va(e,t,w.create({key:t}));let n=ae.getCollagedImageIndex(r,o);return n>-1&&(r.images.splice(n,1),ae.isOneImageCollage(r)&&r.images[0].width<=960&&(r.alignment="inner")),{selection:D.createCollageBlockSelection(t)}}var XB="javascript",ZB=16,Rt={create(e={}){let t=e.key||M();return{type:g.CODE,key:t,paragraph:e.paragraph||w.create(),language:e.language||XB,fontSize:e.fontSize||"auto",designSettings:e.designSettings}},clone(e){return Rt.create({...e,key:M(),paragraph:{...e.paragraph,key:M()},designSettings:e.designSettings&&Et(e.designSettings)})},toCodeBlock(e){return e&&e.type===g.CODE?e:null},getLanguage(e){return e.language},getFontSize(e){return e.fontSize==="auto"?ZB:e.fontSize},getBlockType(e){return"code"},changeCodeLanguage(e,t){e.language=t},changeCodeFontSize(e,t){e.fontSize=t}};var JB="info";function ug(e){switch(e){case"incorrect":case"minus":return oh;case"correct":case"plus":return ih;case"info":return hn("--roll-player-accent-color");case"question":return sh;case"warning":return rh;case"bulb":return nh;case"withoutIcon":return hn("--color-icon-disabled");default:throw I(e,`Unknown note type: ${e}`),new Error(`Unknown note type: ${e}`)}}var eb=1;function tb(e){return{color:ug(e),opacity:eb}}function ob(e){switch(e){case"bulb":return aa;case"withoutIcon":return sa;default:return ug(e)}}var rb=.1;function nb(e){return{color:ob(e),opacity:rb}}var Ni={defaultType:JB,getIconColorData:tb,getBackgroundColorData:nb};var Vt={create(e={}){let t=e.characters||[];typeof t=="string"&&(t=w.createCharacters(t,re.create()));let o=e.noteType||Ni.defaultType;return{type:g.NOTE,key:e.key||M(),noteType:o,characters:t,customIconColor:e.customIconColor||null,customBackgroundColor:e.customBackgroundColor||null,designSettings:e.designSettings}},clone(e){let t=M();return{...Nt(e),key:t}},toNoteBlock(e){return e&&e.type===g.NOTE?e:null},getBlockType(e){return"note"},setNoteType(e,t){e.noteType=t,e.customIconColor=null,e.customBackgroundColor=null},setNoteBackgroundColor(e,t){e.customBackgroundColor=t},setNoteIconColor(e,t){e.customIconColor=t}};function dg(e={}){let{title:t=K.create(),attachment:o=null,description:r=K.create(),visible:n=!0}=e;return{title:t,attachment:o,description:r,visible:n}}function qe(e){let t=[];for(let o of e)t.push({text:o,meta:re.create()});return t}function Fa(){return{type:"correctIncorrect",correct:K.create([w.create({characters:qe(k("Quiz.Editor.Question.Feedback.CorrectText"))})]),incorrect:K.create([w.create({characters:qe(k("Quiz.Editor.Question.Feedback.IncorrectText"))})]),answered:K.create([w.create({characters:qe(k("Quiz.Editor.Question.Feedback.Answered"))})])}}function ze(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function ib(e,t,o){return{id:o,text:K.create([w.create({characters:qe(e)})]),correct:t}}function er(e,t){return ib(e,t,ze())}function sb(e,t){return{id:e,text:K.create([w.create({characters:qe(t)})])}}function pg(e){return sb(ze(),e)}function Ka(e,t){return{id:ze(),left:pg(e),right:pg(t)}}function ab(e,t){return{id:t,text:K.create([w.create({characters:qe(e)})])}}function La(e){return ab(e,ze())}function fg(e={}){let{id:t=ze(),text:o=""}=e;return{id:t,text:o}}function hg(e={}){let{caseSensitive:t=!1,answers:o=[]}=e;return{caseSensitive:t,answers:Fe(o,r=>r.id)}}function cb(){return Fe([er(k("Quiz.Editor.Choices.DefaultAnswer",{index:1}),!0),er(k("Quiz.Editor.Choices.DefaultAnswer",{index:2}),!1),er(k("Quiz.Editor.Choices.DefaultAnswer",{index:3}),!1)],e=>e.id)}function lb(){return Fe([La(k("Quiz.Editor.SequenceElements.DefaultAnswer",{index:1})),La(k("Quiz.Editor.SequenceElements.DefaultAnswer",{index:2})),La(k("Quiz.Editor.SequenceElements.DefaultAnswer",{index:3}))],e=>e.id)}function mb(){return hg({caseSensitive:!1,answers:[fg({text:`${k("Quiz.Editor.TypeIn.Answer")} 1`})]})}function Nu(e){return[k("Quiz.Editor.Matching.DefaultElement",{index:e}),k("Quiz.Editor.Matching.DefaultMatch",{index:e})]}function ub(){return{matches:Fe([Ka(...Nu(1)),Ka(...Nu(2)),Ka(...Nu(3))],e=>e.id),distractors:Fe([],e=>e.id)}}function db(e){switch(e){case"mc":case"mr":return{type:e,content:cb()};case"sq":return{type:e,content:lb()};case"ti":return{type:e,content:mb()};case"mt":return{type:e,content:ub()};default:I(e)}throw new Error("invalid question type "+e)}function gg({type:e,description:t,feedback:o}){return{id:ze(),description:t,attachment:null,feedback:o,...db(e)}}function zu({titleText:e,messageText:t,visibility:o="titleAndMessage"}){let r=K.create([w.create({characters:qe(e)})]),n=K.create([w.create({characters:qe(t)})]);return{title:r,message:n,visibility:o}}function Qu(e={}){let{displayType:t="showResults",visible:o=!0,passed:r=zu({titleText:k("Quiz.Editor.Results.Passed.Title"),messageText:k("Quiz.Editor.Results.Passed.Message")}),failed:n=zu({titleText:k("Quiz.Editor.Results.Failed.Title"),messageText:k("Quiz.Editor.Results.Failed.Message")}),completed:i=zu({titleText:k("Quiz.Editor.Results.Completed.Title"),messageText:k("Quiz.Editor.Results.Completed.Message")})}=e;return{displayType:t,visible:o,passed:r,failed:n,completed:i}}var $a=-1;function Uu(e){return{attempts:$a,passingScore:80,timeLimit:20*6e4,timeLimitEnabled:!1,shuffleAnswersEnabled:e,shuffleQuestionsEnabled:!1,showCorrectAnswersEnabled:e,showFeedbackEnabled:!0,isGraded:e}}function Na(e,t){return t===$a||e<t}function yg(e={}){let{visible:t=!0}=e,o=k("Roll.Editor.QuizBlock.DefaultTitle");return dg({title:K.create([w.create({characters:qe(o)})]),visible:t})}function pb(){let e=Wo(),t=gg({type:"mc",description:K.create(),feedback:Fa()});return na(e,t),e}var at={create(e={}){var l;let{key:t=M(),longreadQuizId:o=null,questions:r=pb(),settings:n={},designSettings:i,alignment:s="inner",isLoading:a=!1}=e,c={key:t,longreadQuizId:o||null,type:g.QUIZ,state:{intro:n.isGraded?yg():null,questions:r,results:n.isGraded?Qu():null},isLoading:a,settings:{main:{...Uu((l=n==null?void 0:n.isGraded)!=null?l:!1),...n}},alignment:s};return i&&(c.designSettings=i),c},clone(e){let t=M();return{...Nt(e),key:t}},setQuizId(e,t){e.longreadQuizId=t},changeIsGraded(e,t){let o=e.settings.main.isGraded;o&&!t?(e.state.intro=null,e.state.results=null):!o&&t&&(e.state.intro=yg({visible:!1}),e.state.results=Qu({visible:!1})),e.settings.main=Uu(t)},toQuizBlock(e){return e&&e.type===g.QUIZ?e:null},getBlockType(e){return"quiz"},getConvertableType(e){return e.settings.main.isGraded?"graded-quiz":"survey"}};var tr={create(e={}){let t=e.key||M();return{type:g.SNIPPET,key:t,url:e.url||"",title:e.title||"",imageSrc:e.imageSrc||null,iconSrc:e.iconSrc||null,description:e.description||null,designSettings:e.designSettings}},clone(e){return tr.create({...e,key:M()})},toSnippetBlock(e){return e&&e.type===g.SNIPPET?e:null},getBlockType(e){return"snippet"}};function Cg(e){return!!q(e)||!!Vt.toNoteBlock(e)||!!Rt.toCodeBlock(e)||!!ge.toDividerBlock(e)||!!Re.toContinueBlock(e)||!!ie.toLayoutBlock(e)||!!at.toQuizBlock(e)}var fb=/^\s*https?:\/\/\S+\s*$/;function Sg(e){return fb.test(e)}var be={getBlockByIndex(e,t){return bo(e,t)},getFirstBlock(e){return d(Yf(e))},getLastBlock(e){return d(jf(e))},getBlockBefore(e,t){return Xf(e,t)},getBlockAfter(e,t){return Zf(e,t)},forEach(e,t){Jf(e,t)},getBlocksArray(e){return e.order.map(t=>e.blocks[t])},hasBlock(e,t){return e.blocks.hasOwnProperty(t)}};var _g={create(e){return{...w.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),codeBlockKey:e.codeBlockKey}},toCodeParagraph(e){return e&&e.type===g.PARAGRAPH&&e.codeBlockKey?e:null}};var kg={create(e){return{...w.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),continueBlockKey:e.continueBlockKey}},toContinueParagraph(e){return e&&e.type===g.PARAGRAPH&&e.continueBlockKey?e:null}};var lo={create(e={}){let t={type:"",key:e.key||M(),alignment:e.alignment||"inner"};return e.designSettings&&(t.designSettings=e.designSettings),t},toAbstractMediaBlock(e){let t=e;return!e||t.type!==g.EMBED&&t.type!==g.IMAGE&&t.type!==g.COLLAGE&&t.type!==g.TABLE?null:t},getBlockType(e){return e.type===g.COLLAGE?`collage-${e.alignment}`:`media-${e.alignment}`}};var gt={create(e={}){let t=e.characters||[];return typeof t=="string"&&(t=w.createCharacters(t,re.create())),{...lo.create(e),width:e.width||0,height:e.height||0,characters:t}},toMediaBlock(e){return!e||![g.IMAGE,g.EMBED].includes(e.type)?null:e},getBlockType(e){return`media-${e.alignment}`},supportFullAlign(e){return e.type===g.EMBED||e.width>=960||!e.width}};var za={create(e={}){return{...gt.create(e),type:g.EMBED,width:e.width||0,height:e.height||0,src:e.src||""}},clone(e){let t=M();return{...Nt(e),key:t}},toEmbedBlock(e){return e.type!==g.EMBED?null:e}};var or=class{static createBlockSelection(){return{type:"flipCardBlock"}}static createCardTextSelection(t,o){return{type:"flipCardText",cardKey:t,cardSide:o}}static isBlockSelection(t){return t.customSelection&&t.customSelection.type==="flipCardBlock"}static isCardTextSelection(t){return t.customSelection&&t.customSelection.type==="flipCardText"}};var Qa=class{static create({blockSelected:t}){return{blockSelected:t||!1}}static isBlockSelected(t){return t.customSelection&&t.customSelection.blockSelected}};var Ha={create(e){return{...w.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),tableKey:e.tableKey,rowKey:e.rowKey,colKey:e.colKey,cellKey:e.cellKey,meta:e.meta||[]}},toCellParagraph(e){if(e&&e.type===g.PARAGRAPH){let t=e;if(t.tableKey&&t.rowKey&&t.colKey&&t.cellKey&&t.meta)return e}return null}};var p8=re.create();function hb(e,t){let o={};for(let r of e){o[r]={colsMap:{}};let i=o[r].colsMap;for(let s of t)i[s]=E.createCell()}return o}function xg(e,t,o){let r=M();e.rowsOrder.splice(t,0,r);let n={};for(let i of e.colsOrder){let s=o&&o(i),a=q(s==null?void 0:s.content);n[i]=E.createCell({horizontalTextAlign:a==null?void 0:a.textAlign,verticalTextAlign:s==null?void 0:s.verticalTextAlign,meta:s==null?void 0:s.meta})}return e.rowsMap[r]={colsMap:n},r}function gb(e,t,o){if(t.length!==e.rowsOrder.length)throw new Error("new rows count must be equal to original table rows count");let r={};for(let n=0;n<e.rowsOrder.length;n++){let i=t[n],s=e.rowsOrder[n];r[i]={colsMap:bg(e,s,o)}}return r}function bg(e,t,o){if(o.length!==e.colsOrder.length)throw new Error("new cols count must be equal to original table cols count");let r={};for(let n=0;n<e.colsOrder.length;n++){let i=o[n],s=e.colsOrder[n],a=e.rowsMap[t].colsMap[s];r[i]=E.cloneCell(a)}return r}function Bg(e,t,o){let r=M();e.colsOrder.splice(t,0,r);for(let n of e.rowsOrder){let i=o&&o(n),s=q(i==null?void 0:i.content),a=e.rowsMap[n];a.colsMap[r]=E.createCell({horizontalTextAlign:s==null?void 0:s.textAlign,verticalTextAlign:i==null?void 0:i.verticalTextAlign,meta:i==null?void 0:i.meta})}return r}function Wu(e,t){return e.colsOrder[0]===t}function yb(e,t,o){for(let r of t){let{colsMap:n}=e[r];for(let i of o)if(!n[i])throw new Error(`rowsMap is invalid: ${JSON.stringify(e)}`)}return e}var E={create(e={}){let t=e.rowsOrder||[M(),M(),M()],o=e.colsOrder||[M(),M(),M()];if(!o.length||!t.length)throw new Error("try to create table with 0 length of rowsCount or colsCount");return{type:g.TABLE,key:e.key||M(),alignment:e.alignment||"inner",rowsOrder:t,colsOrder:o,rowsMap:e.rowsMap?yb(e.rowsMap,t,o):hb(t,o),meta:e.meta||[],designSettings:e.designSettings}},addColumnBefore(e,t){Wu(e,t)&&E.removeTableMeta(e,"isHeaderColumnPinned");let o=e.colsOrder.indexOf(t);return Bg(e,o,r=>this.getCell(e,r,t))},addColumnAfter(e,t){let o=e.colsOrder.indexOf(t)+1;return Bg(e,o,r=>this.getCell(e,r,t))},addLastColumn(e){let t=e.colsOrder[e.colsOrder.length-1];return this.addColumnAfter(e,t)},addRowBefore(e,t){let o=e.rowsOrder.indexOf(t);return xg(e,o,r=>this.getCell(e,t,r))},addRowAfter(e,t){let o=e.rowsOrder.indexOf(t)+1;return xg(e,o,r=>this.getCell(e,t,r))},addLastRow(e){let t=e.rowsOrder[e.rowsOrder.length-1];return this.addRowAfter(e,t)},duplicateRow(e,t){let o=e.rowsOrder.indexOf(t)+1,r=M();return e.rowsMap[r]={colsMap:bg(e,t,e.colsOrder)},e.rowsOrder.splice(o,0,r),r},moveColumnLeft(e,t){e.colsOrder.length>=2&&e.colsOrder[1]===t&&E.removeTableMeta(e,"isHeaderColumnPinned");let o=e.colsOrder.indexOf(t);if(o<=0)return;let r=o-1,n=e.colsOrder;[n[o],n[r]]=[n[r],n[o]]},moveColumnRight(e,t){Wu(e,t)&&E.removeTableMeta(e,"isHeaderColumnPinned");let o=e.colsOrder.indexOf(t);if(o>=e.colsOrder.length-1)return;let r=o+1,n=e.colsOrder;[n[o],n[r]]=[n[r],n[o]]},removeColumn(e,t){Wu(e,t)&&E.removeTableMeta(e,"isHeaderColumnPinned"),e.colsOrder=e.colsOrder.filter(o=>o!==t),e.rowsOrder.forEach(o=>{delete e.rowsMap[o].colsMap[t]})},moveRowUp(e,t){let o=e.rowsOrder.indexOf(t);if(o<=0)return;let r=o-1,n=e.rowsOrder;[n[o],n[r]]=[n[r],n[o]]},moveRowDown(e,t){let o=e.rowsOrder.indexOf(t);if(o>=e.rowsOrder.length-1)return;let r=o+1,n=e.rowsOrder;[n[o],n[r]]=[n[r],n[o]]},duplicateColumn(e,t){let o=e.colsOrder.indexOf(t)+1,r=M();for(let n of e.rowsOrder){let i=e.rowsMap[n],s=i.colsMap[t];i.colsMap[r]=E.cloneCell(s)}return e.colsOrder.splice(o,0,r),r},removeRow(e,t){e.rowsOrder=e.rowsOrder.filter(o=>o!==t),delete e.rowsMap[t]},createCell(e={}){return{key:e.key||M(),content:e.paragraph||w.create({textAlign:e.horizontalTextAlign}),verticalTextAlign:e.verticalTextAlign||"top",meta:e.meta||[]}},toTableBlock(e){return e&&e.type===g.TABLE?e:null},getBlockType(e){return"table"},getCell(e,t,o){return e.rowsMap[t].colsMap[o]},cloneTable(e){let t=M(),o=[];for(let i=0;i<e.rowsOrder.length;i++)o.push(M());let r=[];for(let i=0;i<e.colsOrder.length;i++)r.push(M());let n=gb(e,o,r);return{type:g.TABLE,key:t,alignment:e.alignment,rowsOrder:o,colsOrder:r,rowsMap:n,meta:e.meta,designSettings:e.designSettings&&Et(e.designSettings)}},cloneCell(e){return{key:M(),content:{...e.content,key:M()},verticalTextAlign:e.verticalTextAlign,meta:e.meta}},addCellMeta(e,t){e.meta=Jt(e.meta,t)},addTableMeta(e,t){e.meta=Jt(e.meta,t)},removeTableMeta(e,t){e.meta=ma(e.meta,[t])},setCellVerticalAlign(e,t){e.verticalTextAlign=t},setCellHorizontalAlign(e,t){let o=q(e.content);o&&(o.textAlign=t)}};var Ge=class e{static createCellSelection(t){return{type:"cell",cellKey:t.cellKey,rowKey:t.rowKey,colKey:t.colKey}}static createRowSelection(t){return{type:"row",rowKey:t.rowKey}}static createColumnSelection(t){return{type:"column",colKey:t.columnKey}}static createTableSelection(){return{type:"table"}}static isCellSelected(t){return t.customSelection&&t.customSelection.type==="cell"}static isColumnSelected(t){return t.customSelection&&t.customSelection.type==="column"}static isRowSelected(t){return t.customSelection&&t.customSelection.type==="row"}static isTableSelected(t){return t.customSelection&&t.customSelection.type==="table"}static isPartOfTableSelected(t){return e.isRowSelected(t)||e.isColumnSelected(t)||e.isCellSelected(t)}};var Cb="video",kt={create(e){let t=e.key||M();return{key:t,type:g.VIDEO,src:e.src,width:e.width||0,height:e.height||0,isLoading:e.isLoading||!1,alignment:e.alignment||"inner",posterSrc:e.posterSrc,paragraph:e.paragraph||w.create({key:t,textAlign:"center"}),designSettings:e.designSettings}},changeAlignment(e,t){e.alignment=t},changePoster(e,t){e.posterSrc=t||void 0},clone(e){let t=M(),o=M();return{...e,key:t,paragraph:{...e.paragraph,key:o}}},toVideoBlock(e){return e&&e.type===g.VIDEO?e:null},getBlockType(e){return Cb}};var Ua=class{static create(t){return{captionSelected:t}}static isBlockSelection(t){return t.customSelection&&t.customSelection.captionSelected===!1}static isTextSelection(t){return t.customSelection&&!!t.customSelection.captionSelected}};function Sb(e,t){let o=d(t.customSelection),r=ae.getCollagedImage(e,o.collageSelectedItemKey);return r||null}function _b(e,t){let o=t.customSelection,r=E.getCell(e,o.rowKey,o.colKey),n=q(r.content);return n?Ha.create({...n,tableKey:e.key,colKey:o.colKey,rowKey:o.rowKey,cellKey:r.key}):null}function kb(e,t){let o=t.customSelection,r=G.getCardParagraph(e,o.cardKey,o.cardSide);return r||null}function Ht(e,t){let o=q(e);if(o)return o;let r=gt.toMediaBlock(e);if(r)return r;let n=Vt.toNoteBlock(e);if(n)return n;let i=ge.toDividerBlock(e);if(i&&i.dividerType==="line-with-text"&&t&&vn.isTextSelection(t))return i.paragraph;let s=Re.toContinueBlock(e);if(s&&t&&Bn.isTextSelection(t))return s.paragraph;let a=Rt.toCodeBlock(e);if(a&&t&&kn.isTextSelection(t))return a.paragraph;let c=kt.toVideoBlock(e);if(c)return c.paragraph;let l=ae.toCollageBlock(e);if(l&&t&&t.customSelection&&t.customSelection.collageItemCaptionSelected)return Sb(l,t);let m=E.toTableBlock(e);if(m&&t&&Ge.isCellSelected(t))return _b(m,t);let u=G.toFlipCardsBlock(e);return u&&t&&or.isCardTextSelection(t)?kb(u,t):null}function qu(e){return xb(e)||Bb(e)}function xb({contentState:e,selection:t}){let{startKey:o,customSelection:r}=t;return!!gt.toMediaBlock(e.blockMap.blocks[o])&&!!r&&r.captionSelected}function Bb({contentState:e,selection:t}){let{startKey:o,customSelection:r}=t;return!!ae.toCollageBlock(e.blockMap.blocks[o])&&!!r&&r.collageItemCaptionSelected}var vg={create(e){return{...w.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),dividerBlockKey:e.dividerBlockKey,paragraphStyle:e.paragraphStyle,meta:e.meta}},toDividerParagraph(e){return e&&e.type===g.PARAGRAPH&&e.dividerBlockKey?e:null}};var Tg={create(e){return{...w.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),flipCardsBlockKey:e.flipCardsBlockKey,cardKey:e.cardKey,cardSide:e.cardSide,meta:e.meta||[]}},toFlipCardParagraph(e){if(e&&e.type===g.PARAGRAPH){let t=e;if(t.flipCardsBlockKey&&t.cardKey&&t.cardSide&&t.meta)return e}return null}};var Wa=class{static create(t){return{captionSelected:t}}};var wg={create(e){return{...w.create({key:e.key,characters:e.characters,viewType:e.viewType,textAlign:e.textAlign,isOrderedListFirstItem:e.isOrderedListFirstItem}),videoBlockKey:e.videoBlockKey}},toVideoParagraph(e){return e&&e.type===g.PARAGRAPH&&e.videoBlockKey?e:null}};var K={createBlocks(e){let t={order:[],blocks:{}};for(let o of e)t.order.push(o.key),t.blocks[o.key]=o;return t},cloneBlock(e){let t=ae.toCollageBlock(e);if(t)return ae.clone(t);let o=E.toTableBlock(e);if(o)return E.cloneTable(o);let r=G.toFlipCardsBlock(e);if(r)return G.clone(r);let n=ge.toDividerBlock(e);if(n)return ge.clone(n);let i=Re.toContinueBlock(e);if(i)return Re.clone(i);let s=Rt.toCodeBlock(e);if(s)return Rt.clone(s);let a=kt.toVideoBlock(e);if(a)return kt.clone(a);let c=tr.toSnippetBlock(e);if(c)return tr.clone(c);let l=at.toQuizBlock(e);if(l)return at.clone({...l,isLoading:!0});let m=ie.toLayoutBlock(e);return m?ie.clone(m):{...e,designSettings:e.designSettings&&Et(e.designSettings),key:M()}},replaceBlocksFragment(e,t,o,r=[]){let n=e.order.indexOf(t),i=e.order.indexOf(o);if(n<0||i<0){R.warn("incorrect block keys");return}let s=[...e.order],a=s.splice(n,i-n+1);for(let l of a)delete e.blocks[l];let c=[];for(let l of r)c.push(l.key),e.blocks[l.key]=l;s.splice(n,0,...c),e.order.splice(0,e.order.length,...s)},deleteBlocks(e,t){e.blockMap.order=e.blockMap.order.filter(o=>!t.includes(o)),t.forEach(o=>{delete e.blockMap.blocks[o]})},replaceBlockWithFragment(e,t,o){return K.replaceBlocksFragment(e,t,t,o)},updateBlockWithKey(e,t,o){let r=e.blockMap.blocks[t];r&&tf(r,o)},updateCollageBlockWithKey(e,t,o){let r=ae.toCollageBlock(e.blockMap.blocks[t]);if(r){let n=ae.getCollagedImage(r,o.key);if(!n)return;for(let i of Object.keys(o))n[i]=o[i]}},removeCollagedImage(e,t,o){mg(e,t,o)},removeBlocks(e,t){for(let o of t)Va(e,o,w.create({key:o}))},insertBlocksAfter(e,t,o){let r=e.blockMap.order.indexOf(t.key)+1;e.blockMap.blocks={...e.blockMap.blocks,...o.blocks},e.blockMap.order.splice(r,0,...o.order)},isOneEmptyParagraph(e){let t=e.blockMap;if(e.blockMap.order.length===1){let o=t.blocks[t.order[0]];return w.isEmptyParagraph(o)}return!1},create(e=[w.create()]){return{blockMap:K.createBlocks(e)}},createFromBlockMap(e){return e},getDefaultSelection(e){let t=e.blockMap.order[0],o=e.blockMap.blocks[t],r=null;return gt.toMediaBlock(o)&&(r=Wa.create(!1)),D.createTextSelection({startKey:o.key,startOffset:0,endKey:o.key,endOffset:0,customSelection:r})},getAllBlocksFromSelection(e,t){let{startKey:o,endKey:r}=t,{order:n,blocks:i}=e.blockMap,s=n.indexOf(o),a=n.indexOf(r);return s<0||a<0?(R.warn("incorrect selection"),[]):n.slice(s,a+1).map(c=>i[c])},getAllTableCellsCharactersBlocks(e){let t=[];return e.rowsOrder.forEach(o=>{e.colsOrder.forEach(r=>{let n=E.getCell(e,o,r),i=n&&q(n.content);i&&t.push({paragraph:i,location:{tableKey:e.key,colKey:r,rowKey:o,cellKey:n.key},meta:n.meta})})}),t},getAllFlipCardsCharactersBlocks(e,t){let o=[];return e.cardsBlockMap.order.forEach(r=>{let n=G.getFlipCardSideData(e,r,t);n.type!=="image"&&o.push({paragraph:n.text,location:{flipCardsBlockKey:e.key,cardKey:r,cardSide:t},meta:n.meta})}),o},getTableRowCellsCharactersBlocks(e,t){let o=[];return e.colsOrder.forEach(r=>{let n=E.getCell(e,t,r),i=n&&q(n.content);i&&o.push({paragraph:i,location:{tableKey:e.key,colKey:r,rowKey:t,cellKey:n.key},meta:n.meta})}),o},getTableColumnCellsCharactersBlocks(e,t){let o=[];return e.rowsOrder.forEach(r=>{let n=E.getCell(e,r,t),i=n&&q(n.content);i&&o.push({paragraph:i,location:{tableKey:e.key,colKey:t,rowKey:r,cellKey:n.key},meta:n.meta})}),o},getSelectedTableCharactersBlocks(e,t){if(Ge.isCellSelected(t)){let o=t.customSelection,r=E.getCell(e,o.rowKey,o.colKey);return[{paragraph:d(q(r.content)),location:{tableKey:e.key,colKey:o.colKey,rowKey:o.rowKey,cellKey:r.key},meta:r.meta}]}if(Ge.isRowSelected(t)){let{rowKey:o}=t.customSelection;return K.getTableRowCellsCharactersBlocks(e,o)}if(Ge.isColumnSelected(t)){let{colKey:o}=t.customSelection;return K.getTableColumnCellsCharactersBlocks(e,o)}return K.getAllTableCellsCharactersBlocks(e)},getSelectedFlipCardsParagraphBlocks(e,t){if(or.isCardTextSelection(t)){let r=t.customSelection,n=G.getFlipCardSideData(e,r.cardKey,r.cardSide);if(n.type!=="image")return[{paragraph:n.text,location:{flipCardsBlockKey:e.key,cardKey:r.cardKey,cardSide:r.cardSide},meta:n.meta}]}let o=Oa(e.key);return o?K.getAllFlipCardsCharactersBlocks(e,o):[]},getSelectedLayoutCharactersBlocks(e){return K._getBlocksFromLayoutFilter(e,t=>this.convertLayoutBlockToCharactersBlock(t,!0))},getSelectedLayoutParagraphBlocks(e){return K._getBlocksFromLayoutFilter(e,t=>this.convertLayoutBlockToCharactersBlock(t,!1))},_getBlocksFromLayoutFilter(e,t){return ie.getAllBlocks(e).map(t).reduce((o,r)=>r?[...o,...r]:o,[])},convertLayoutBlockToCharactersBlock(e,t){let o=q(e);if(o)return[o];let r=gt.toMediaBlock(e);if(r&&t)return[r];let n=Vt.toNoteBlock(e);if(n)return[n];let i=ge.toDividerBlock(e);if(i&&i.dividerType==="line-with-text")return[i.paragraph];let s=kt.toVideoBlock(e);if(s)return[s.paragraph];let a=ae.toCollageBlock(e);return a&&t?ae.getCaptionParagraphs(a):null},getContextContentState(e,t){if(t&&t.context){let o=D.getContextContentState(e,t);if(o)return o}return e},getBlockContextContentState(e,t){let o=D.createBlockSelection({context:t?{blockKey:t.contextKey,colKey:t.richtextKey}:void 0});return K.getContextContentState(e,o)},getCharactersBlockFromSelection(e,t){let o=K.getAllBlocksFromSelection(e,t).filter(n=>!!Ht(n,t)||!!ae.toCollageBlock(n)||!!E.toTableBlock(n)||!!G.toFlipCardsBlock(n)||!!ge.toDividerBlock(n)||!!ie.toLayoutBlock(n)||!!Rt.toCodeBlock(n)||!!Re.toContinueBlock(n)),r=[];for(let n=0;n<o.length;n++){let i=ae.toCollageBlock(o[n]);if(i&&qu({contentState:e,selection:t})){let y,_=t.customSelection.collageSelectedItemKey,C=ae.getCollagedImage(i,_);C&&(y=Ht(C)),r.push(y||o[n]);continue}if(i&&!qu({contentState:e,selection:t})){i.images.forEach(y=>{let _=d(Ht(y));r.push(_)});continue}let s=gt.toMediaBlock(o[n]);if(s){let y=d(Ht(s));r.push(y);continue}let a=Vt.toNoteBlock(o[n]);if(a){let y=d(Ht(a));r.push(y);continue}let c=ge.toDividerBlock(o[n]);if(c){c.dividerType==="line-with-text"&&r.push(vg.create({...c.paragraph,dividerBlockKey:c.key,paragraphStyle:c.paragraphStyle,meta:c.meta}));continue}let l=Re.toContinueBlock(o[n]);if(l){r.push(kg.create({...l.paragraph,continueBlockKey:l.key}));continue}let m=Rt.toCodeBlock(o[n]);if(m){r.push(_g.create({...m.paragraph,codeBlockKey:m.key}));continue}let u=kt.toVideoBlock(o[n]);if(u){r.push(wg.create({...u.paragraph,videoBlockKey:u.key}));continue}let p=E.toTableBlock(o[n]);if(p){let _=this.getSelectedTableCharactersBlocks(p,t).map(C=>Ha.create({...C.paragraph,...C.location,meta:C.meta}));r.push(..._);continue}let S=ie.toLayoutBlock(o[n]);if(S){let y=this.getSelectedLayoutCharactersBlocks(S);y.length&&r.push(...y);continue}let b=G.toFlipCardsBlock(o[n]);if(b){let _=this.getSelectedFlipCardsParagraphBlocks(b,t).map(C=>Tg.create({...C.paragraph,...C.location,meta:C.meta}));r.push(..._);continue}r.push(o[n])}return r},getParagraphBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!q(o))},getMediaBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!gt.toMediaBlock(o))},getCollageBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!ae.toCollageBlock(o))},getTableBlockFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!E.toTableBlock(o))},getAttachmentBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!Do.toAttachmentBlock(o))},getNoteBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!Vt.toNoteBlock(o))},getTableBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!E.toTableBlock(o))},getFlipCardsBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!G.toFlipCardsBlock(o))},getDividerBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!ge.toDividerBlock(o))},getContinueBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!Re.toContinueBlock(o))},getVideoBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!kt.toVideoBlock(o))},getSnippetBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!tr.toSnippetBlock(o))},getCodeBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!Rt.toCodeBlock(o))},getLayoutBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>!!ie.toLayoutBlock(o))},getParagraphsFromSelection(e,t){let o=K.getAllBlocksFromSelection(e,t),r=[];return o.forEach(n=>{let i=q(n);if(i){r.push({paragraph:i,parentBlockType:"none"});return}let s=E.toTableBlock(n);if(s){let l=this.getSelectedTableCharactersBlocks(s,t).map(m=>({paragraph:m.paragraph,parentBlockType:"table"}));r.push(...l)}let a=G.toFlipCardsBlock(n);if(a){let l=this.getSelectedFlipCardsParagraphBlocks(a,t).map(m=>({paragraph:m.paragraph,parentBlockType:"flip-card"}));r.push(...l)}let c=ie.toLayoutBlock(n);if(c){let l=this.getSelectedLayoutParagraphBlocks(c).map(m=>({paragraph:m,parentBlockType:"layout"}));r.push(...l)}}),r},getConvertableBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(o=>Cg(o))},getBlockBefore(e,t,o=void 0){let r=o&&o.colKey?{contextKey:o.blockKey,richtextKey:o.colKey}:null,{order:n,blocks:i}=r?K.getBlockContextContentState(e,r).blockMap:e.blockMap,s=n.indexOf(t);if(s===0&&o)return K.getBlockInBeforeContext(e,o);if(s<0)return R.warn("incorrect key"),{blockBefore:null};if(s===0)return{blockBefore:null};let a=n[s-1];return{blockBefore:i[a],newContext:o}},getBlockAfter(e,t,o=void 0){let r=o&&o.colKey?{contextKey:o.blockKey,richtextKey:o.colKey}:null,{order:n,blocks:i}=r?K.getBlockContextContentState(e,r).blockMap:e.blockMap,s=n.indexOf(t);if(s===n.length-1&&o)return K.getBlockInAfterContext(e,o);if(s<0)return R.warn("incorrect key"),{blockAfter:null};if(s===n.length-1)return{blockAfter:null};let a=n[s+1];return{blockAfter:i[a],newContext:o}},getBlockInBeforeContext(e,t){if(!t.colKey)return{blockBefore:null};let o=e.blockMap.blocks[t.blockKey],r=ie.toLayoutBlock(o);if(r){let n=ie.getBeforeColumnBlock(r,t.colKey);return n?{blockBefore:n.block,newContext:{...t,colKey:n.colKey}}:K.getBlockBefore(e,t.blockKey)}return{blockBefore:null}},getBlockInAfterContext(e,t){if(!t.colKey)return{blockAfter:null};let o=e.blockMap.blocks[t.blockKey],r=ie.toLayoutBlock(o);if(r){let n=ie.getAfterColumnBlock(r,t.colKey);return n?{blockAfter:n.block,newContext:{...t,colKey:n.colKey}}:K.getBlockAfter(e,t.blockKey)}return{blockAfter:null}},getQuizBlocksFromSelection(e,t){return K.getAllBlocksFromSelection(e,t).filter(n=>!!at.toQuizBlock(n))},atLeastOneNotEmptyCharactersBlockSelected(e,t){return K.getCharactersBlockFromSelection(e,t).some(o=>o.characters.length>0)},convertBrowserToModelSelection(e,t){let o=e.blockMap.blocks,r=Ht(o[t.startKey],t),n=r?w.convertBrowserToModelOffset(r,t.startOffset):t.startOffset,i=Ht(e.blockMap.blocks[t.endKey],t),s=i?w.convertBrowserToModelOffset(i,t.endOffset):t.endOffset;return{...t,startOffset:n,endOffset:s}},convertModelToBrowserSelection(e,t){if(D.isBlockSelection(t))return D.createTextSelection({startKey:t.startKey,endKey:t.endKey,customSelection:t.customSelection});let o=Ht(e.blockMap.blocks[t.startKey],t),r=o?w.convertModelToBrowserOffset(o,t.startOffset):t.startOffset,n=Ht(e.blockMap.blocks[t.endKey],t),i=n?w.convertModelToBrowserOffset(n,t.endOffset):t.endOffset;return{...t,startOffset:r,endOffset:i}},isValidSelection(e,t){return[t.startKey,t.endKey].every(o=>be.hasBlock(e.blockMap,o))},getSelectedBlockKeys(e,t){let o=e.blockMap.order,r=o.findIndex(i=>i===t.startKey),n=o.findIndex(i=>i===t.endKey);return o.slice(r,n+1)},getSelectedBlockKeysWithContext(e,t){if(!D.hasContext(t))return this.getSelectedBlockKeys(e,t);if(D.isContextBlockSelected(t))return[t.startKey];let o=D.getContextContentState(e,t);return o?this.getSelectedBlockKeys(o,t):(R.warn("Invalid context in selection"),[])},isUrlSelected(e,t){if(t.startKey!==t.endKey)return!1;let o=e.blockMap.blocks[t.startKey],r=q(o);if(!r)return!1;let n=w.getParagraphText(r);return D.isTextSelection(t)&&(n=n.slice(t.startOffset,t.endOffset)),Sg(n)}};var Tn=class e{static _getAllFlipCardsBlocksFromSelection(t,o){return ln(K.getAllBlocksFromSelection(t,o).map(r=>G.toFlipCardsBlock(r)))}static _getFlipCardsBlock(t,o){let r=t.blockMap.blocks[o];return r?G.toFlipCardsBlock(r):null}static _getActiveSide(t){return d(Oa(t))}static getFirstCard(t){return d($e(t.cardsBlockMap))}static changeSideContentType(t,o,r){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(n=>{se(n.cardsBlockMap,i=>{G.changeFlipCardContentType(i,e._getActiveSide(n.key),r)})}),{selection:o}}static changeRowMaxCardsCount(t,o,r){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(n=>{G.changeRowMaxCardsCount(n,r)}),{selection:o}}static changeBlockLayout(t,o,r){let n=e._getFlipCardsBlock(t,o);return n?(G.changeLayout(n,r),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static addCard(t,o){let r=e._getFlipCardsBlock(t,o);return r?(G.addFlipCard(r),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static changeSideVerticalAlignment(t,o,r){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(n=>{n.cardsBlockMap.order.forEach(i=>G.changeCardSideVerticalAlignment(n,i,e._getActiveSide(n.key),r))}),{selection:o}}static changeCardTextVerticalAlignment(t,o,r){let{startKey:n}=o,{cardKey:i,cardSide:s}=o.customSelection,a=e._getFlipCardsBlock(t,n);return a?(G.changeCardSideVerticalAlignment(a,i,s,r),{selection:o}):{selection:D.createTextSelection()}}static removeCard(t,o,r){let n=e._getFlipCardsBlock(t,o);return n?(G.removeFlipCard(n,r),G.getFlipCardsCount(n)?{selection:D.createFlipCardsBlockSelection(o)}:(vo(t.blockMap,o),{selection:null})):{selection:D.createTextSelection()}}static duplicateCard(t,o,r){let n=e._getFlipCardsBlock(t,o);return n?(G.duplicateCard(n,r),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static moveCard({contentState:t,blockKey:o,cardKey:r,toCardKey:n,insertBefore:i}){let s=e._getFlipCardsBlock(t,o);return s?(G.moveFlipCard({flipCardsBlock:s,cardKey:r,toCardKey:n,insertBefore:i}),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static changeCardImage(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(G.changeFlipCardBackgroundImage({block:i,cardKey:r.key,sideType:r.sideType,image:n}),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static changeCardsSideBackground(t,o,r){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(n=>{se(n.cardsBlockMap,i=>{G.changeFlipCardBackgroundColor(n,i.key,e._getActiveSide(n.key),r)})}),{selection:o}}static changeCardBackgroundImage(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(G.changeFlipCardBackgroundImage({block:i,cardKey:r.key,sideType:r.sideType,image:n}),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static changeCardsSideBackgroundImage(t,o,r){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(n=>{se(n.cardsBlockMap,i=>{G.changeFlipCardBackgroundImage({block:n,cardKey:i.key,sideType:e._getActiveSide(n.key),image:r})})}),{selection:o}}static changeCardBackgroundColor(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(G.changeFlipCardBackgroundColor(i,r.key,r.sideType,n),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static changeCardBackgroundImageOverlay(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(G.changeCardImageOverlay({block:i,cardKey:r.key,sideType:r.sideType,overlay:n}),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static changeCardsSideBackgroundImageOverlay(t,o,r){return e._getAllFlipCardsBlocksFromSelection(t,o).forEach(n=>{se(n.cardsBlockMap,i=>{G.changeCardImageOverlay({block:n,cardKey:i.key,sideType:e._getActiveSide(n.key),overlay:r})})}),{selection:o}}static changeCardImageOverlay(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(G.changeFlipCardBackgroundImageOverlay({block:i,cardKey:r.key,sideType:r.sideType,overlay:n}),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static cropCardImage(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(G.cropFlipCardImage({block:i,cardKey:r.key,sideType:r.sideType,crop:n}),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}static cropCardBackgroundImage(t,o,r,n){let i=e._getFlipCardsBlock(t,o);return i?(G.cropFlipCardBackgroundImage({block:i,cardKey:r.key,sideType:r.sideType,crop:n}),{selection:D.createFlipCardsBlockSelection(o)}):{selection:D.createTextSelection()}}};var zi={defaultMaxCardsInRow:3,defaultCardsLayout:"outer",defaultActiveSide:"front",maxCardsInRowInnerLayout:3,maxCardsInRowOuterLayout:4,maxCardsInRowFullLayout:5},Qi={text:{frontSide:{getBackgroundColor:Er,opacity:1},backSide:{getBackgroundColor:()=>st.blackDefault,opacity:.1},defaultOverlayColor:{color:sa,opacity:.3}},imageWithText:{frontSide:{getBackgroundColor:Er,opacity:1},backSide:{getBackgroundColor:()=>st.blackDefault,opacity:.1},defaultOverlayColor:{color:pt,opacity:.3}}},ju={front:re.create({style:ve.create([{name:"fontColor",color:st.whiteDefault},{name:"fontSize",size:"auto"},{name:"bold"}])}),back:re.create({style:ve.create([{name:"fontColor",color:st.darkDefault},{name:"fontSize",size:"auto"}])})};function Xu(e={}){return{type:"image",image:e.image?Ou(e.image):null}}function Pg(e){if(!e)return;let t=Ue(e,"charactersMeta");if(t&&t.name==="charactersMeta")return t.data}function Og(e,t){return[{name:"charactersMeta",data:t||ju[e]}]}function Hi(e){let t=e.characterMeta||Pg(e.meta),o=H(e.sideType,{front:Fg(t),back:Kg(t)});return{type:"text",background:e.background||Vg(e.sideType),text:w.create({key:e.paragraphKey,textAlign:e.textAlign||"center",characters:e.characters||o}),verticalTextAlign:e.verticalTextAlign||"middle",meta:e.meta||Og(e.sideType,t)}}function Zu(e){let t=H(e.sideType,{front:Qi.imageWithText.frontSide,back:Qi.imageWithText.backSide}),o=e.characterMeta||Pg(e.meta),r=H(e.sideType,{front:Fg(o),back:Kg(o)});return{type:"imageWithText",background:e.background||{type:"color",color:t.getBackgroundColor(),opacity:t.opacity},image:e.image?Ou(e.image):null,text:w.create({key:e.paragraphKey,textAlign:e.textAlign||"center",characters:e.characters||r}),verticalTextAlign:e.verticalTextAlign||"middle",meta:e.meta||Og("front",o)}}function Vg(e){let t=H(e,{front:Qi.text.frontSide,back:Qi.text.backSide});return{type:"color",color:t.getBackgroundColor(),opacity:t.opacity}}function Fg(e){let t=e||ju.front;return w.createCharacters(k("Roll.Editor.FlipCardsBlock.DefaultText.FrontTextSide"),t)}function Kg(e){let t=e||ju.back;return w.createCharacters(k("Roll.Editor.FlipCardsBlock.DefaultText.BackTextSide"),t)}function Gu(e){let{contentType:t}=e;switch(t){case"image":return Xu(e);case"text":return Hi(e);case"imageWithText":return Zu(e);default:throw I(t),new Error(`Unknown card content type: ${t}`)}}function bb(e,t){return e.cardsBlockMap.blocks[t]||null}function qa(e,t,o){let r=bb(e,t);if(!r)return null;switch(o){case"front":return r.frontSide;case"back":return r.backSide;default:throw I(o),Error()}}function wn(e,t,o){switch(t){case"front":e.frontSide=o;break;case"back":e.backSide=o;break}}function vb({cardData:e,sideData:t,sideType:o,contentType:r}){r==="image"&&wn(e,o,Xu({image:t.image})),r==="text"&&wn(e,o,Hi({verticalTextAlign:t.verticalTextAlign,characters:t.text.characters,textAlign:t.text.textAlign,background:t.background,meta:t.meta,sideType:o}))}function Tb({cardData:e,sideData:t,sideType:o,contentType:r}){r==="imageWithText"&&wn(e,o,Zu({image:t.image,sideType:o})),r==="text"&&wn(e,o,Hi({sideType:o}))}function wb({cardData:e,sideData:t,sideType:o,contentType:r}){r==="image"&&wn(e,o,Xu()),r==="imageWithText"&&wn(e,o,Zu({verticalTextAlign:t.verticalTextAlign,characters:t.text.characters,textAlign:t.text.textAlign,background:t.background&&t.background.type==="color"?t.background:null,meta:t.meta,sideType:o}))}function Dg({block:e,cardKey:t,sideType:o,overlay:r}){let n=qa(e,t,o);n&&((n.type==="image"||n.type==="imageWithText")&&n.image&&(n.image.overlay=r),n.type==="text"&&n.background.type==="image"&&(n.background.overlay=r))}function Eg({block:e,cardKey:t,sideType:o,image:r}){var i;let n=qa(e,t,o);n&&((n.type==="image"||n.type==="imageWithText")&&(n.image=r?{...r,overlay:(i=n.image)==null?void 0:i.overlay}:null),n.type==="text"&&(n.background.type==="image"&&!r&&(n.background=Vg(o)),n.background.type==="image"&&r&&(n.background.image=r),n.background.type==="color"&&r&&(n.background={type:"image",image:r,overlay:Qi.text.defaultOverlayColor})))}function Rg({block:e,cardKey:t,sideType:o,crop:r}){let n=qa(e,t,o);n&&(n.type!=="text"?n.image&&(n.image.crop=r):n.background.type==="image"&&(n.background.image.crop=r))}function Yu(){return{key:M(),frontSide:Hi({sideType:"front"}),backSide:Hi({sideType:"back"})}}function Db(){return Fe([Yu(),Yu(),Yu()],e=>e.key)}function Mg(e){let t=Nt(e);switch(e.type){case"image":return t;case"imageWithText":case"text":return{...t,text:{...e.text,key:M()}}}}function Lg(e){return{key:M(),frontSide:Mg(e.frontSide),backSide:Mg(e.backSide)}}function Eb(e){let t={blocks:{},order:[]};return se(e.cardsBlockMap,o=>{let r=Lg(o);Tu(t,r)}),t}function Ig(e){switch(e.contentType){case"image":return Gu({contentType:"image"});case"text":return Gu({contentType:"text",sideType:e.sideType,meta:e.meta,verticalTextAlign:e.verticalTextAlign,textAlign:e.horizontalTextAlign,background:e.background,characterMeta:e.characterMeta});case"imageWithText":return Gu({contentType:"imageWithText",sideType:e.sideType,meta:e.meta,verticalTextAlign:e.verticalTextAlign,textAlign:e.horizontalTextAlign,background:e.background.type==="color"?e.background:void 0,characterMeta:e.characterMeta})}}function Ag(e,t){let{frontSideType:o,backSideType:r}=G.getFlipCardsSideTypes(e),n=H(t,{front:o,back:r});if(n==="image")return Ig({contentType:n});let i=d(G.getFlipCardsStyles(e,t));return Ig({contentType:n,sideType:t,horizontalTextAlign:i.horizontalTextAlign,verticalTextAlign:i.verticalTextAlign,background:i.background,meta:i.meta,characterMeta:re.create({style:i.styles})})}var G={create(e={}){return{type:g.FLIP_CARD,key:e.key||M(),cardsBlockMap:e.cardsBlockMap||Db(),maxCardsInRow:e.maxCardsInRow||zi.defaultMaxCardsInRow,cardsLayout:e.cardsLayout||zi.defaultCardsLayout,designSettings:e.designSettings}},clone(e){return{type:g.FLIP_CARD,key:M(),cardsLayout:e.cardsLayout,maxCardsInRow:e.maxCardsInRow,cardsBlockMap:Eb(e),designSettings:e.designSettings&&Et(e.designSettings)}},getCardParagraph(e,t,o){let r=G.getFlipCardSideData(e,t,o);return r.type!=="image"?r.text:null},getCardData(e,t){return e.cardsBlockMap.blocks[t]||null},changeCardSideVerticalAlignment(e,t,o,r){let n=G.getFlipCardSideData(e,t,o);n.type!=="image"&&(n.verticalTextAlign=r)},addFlipCard(e){let t=Ag(e,"front"),o=Ag(e,"back"),r={key:M(),frontSide:t,backSide:o};Tu(e.cardsBlockMap,r)},duplicateCard(e,t){let o=e.cardsBlockMap.blocks[t],r=Lg(o);eh(e.cardsBlockMap,t,r)},removeFlipCard(e,t){vo(e.cardsBlockMap,t);let o=Zt(e.cardsBlockMap);o<e.maxCardsInRow&&G.changeRowMaxCardsCount(e,o)},moveFlipCard({cardKey:e,insertBefore:t,flipCardsBlock:o,toCardKey:r}){let n=o.cardsBlockMap.order,i=n.indexOf(e);n.splice(i,1);let s=n.indexOf(r),a=t?s:s+1;n.splice(a,0,e)},changeFlipCardImage(e){Eg(e)},changeFlipCardBackgroundImage(e){Eg(e)},cropFlipCardImage(e){Rg(e)},cropFlipCardBackgroundImage(e){Rg(e)},getFlipCardSideData(e,t,o){let r=G.getCardData(e,t);return H(o,{front:r.frontSide,back:r.backSide})},getFlipCardsSideTypes(e){let t=e.cardsBlockMap.order[0],o=e.cardsBlockMap.blocks[t];return{frontSideType:o.frontSide.type,backSideType:o.backSide.type}},getFlipCardsSideType(e,t){let o=G.getFlipCardsSideTypes(e);return H(t,{front:o.frontSideType,back:o.backSideType})},getBlockType(e){return"flip-cards"},toFlipCardsBlock(e){return e&&e.type===g.FLIP_CARD?e:null},changeFlipCardBackgroundColor(e,t,o,{color:r,opacity:n}){let i=qa(e,t,o);i&&(i.type==="text"||i.type==="imageWithText")&&(i.background={type:"color",color:r,opacity:n})},changeFlipCardBackgroundImageOverlay(e){Dg(e)},changeCardImageOverlay(e){Dg(e)},changeFlipCardContentType(e,t,o){let r=H(t,{front:e.frontSide,back:e.backSide});r.type==="image"&&Tb({cardData:e,sideData:r,sideType:t,contentType:o}),r.type==="imageWithText"&&vb({cardData:e,sideData:r,sideType:t,contentType:o}),r.type==="text"&&wb({cardData:e,sideData:r,sideType:t,contentType:o})},changeRowMaxCardsCount(e,t){e.maxCardsInRow=t},changeLayout(e,t){e.cardsLayout=t;let o=H(t,{inner:zi.maxCardsInRowInnerLayout,outer:zi.maxCardsInRowOuterLayout,"full-width":zi.maxCardsInRowFullLayout}),r=Zt(e.cardsBlockMap),n=Math.min(r,o);n<e.maxCardsInRow&&G.changeRowMaxCardsCount(e,n)},getFlipCardsCount(e){return Zt(e.cardsBlockMap)},addFlipCardSideMeta(e,t){e.type!=="image"&&(e.meta=Jt(e.meta,t))},getFlipCardsStyles(e,t){var s;let o=Tn.getFirstCard(e),r=H(t,{front:o.frontSide,back:o.backSide});if(r.type==="image")return null;let n,i=r.text.characters;return i.length===0?n=((s=Pa(r))==null?void 0:s.style)||[]:n=i[0].meta.style,{styles:n,verticalTextAlign:r.verticalTextAlign,horizontalTextAlign:r.text.textAlign,background:r.background,meta:r.meta}}};var Ga=class{static create(t={}){return{noteTextSelected:t.noteTextSelected||!1}}static textSelected(t){return t.customSelection&&t.customSelection.noteTextSelected}};var D={isTextSelection(e){return(e==null?void 0:e.type)==="text"},isBlockSelection(e){return e.type==="block"},isCollapsed(e){return D.isTextSelection(e)?e.startKey===e.endKey&&e.startOffset===e.endOffset:e.startKey===e.endKey},isOneBlocKOrTextSelected(e){return e.startKey===e.endKey},isOneBlockSelected(e){return D.isBlockSelection(e)&&D.isOneBlocKOrTextSelected(e)},isOneTextBlockSelected(e){return D.isTextSelection(e)&&D.isOneBlocKOrTextSelected(e)},isEqual(e,t){return e===t?!0:!e||!t?!1:JSON.stringify(e)===JSON.stringify(t)},isContextBlockSelected(e){var t;return!D.hasContext(e)||!D.isCollapsed(e)?!1:e.startKey===((t=e.context)==null?void 0:t.blockKey)},hasContext(e){return!!e&&!!e.context},hasContextKey(e){return D.hasContext(e)&&!!(e!=null&&e.context)},createContext(e,t){return{blockKey:e,colKey:t}},getBlockFromContext(e,t){let o=ie.toLayoutBlock(e);if(o&&t&&t.context&&t.context.colKey){let{colKey:r}=t.context;return ie.getBlock(o,r,t.startKey)}return null},getContextContentState(e,t){if(!t||!t.context)return null;let{blockKey:o,colKey:r}=t.context,n=e.blockMap.blocks[o],i=ie.toLayoutBlock(n);return i&&t.context&&r?ie.getColumn(i,r):null},getSelectionContextFromEditorState(e){let t=e.selection();return t&&t.context||void 0},fromBlockToText(e,t){return!!(e!=null&&e.customSelection)&&(t==null?void 0:t.customSelection)===null||(e==null?void 0:e.type)==="block"&&(t==null?void 0:t.type)==="text"},fromTextToBlock(e,t){return!(e!=null&&e.customSelection)&&!!(t!=null&&t.customSelection)||(e==null?void 0:e.type)==="text"&&(t==null?void 0:t.type)==="block"},fromBlockToBlock(e,t){return(e==null?void 0:e.startKey)!==(t==null?void 0:t.startKey)&&!!(e!=null&&e.customSelection)&&!!(t!=null&&t.customSelection)},isChangeContext(e,t){var o,r;return((o=e==null?void 0:e.context)==null?void 0:o.blockKey)!==((r=t==null?void 0:t.context)==null?void 0:r.blockKey)},createTextSelection(e={}){return{type:"text",startKey:e.startKey||"",startOffset:e.startOffset||0,endKey:e.endKey||"",endOffset:e.endOffset||0,isBackward:e.isBackward||!1,customSelection:e.customSelection||null,context:e.context||void 0}},createCollapsed({key:e,offset:t,customSelection:o,context:r}){return D.createTextSelection({startKey:e,startOffset:t,endKey:e,endOffset:t,customSelection:o,context:r})},createBlockSelection(e){return{type:"block",startKey:e.startKey||"",endKey:e.endKey||"",customSelection:e.customSelection||null,context:e.context||void 0}},createCollapsedTextSelection({key:e,offset:t,customSelection:o}){return D.createTextSelection({startKey:e,startOffset:t,endKey:e,endOffset:t,customSelection:o})},createCollapsedTextSelectionNoContext(e={}){return D.createTextSelection({...e,context:void 0})},createCollapsedBlockSelection({key:e,customSelection:t,context:o}){return D.createBlockSelection({startKey:e,endKey:e,customSelection:t,context:o})},createAttachmentBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,context:t})},createQuizBlockSelection(e){return D.createCollapsedBlockSelection({key:e})},createParagraphBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,customSelection:Qa.create({blockSelected:!0}),context:t})},createMediaBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,customSelection:{captionSelected:!1},context:t})},createCollageBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,customSelection:Aa.create({}),context:t})},createNoteBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,customSelection:Ga.create(),context:t})},createTableBlockSelection(e){return D.createCollapsedBlockSelection({key:e,customSelection:Ge.createTableSelection()})},createTableRowSelection(e,t){return D.createCollapsedBlockSelection({key:e,customSelection:Ge.createRowSelection({rowKey:t})})},createTableColumnSelection(e,t){return D.createCollapsedBlockSelection({key:e,customSelection:Ge.createColumnSelection({columnKey:t})})},createFlipCardsBlockSelection(e){return D.createCollapsedBlockSelection({key:e,customSelection:or.createBlockSelection()})},createDividerBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,customSelection:vn.create(!1),context:t})},createContinueBlockSelection(e){return D.createCollapsedBlockSelection({key:e,customSelection:Bn.create(!1)})},createCodeBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,customSelection:kn.create(!1),context:t})},createVideoBlockSelection(e,t=void 0){return D.createCollapsedBlockSelection({key:e,customSelection:Ua.create(!1),context:t})},createSnippetBlockSelection(e,t){return D.createCollapsedBlockSelection({key:e,context:t})},createLayoutBlockSelection(e,t=void 0){return D.createBlockSelection({startKey:e,endKey:e,context:t?{blockKey:e,colKey:t}:void 0})},createSelectionFromBlockData(e,t){return E.toTableBlock(e)?D.createTableBlockSelection(e.key):G.toFlipCardsBlock(e)?D.createFlipCardsBlockSelection(e.key):ge.toDividerBlock(e)?D.createDividerBlockSelection(e.key,t):Re.toContinueBlock(e)?D.createContinueBlockSelection(e.key):ae.toCollageBlock(e)?D.createCollageBlockSelection(e.key,t):gt.toMediaBlock(e)?D.createMediaBlockSelection(e.key,t):kt.toVideoBlock(e)?D.createVideoBlockSelection(e.key,t):Vt.toNoteBlock(e)?D.createNoteBlockSelection(e.key,t):Do.toAttachmentBlock(e)?D.createAttachmentBlockSelection(e.key):at.toQuizBlock(e)?D.createQuizBlockSelection(e.key):D.createCollapsed({key:e.key,offset:0,context:t})}};var $g={create({title:e,subtitle:t}){return{title:e,subtitle:t}}};function mo(e,t,o){if(Zm(e))return e.map(n=>mo(n,t,o));let r=_n(t);if(r)return vr(e,n=>mo(n,d(r),o));if(Di(e)){let n={};return Ri(e,(i,s)=>{let{keyValue:a,newKeys:c}=_a(s,t,o);n[a]=mo(i,c,[...o,s])}),n}return e}function Ft(e,t,o){if(Zm(e))return e.map(n=>Ft(n,t,o));let r=_n(t);if(r)return vr(e,n=>Ft(n,d(r),o));if(Di(e)){let n={};return Ri(e,(i,s)=>{let{key:a,newKeys:c}=ka(s,t,o);n[a]=Ft(i,c,[...o,a])}),n}return e}function Rb(e,t){let o=t,r=[],n=e.path.map(i=>{let s=_n(o);if(s)return o=s,r.push(i),i;if(!Xt(i))return i;let{key:a,newKeys:c}=ka(i,o,r);return r.push(a),o=c,a});return{...e,path:n,value:Ft(e.value,o,r)}}function Ng(e,t){return e.map(o=>Rb(o,t))}var Kt={key:"k",type:"t",characters:{_:"c",...Zo},noteType:"nT"},Ui={...Kt,customIconColor:{_:"cIC",color:"c",opacity:"o"},customBackgroundColor:{_:"cBC",color:"c",opacity:"o"}},ct={...Ui,...le},Dn={...ct,...he};var zg={name:"n",color:"c",opacity:"o"},Mb={...zg,data:{_:"md",...co}},Qg={key:"k",content:{_:"C",...me,...Jo},meta:{_:"m",...zg}},Hg={...Qg,verticalTextAlign:"vta",meta:{_:"m",...Mb}},Ug={...Hg,content:{_:"C",...Ke,...Cn}},Ju={...Ug,content:{_:"C",...nt,...Cn}},Ib={...Ju,content:{_:"C",...Le,...Cn}},Ab={...Ju,content:{_:"C",...Ne,...Ah}},Pb={colsMap:v({_:"cM",...Qg})},Ob={colsMap:v({_:"cM",...Hg})},Vb={colsMap:v({_:"cM",...Ug})},Fb={colsMap:v({_:"cM",...Ju})},Kb={colsMap:v({_:"cM",...Ib})},Lb={colsMap:v({_:"cM",...Ab})},Wi={...Ze,alignment:"a",colsOrder:"cO",rowsOrder:"rO",rowsMap:v({_:"rM",...Pb}),meta:{_:"m",name:"n"}},to={...Wi,rowsMap:v({_:"rM",...Ob})},Ir={...to,...le,rowsMap:v({_:"rM",...Vb})},ed={...Ir,rowsMap:v({_:"rM",...Fb})},qi={...ed,rowsMap:v({_:"rM",...Kb})},Ya={...qi,...he,rowsMap:v({_:"rM",...Lb})};var Wg={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Kt})}},$b={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Wg}},Nb={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Wg}},ja={intro:{_:"i",...$b},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...Nb})}},Xa=Ia;var qg={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Kt,...Wi})}},zb={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...qg}},Qb={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...qg}},En={intro:{_:"i",...zb},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...Qb})}},Gi=Xa;var Za=En,Ja={...Gi,main:{...Gi.main,longreadType:"lT"}};var td={type:"t",image:{_:"i",...Ru},text:{_:"rt",...me},verticalTextAlign:"vta",background:{_:"b",...Mu}},od={...td,meta:{_:"m",name:"n",data:{_:"md",...co}}},rd={...od,text:{_:"rt",...Ke}},nd={...rd,text:{_:"rt",...nt}},id={...nd,text:{_:"rt",...Le}},Gg={...id,text:{_:"rt",...Ne}},Rn={key:"k",frontSide:{_:"fs",...td},backSide:{_:"bs",...td}},Hb={...Rn,frontSide:{_:"fs",...od},backSide:{_:"bs",...od}},Ub={...Rn,frontSide:{_:"fs",...rd},backSide:{_:"bs",...rd}},Wb={...Rn,frontSide:{_:"fs",...nd},backSide:{_:"bs",...nd}},qb={...Rn,frontSide:{_:"fs",...id},backSide:{_:"bs",...id}},Gb={...Rn,frontSide:{_:"fs",...Gg},backSide:{_:"bs",...Gg}},ec={key:"k",type:"t",cardsBlockMap:{_:"cbm",order:{_:"o",length:"l"},blocks:v({_:"B",...Rn})},maxCardsInRow:"mcir",cardsLayout:"cl",background:{_:"b",...Mu}},Ut={...ec,cardsBlockMap:{...ec.cardsBlockMap,blocks:v({_:"B",...Hb})}},rr={...Ut,...le,cardsBlockMap:{...Ut.cardsBlockMap,blocks:v({_:"B",...Ub})}},Yi={...rr,cardsBlockMap:{...rr.cardsBlockMap,blocks:v({_:"B",...Wb})}},ji={...Yi,cardsBlockMap:{...Yi.cardsBlockMap,blocks:v({_:"B",...qb})}},tc={...ji,...he,cardsBlockMap:{...Yi.cardsBlockMap,blocks:v({_:"B",...Gb})}};var Yg={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Kt,...Wi,...ec})}},Yb={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Yg}},jb={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Yg}},oc={intro:{_:"i",...Yb},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...jb})}},rc=Ja;var jg={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Kt,...to,...Ut})}},Xb={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...jg}},Zb={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...jg}},Mn={intro:{_:"i",...Xb},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...Zb})}},nc=rc;var In=Mn,ic={...nc,advanced:{_:"a",direction:"d"}};var sc=In,ac=ic;var Ro={...Ze,alignment:"a",dividerType:"dT",dividerColor:{_:"dC",color:"c",opacity:"o"},style:"st",paragraph:{_:"p",...me},paragraphStyle:"pS",meta:{_:"m",name:"n",data:{_:"md",...co}}},Mo={...Ro,...le,paragraph:{_:"p",...Ke}},Xi={...Mo,paragraph:{_:"p",...nt}},Ar={...Xi,paragraph:{_:"p",...Le}},An={...Ar,...he,paragraph:{_:"p",...Ne}};var Xg={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Kt,...to,...Ut,...Ro})}},Jb={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Xg}},ev={key:"k",header:{_:"h",title:"t"},contentState:{_:"cs",...Xg}},Pn={intro:{_:"i",...Jb},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...ev})}},cc=ac;var tv={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Kt,...to,...Ut,...Ro})}},ov={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...tv}},On={...Pn,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...ov})}},lc=cc;var Zg={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Ui,...to,...Ut,...Ro})}},rv={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...Zg}},nv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...Zg}},mc={intro:{_:"i",...rv},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...nv})}},uc=lc;var Jg={...Ze,src:"s",width:"w",height:"h",alignment:"a",isLoading:"iL",posterSrc:"pSc",paragraph:{_:"p",...me}},Io={...le,src:"s",width:"w",height:"h",alignment:"a",isLoading:"iL",posterSrc:"pSc",paragraph:{_:"p",...Ke}},Zi={...Io,paragraph:{_:"p",...nt}},Pr={...Zi,paragraph:{_:"p",...Le}},Vn={...Pr,...he,paragraph:{_:"p",...Ne}};var ey={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...me,...Be,...xe,...De,...We,...Ui,...to,...Ut,...Ro,...Jg})}},iv={header:{_:"h",kicker:"k",title:"t",coverInfoState:{_:"c",src:"s",width:"w",height:"h",color:"c",opacity:"o",isBlob:"i"}},contentState:{_:"cs",...ey}},sv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...ey}},Fn={intro:{_:"i",...iv},chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...sv})}},dc=uc;var av={...le,paragraph:{_:"p",...Ke},continueColor:{_:"cC",color:"c",opacity:"o"},meta:{_:"m",name:"n",data:{_:"md",...co}}},sd={...av,paragraph:{_:"p",...nt}},Ji={...sd,paragraph:{_:"p",...Le}},es={...Ji,...he,paragraph:{_:"p",...Ne}},Kn=es;var ty={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ke,...ft,...Qt,...ht,...Mr,...ct,...Ir,...rr,...Mo,...Kn,...Io})}},cv={...On.intro,contentState:{_:"cs",...ty}},lv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...ty}},Or={...Fn,intro:cv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...lv})}},pc=dc;var xt={url:"u",title:"tl",description:"dsc",iconSrc:"icS",imageSrc:"imS",...le},Ln={...xt,...he};var oy={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ke,...ft,...Qt,...ht,...Mr,...ct,...Ir,...rr,...Mo,...Kn,...Io,...xt})}},mv={...Or.intro,contentState:{_:"cs",...oy}},uv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...oy}},Vr={...Or,intro:mv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...uv})}},fc=pc;var $n={...le,paragraph:{_:"p",...Le},language:"l",fontSize:"fz"},Nn={...he,paragraph:{_:"p",...Ne},language:"l",fontSize:"fz"};var ad={...le,alignment:"a",horizontalTextAlign:"hta",verticalBlockAlign:"vba",colsOrder:{_:"cO",length:"l"},colsMap:v({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ke,...ft,...ct,...Mo,...Io,...ht,...xt})}})},cd={...ad,colsMap:v({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...nt,...ft,...ct,...Xi,...Zi,...ht,...xt})}})},ts={...cd,colsMap:v({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Le,...ft,...ct,...Ar,...Pr,...ht,...xt,...$n})}})},hc={...ts,...he,layoutType:"lt",colsMap:v({_:"cM",blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ne,...yn,...Dn,...An,...Vn,...Sn,...Ln,...Nn})}})};var ry={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ke,...ft,...Qt,...ht,...Mr,...ct,...Ir,...rr,...Mo,...Kn,...Io,...xt,...ad})}},dv={...Vr.intro,contentState:{_:"cs",...ry}},pv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...ry}},Fr={...Vr,intro:dv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...pv})}},gc=fc;var ny={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...nt,...ft,...Qt,...ht,...ba,...ct,...ed,...Yi,...Xi,...sd,...Zi,...xt,...cd})}},fv={...Fr.intro,contentState:{_:"cs",...ny}},hv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...ny}},Kr={...Fr,intro:fv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...hv})}},yc=gc;var iy={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Le,...ft,...Qt,...ht,...Kh,...ct,...qi,...ji,...Ar,...Ji,...Pr,...xt,...$n,...ts})}},gv={...Kr.intro,contentState:{_:"cs",...iy}},yv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...iy}},Lr={...Kr,intro:gv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...yv})}},os=yc;var rs={src:"s",type:"t",width:"w",height:"h",title:"T",previewSrc:"p"};var sy={type:"t",answered:{_:"a",...it},correct:{_:"c",...it},incorrect:{_:"i",...it}};var ay={shuffleAnswers:"s"};var Cc={title:{_:"t",...it},message:{_:"m",...it},visibility:"v"};var Cv={id:"i",text:{_:"t",...it},correct:"c"},ld={caseSensitive:"cs",answers:{_:"a",id:"i",text:"t",length:"l"}},md={id:"i",type:"t",description:{_:"d",...it},length:"l",attachment:{_:"a",...rs},settings:{_:"s",...ay},content:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...Cv}),...ld},feedback:{_:"f",...sy}},Sc={intro:{_:"i",title:{_:"t",...it},attachment:{_:"a",...rs},description:{_:"d",...it}},questions:{_:"q",order:{_:"o",length:"l"},blocks:v({_:"B",...md})},results:{_:"r",displayType:"d",passed:{_:"p",...Cc},failed:{_:"f",...Cc},completed:{_:"c",...Cc}}},cy={main:{_:"m",attempts:"a",passingScore:"ps",timeLimit:"tl",timeLimitEnabled:"tle",shuffleAnswersEnabled:"sae",shuffleQuestionsEnabled:"sqe",showCorrectAnswersEnabled:"scae"},design:{_:"d",accentColor:"ac",headerFont:"hf",contentFont:"cf"}};var ly={...rs,crop:{_:"cp",top:"tp",left:"lf",right:"rt",bottom:"bm"}},ud={...md,attachment:{_:"a",...ly}},my={...Sc,intro:{...Sc.intro,attachment:{_:"a",...ly}},questions:{...Sc.questions,blocks:v({_:"B",...ud})}},uy=cy;var dy=ud,py=my,fy={...uy,advanced:{_:"a",direction:"d"}};var hy=dy,_c=py,dd=fy;var kc=hy,ns={..._c,intro:{..._c.intro,visible:"v"},results:{..._c.results,visible:"v"}},is={...dd,main:{...dd.main,isGraded:"ig"}};var Sv={...ld,answers:{_:"a",blocks:v({_:"b",id:"i",text:"t"}),order:{_:"o",length:"l"}}},_v={id:"i",text:{_:"t",...it}},pd={id:"i",text:{_:"t",...it}},kv={matches:{_:"ms",blocks:v({_:"b",id:"i",left:{_:"l",...pd},right:{_:"r",...pd}}),order:{_:"o",length:"l"}},distractors:{_:"ds",blocks:v({_:"b",...pd}),order:{_:"o",length:"l"}}},xv={...kc,content:{...kc.content,blocks:v({...kc.content.blocks.keys,..._v}),...Sv,...kv}},gy={...ns,questions:{...ns.questions,blocks:v({_:"B",...xv})}},yy={...is,main:{...is.main,showFeedbackEnabled:"sfe"}};var fd={...le,longreadQuizId:"lqI",alignment:"a",isLoading:"iL",state:{_:"dt",...ns},settings:{_:"ss",main:is.main}},hd={...fd,...he},Cy={...hd,state:{_:"dt",...gy},settings:{_:"ss",main:yy.main}};var Sy={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Le,...ft,...Qt,...ht,...fd,...ct,...qi,...ji,...Ar,...Ji,...Pr,...xt,...$n,...ts})}},Bv={...Lr.intro,key:"k",contentState:{_:"cs",...Sy}},bv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...Sy}},$r={...Lr,intro:Bv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...bv})}},xc={...os,main:{...os.main,chaptersCount:"chc",grade:{_:"gd",mode:"gM",quizToGradeId:"qTG"}}};var _y={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ne,...yn,...ga,...Sn,...hd,...Dn,...Ya,...tc,...An,...es,...Vn,...Ln,...Nn,...hc})}},vv={...$r.intro,key:"k",contentState:{_:"cs",..._y}},Tv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",..._y}},Nr={...$r,intro:vv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...Tv})}},Bc=xc;var ky={blockMap:{_:"b",order:{_:"o",length:"l"},blocks:v({_:"B",...Ne,...yn,...ga,...Sn,...Cy,...Dn,...Ya,...tc,...An,...es,...Vn,...Ln,...Nn,...hc})}},wv={...Nr.intro,key:"k",contentState:{_:"cs",...ky}},Dv={key:"k",header:{_:"h",title:"t",subtitle:"s"},contentState:{_:"cs",...ky}},bc={...Nr,intro:wv,chapters:{_:"c",order:{_:"o",length:"l"},blocks:v({_:"B",...Dv})}},xy=Bc;function Ev(e){return H(`${e}`,{4:va,5:wa,6:Ea,7:Ma,8:ja,9:En,10:Za,11:oc,12:Mn,13:In,14:sc,15:Pn,16:On,17:mc,18:Fn,19:Or,20:Vr,21:Fr,22:Kr,23:Lr,24:$r,25:Nr,26:bc})}function By(e,t){let o=Ev(t);return Ng(e,o).map(r=>({...r,value:_o(r.value,gn)}))}function Rv(e){return H(`${e}`,{4:va,5:wa,6:Ea,7:Ma,8:ja,9:En,10:Za,11:oc,12:Mn,13:In,14:sc,15:Pn,16:On,17:mc,18:Fn,19:Or,20:Vr,21:Fr,22:Kr,23:Lr,24:$r,25:Nr,26:bc})}function vc(e,t){let o=Rv(t),r=Ft(e,o,[]);return _o(r,gn)}function by(e,t,o){return hh(vc(e,o),By(t,o))}function Mv(e){return H(`${e}`,{4:Ta,5:Da,6:Ra,7:Ia,8:Xa,9:Gi,10:Ja,11:rc,12:nc,13:ic,14:ac,15:cc,16:lc,17:uc,18:dc,19:pc,20:fc,21:gc,22:yc,23:os,24:xc,25:Bc,26:xy})}function vy(e,t){let o=Mv(t);return Ft(e,o,[])}var Tc=class{constructor({initialVersion:t,upgraders:o,fixers:r=[]}){this._initialVersion=t,this._upgraders=new Map,o.forEach((n,i)=>{this._validateUpgrader(t,n,i),this._upgraders.set(n.targetVersion,n.upgradeFn)}),this._fixers=new Map,r.forEach(n=>this._fixers.set(n.targetVersion,n.fixFn))}upgradeDocument(t,o){let r=!1;if(o.from===o.to){let i=this._fixDocument(t,o.to);return{upgradedDocument:i.document,isDocumentFixed:i.fixed}}if(o.from<this._initialVersion||o.to>this._initialVersion+this._upgraders.size)throw new Error;let n=this._fixDocument(t,o.from);t=n.document,r=n.fixed;for(let i=o.from+1;i<=o.to;++i)t=d(this._upgraders.get(i))(t),n=this._fixDocument(t,i),t=n.document,r=r||n.fixed;return{upgradedDocument:t,isDocumentFixed:r}}_fixDocument(t,o){let r=this._fixers.get(o),n={document:t,fixed:!1};return r&&(n=r(t)),{document:n.document,fixed:n.fixed}}_validateUpgrader(t,{targetVersion:o},r){if(t!=o-r-1)throw new Error}};function Wt(e){return e}function nr({document:e,initialVersion:t,versionFrom:o,versionTo:r,upgraders:n,fixers:i}){return new Tc({initialVersion:t,upgraders:n,fixers:i}).upgradeDocument(e,{from:o,to:r})}function Iv(e){return{...e,verticalTextAlign:"top"}}function Av(e){for(let t of e.rowsOrder)for(let o of e.colsOrder){let r=E.getCell(e,t,o);e.rowsMap[t].colsMap[o]=Iv(r)}}function Ty(e){return e.type==="image"?e:{...e,meta:[]}}function Pv(e){e.frontSide=Ty(e.frontSide),e.backSide=Ty(e.backSide)}function Ov(e){se(e.cardsBlockMap,Pv)}function wy(e){se(e,t=>{t.type===g.TABLE&&Av(t),t.type===g.FLIP_CARD&&Ov(t)})}function Vv(e){return Ve(e,t=>{wy(t.intro.contentState.blockMap),se(t.chapters,o=>{wy(o.contentState.blockMap)})})}function Dy({content:e,settings:t}){return{content:Vv(e),settings:t}}function Fv(e){return{...e,advanced:{direction:"ltr"}}}function Ey({content:e,settings:t}){return{content:e,settings:Fv(t)}}function Kv(e,t){return e[t].meta.url}function Lv(e,t,o=e.characters.length){for(let r=t;r<o;++r)if(Kv(e.characters,r))return!0;return!1}function $v(e){return e.characters.reduce((t,o)=>t+o.text,"")}function Nv(e){return Oe(e,t=>{let o=t.contentState.blockMap,r=$e(o),n=null;r&&r.type===g.PARAGRAPH&&(n=r);let i={order:[...o.order],blocks:{...o.blocks}},s="";return n&&n.viewType==="subheader"&&!Lv(n,0)&&(s=$v(n),vo(i,n.key)),{...t,contentState:{blockMap:i},header:$g.create({title:t.header.title,subtitle:s})}})}function zv(e){return{...e,chapters:Nv(e.chapters)}}function Ry({content:e,settings:t}){return{settings:t,content:zv(e)}}function My(e){se(e,t=>{if(t.type===g.NOTE){let o=t;o.customIconColor=null,o.customBackgroundColor=null}})}function Qv(e){return Ve(e,t=>{My(t.intro.contentState.blockMap),se(t.chapters,o=>{My(o.contentState.blockMap)})})}function Iy({content:e,settings:t}){return{content:Qv(e),settings:t}}function Ay(e){return Oe(e,t=>{if(t.type===g.FLIP_CARD){let o=t;return{cardsBlockMap:o.cardsBlockMap,maxCardsInRow:o.maxCardsInRow,cardsLayout:o.cardsLayout,type:o.type,key:o.key,designSettings:{background:o.background&&o.background.type==="color"?{color:o.background.color,opacity:o.background.opacity}:null,paddingTop:null,paddingBottom:null}}}return{...t,designSettings:{background:null,paddingTop:null,paddingBottom:null}}})}function Hv(e){return Ve(e,t=>{t.intro.contentState.blockMap=Ay(t.intro.contentState.blockMap),se(t.chapters,o=>{o.contentState.blockMap=Ay(o.contentState.blockMap)})})}function Py({content:e,settings:t}){return{content:Hv(e),settings:t}}function ir(e){e.inlineStyleRanges&&e.inlineStyleRanges.forEach(t=>{t.style={name:t.style}}),e.urls&&e.urls.forEach(t=>{let o={start:t.start,end:t.end,style:{name:"underline"}};e.inlineStyleRanges?e.inlineStyleRanges.push(o):e.inlineStyleRanges=[o]})}function Uv(e){ir(e),e.textAlign=e.viewType==="pullquote"?"center":"left"}function gd(e){let t=null;return e.forEach(o=>{if(o.type===g.PARAGRAPH){Uv(o);let r=o;r.viewType==="ol"&&(!t||t!=="ol")&&(r.isOrderedListFirstItem=!0),t=r.viewType}else if(o.type===g.IMAGE)ir(o),t=null;else if(o.type===g.EMBED)ir(o),t=null;else if(o.type===g.EXERCISE){let r=o;r.questions&&r.questions.forEach(n=>{ir(n.description),(n.type==="mc"||n.type==="mr")&&n.content.choices&&n.content.choices.forEach(i=>ir(i.text)),ir(n.feedback.answered),ir(n.feedback.correct),ir(n.feedback.incorrect)}),t=null}else t=null}),e}function Oy(e){switch(e){case"header":return"h1";case"subheader":return"h2";default:return e}}function Fy(e){return{...e,viewType:Oy(e.viewType)}}function Wv(e){let t=e.colsMap,o=e.colsOrder,r={};return o.forEach(n=>{let i=t[n].blockMap,s=Oe(i,a=>a.type===g.PARAGRAPH?Fy(a):a);r[n]={blockMap:s}}),{...e,colsMap:r}}function Vy(e){return Oe(e,t=>t.type===g.PARAGRAPH?Fy(t):t.type===g.LAYOUT?Wv(t):{...t})}function qv(e){return{...e,intro:{...e.intro,contentState:{blockMap:Vy(e.intro.contentState.blockMap)}},chapters:Oe(e.chapters,t=>({...t,contentState:{blockMap:Vy(t.contentState.blockMap)}}))}}function Ky({content:e,settings:t}){return{content:qv(e),settings:t}}var Ly="intro";function $y(e){return Oe(e,t=>{if(t.type===g.EXERCISE){let o=t,r=o.questions.map(s=>s.type==="ti"?{id:s.key,type:s.type,description:s.description,attachment:s.attachment,feedback:s.feedback,content:{caseSensitive:s.content.caseSensitive,answers:s.content.answers.map(l=>({id:l.key,text:l.text}))}}:{id:s.key,type:s.type,description:s.description,attachment:s.attachment,feedback:s.feedback,content:Fe(s.content.choices.map(c=>({id:c.key,text:c.content,correct:c.correct})),c=>c.id)}),n={intro:null,questions:Fe(r,s=>s.id),results:null};return{key:o.key,type:g.QUIZ,longreadQuizId:null,isLoading:!1,alignment:"inner",designSettings:o.designSettings,settings:{main:{attempts:$a,passingScore:80,timeLimit:20*6e4,timeLimitEnabled:!1,shuffleAnswersEnabled:o.settings.shuffleAnswers,shuffleQuestionsEnabled:!1,showCorrectAnswersEnabled:o.settings.showCorrectAnswers,isGraded:!1}},state:n}}return t})}function Yv(e){return Ve(e,t=>{let o={key:Ly,contentState:{blockMap:$y(t.intro.contentState.blockMap)},header:t.intro.header},r=so(t.chapters).map(n=>({...n,contentState:{blockMap:$y(n.contentState.blockMap)},header:n.header}));t.chapters=Fe(r,n=>n.key),t.intro=o})}function jv(e){return{...e,main:{...e.main,chaptersCount:-1,grade:{mode:"noGrade"}}}}function Ny({content:e,settings:t}){let o=Yv(e),r=jv(t);return{content:o,settings:r}}function yd(e){let{designSettings:t}=e;if(!t)return{...e,designSettings:void 0};let o={},r=t.paddingTop!==void 0&&t.paddingTop!==null,n=t.paddingBottom!==void 0&&t.paddingBottom!==null;return t.background!==void 0&&t.background!==null&&(o.background={color:t.background}),(r||n)&&(o.padding={},r&&(o.padding.top=t.paddingTop),n&&(o.padding.bottom=t.paddingBottom)),{...e,designSettings:o}}function Xv(e){let t=yd(e).designSettings,o=e.colsMap,r=e.colsOrder,n={};return r.forEach(i=>{let s=o[i].blockMap,a=Oe(s,c=>yd(c));n[i]={blockMap:a}}),{...e,colsMap:n,layoutType:"column",designSettings:t}}function zy(e){return Oe(e,t=>t.type===g.LAYOUT?Xv(t):yd(t))}function Qy({content:e,settings:t}){return{settings:t,content:{...e,intro:{...e.intro,contentState:{blockMap:zy(e.intro.contentState.blockMap)}},chapters:Oe(e.chapters,o=>({...o,contentState:{blockMap:zy(o.contentState.blockMap)}}))}}}function Zv(){return Fe([er(k("Quiz.Editor.Choices.DefaultAnswer",{index:1}),!0),er(k("Quiz.Editor.Choices.DefaultAnswer",{index:2}),!1),er(k("Quiz.Editor.Choices.DefaultAnswer",{index:3}),!1)],e=>e.id)}function Hy(e){return Zt(e.questions)?{...e,questions:Oe(e.questions,t=>t.type==="ti"?{...t,content:{...t.content,answers:Fe(t.content.answers,o=>o.id)}}:t)}:{...e,questions:Fe([{id:ze(),description:K.create(),attachment:null,feedback:Fa(),type:"mc",content:Zv()}],t=>t.id)}}function Uy(e){return Oe(e,t=>{var o;if(t.type===g.QUIZ){let r=t;return{...r,state:Hy(r.state),alignment:(o=r.alignment)!=null?o:"inner",settings:{...r.settings,main:{...r.settings.main,showFeedbackEnabled:!0}}}}return t})}function Jv(e){return Ve(e,t=>{t.intro.contentState.blockMap=Uy(t.intro.contentState.blockMap),se(t.chapters,o=>{o.contentState.blockMap=Uy(o.contentState.blockMap)})})}function Wy({content:e,settings:t}){return{content:Jv(e),settings:t}}function qy(e){return Oe(e,t=>{if(t.type===g.IMAGE){let o=t;return{alignment:o.alignment,key:o.key,type:g.COLLAGE,images:[{key:M(),type:o.type,parentCollageKey:o.key,width:o.width,height:o.height,src:o.src,characters:o.characters,isBlob:o.isBlob,alignment:"inner"}]}}if(t.type===g.EMBED){let o=t;return{key:o.key,type:o.type,width:o.width,height:o.height,src:o.src,alignment:o.alignment,characters:o.characters}}return t})}function eT(e){return Ve(e,t=>{t.intro.contentState.blockMap=qy(t.intro.contentState.blockMap),se(t.chapters,o=>{o.contentState.blockMap=qy(o.contentState.blockMap)})})}function Gy({content:e,settings:t}){return{content:eT(e),settings:t}}function tT(e){return{...e,main:{...e.main,longreadType:"multiplePage"}}}function Yy({content:e,settings:t}){return{content:e,settings:tT(t)}}function Xy({document:e,versionFrom:t}){return nr({document:e,initialVersion:4,versionFrom:t,versionTo:26,upgraders:[{targetVersion:5,upgradeFn:Gy},{targetVersion:6,upgradeFn:Wt},{targetVersion:7,upgradeFn:Wt},{targetVersion:8,upgradeFn:Wt},{targetVersion:9,upgradeFn:Wt},{targetVersion:10,upgradeFn:Yy},{targetVersion:11,upgradeFn:Wt},{targetVersion:12,upgradeFn:Dy},{targetVersion:13,upgradeFn:Ey},{targetVersion:14,upgradeFn:Wt},{targetVersion:15,upgradeFn:Wt},{targetVersion:16,upgradeFn:Ry},{targetVersion:17,upgradeFn:Iy},{targetVersion:18,upgradeFn:Wt},{targetVersion:19,upgradeFn:Py},{targetVersion:20,upgradeFn:Wt},{targetVersion:21,upgradeFn:Wt},{targetVersion:22,upgradeFn:Ky},{targetVersion:23,upgradeFn:Wt},{targetVersion:24,upgradeFn:Ny},{targetVersion:25,upgradeFn:Qy},{targetVersion:26,upgradeFn:Wy}]})}function Cd(e){if("content"in e&&"settings"in e&&"version"in e){let t=e.version,o=e.content,r="patches"in e?e.patches:null,n=r?by(o,r,t):vc(o,t),i=vy(e.settings,t);return Xy({document:{content:n,settings:i},versionFrom:t})}throw Error("cannot load roll document")}var Zy=protobuf.Type,ss=protobuf.Field,oT=protobuf.Root;var wc={string:"string",int:"int32",float:"float",bool:"bool"},rT=0,yt={String:e=>W(e,wc.string),Int:e=>W(e,wc.int),Bool:e=>W(e,wc.bool),Float:e=>W(e,wc.float)},nT=new oT;function N(e,t){t=t||`Type${++rT}`;let o=new Zy(t);for(let r of Object.keys(e)){let n=e[r],i=n.ref;if(typeof i=="string")o=o.add(new ss(r,n.id,i,n.rule));else if(i instanceof Zy){let s=i;o=o.add(new ss(r,n.id,s.name,n.rule))}else{let s=N(i);o=o.add(new ss(r,n.id,s.name,n.rule))}}return nT.add(o),o}function W(e,t,o="required"){return{id:e,ref:t,rule:o}}function te(e,t){return typeof t=="function"&&(t=t(e).ref),W(e,t,"repeated")}function ce(e,t){return typeof t=="function"&&(t=t(e).ref),W(e,t,"optional")}function Mt(e){let t="type",o=N({}),r=N({}).add(new ss(t,0,"string","required"));for(let n of Object.keys(e))e[n]=e[n].add(new ss(t,0,"string","required"));return o.fromObject=function(n){return e[n[t]].fromObject(n)},o.toObject=function(n){return e[n[t]].toObject(n)},o.encode=function(n,i){return e[n[t]].encode(n,i)},o.decode=function(n,...i){if(n instanceof protobuf.Reader){let s=n.pos,a=r.decode(n,...i),c=e[a[t]];return n.pos=s,c.decode(n,...i)}throw new Error("top level union is not supported")},o.verify=function(n){let i=e[n[t]];return i?i.verify(n):`unknown type ${n[t]}`},o}var uo={ACCENT_COLOR:"ACCENT_COLOR",PLAYER_MAIN_FONT:"PLAYER_MAIN_FONT",CONTENT_FONT:"CONTENT_FONT"};var oo={TOOLTIP:"tooltip",PLAYER_MAIN:"playerMain",CONTENT:"content"};var{String:Lt,Int:sr,Bool:as}=yt,iT=N({start:sr(1),end:sr(2),style:Lt(3)}),sT=N({start:sr(1),end:sr(2),url:Lt(3)}),zr=N({text:Lt(1),inlineStyleRanges:te(2,iT),urls:te(3,sT)}),aT=N({src:Lt(1),width:sr(2),height:sr(3)}),cT=N({src:Lt(1),width:sr(2),height:sr(3)}),Sd=Mt({i:cT,e:aT}),Jy=N({key:Lt(1),text:W(2,zr),correct:as(3)}),lT=N({choices:te(1,Jy)}),mT=N({choices:te(1,Jy)}),uT=N({key:Lt(1),text:Lt(2)}),dT=N({caseSensitive:as(1),answers:te(2,uT)}),_d=N({type:Lt(1),correct:W(2,zr),incorrect:W(3,zr),answered:W(4,zr)}),pT=N({includeInProgress:as(1),shuffleAnswers:as(2),showCorrectAnswers:as(3)}),fT=N({key:Lt(1),description:W(2,zr),attachment:ce(3,Sd),content:W(4,lT),feedback:W(5,_d)}),hT=N({key:Lt(1),description:W(2,zr),attachment:ce(3,Sd),content:W(4,mT),feedback:W(5,_d)}),gT=N({key:Lt(1),description:W(2,zr),attachment:ce(3,Sd),content:W(4,dT),feedback:W(5,_d)}),yT=Mt({mc:fT,mr:hT,ti:gT}),eC=N({key:Lt(1),settings:W(2,pT),questions:te(3,yT)});var{String:Ye,Int:po,Float:CT}=yt,Qr=N({start:po(1),end:po(2),url:Ye(3)}),kd=N({start:po(1),end:po(2),style:Ye(3)}),ST=N({key:Ye(1),text:Ye(2),viewType:Ye(3),inlineStyleRanges:te(4,kd),urls:te(5,Qr)}),_T=N({key:Ye(1),src:Ye(2),width:po(3),height:po(4),alignment:Ye(5),text:Ye(6),inlineStyleRanges:te(7,kd),urls:te(8,Qr)}),kT=N({key:Ye(1),src:Ye(2),width:po(3),height:po(4),alignment:Ye(5),text:Ye(6),inlineStyleRanges:te(7,kd),urls:te(8,Qr)}),tC=Mt({[g.PARAGRAPH]:ST,[g.IMAGE]:_T,[g.EMBED]:kT,[g.EXERCISE]:eC}),oC=N({intro:W(1,{kicker:Ye(1),title:Ye(2),coverSrc:ce(3,Ye),coverWidth:ce(4,po),coverHeight:ce(5,po),blocks:te(6,tC),coverColor:ce(7,Ye),coverOpacity:ce(8,CT)}),chapters:te(2,{key:Ye(1),title:Ye(2),blocks:te(3,tC)})});var{String:Hr,Bool:Dc}=yt,xT=N({content:W(1,oC),publishSettings:W(2,{navigationType:Hr(1),searchEnabled:Dc(2),numberingEnabled:Dc(3),nextButtonEnabled:Dc(4),copyingEnabled:ce(6,Dc),fonts:W(5,{[oo.TOOLTIP]:Hr(1),[oo.PLAYER_MAIN]:Hr(2),[oo.CONTENT]:Hr(3)})}),cssReplacements:W(3,{[uo.ACCENT_COLOR]:Hr(1),[uo.CONTENT_FONT]:Hr(2),[uo.PLAYER_MAIN_FONT]:Hr(3)})}),Ec=new jo(xT);var rC=Ec;var{String:It,Int:Ao,Bool:cs,Float:BT}=yt,bT=N({start:Ao(1),end:Ao(2),style:W(3,{name:It(1),size:ce(2,Ao),color:ce(3,It),opacity:ce(4,BT)})}),vT=N({start:Ao(1),end:Ao(2),url:It(3)}),Ur=N({text:It(1),inlineStyleRanges:te(2,bT),urls:te(3,vT)}),TT=N({src:It(1),width:Ao(2),height:Ao(3)}),wT=N({src:It(1),width:Ao(2),height:Ao(3)}),xd=Mt({i:wT,e:TT}),nC=N({key:It(1),text:W(2,Ur),correct:cs(3)}),DT=N({choices:te(1,nC)}),ET=N({choices:te(1,nC)}),RT=N({key:It(1),text:It(2)}),MT=N({caseSensitive:cs(1),answers:te(2,RT)}),Bd=N({type:It(1),correct:W(2,Ur),incorrect:W(3,Ur),answered:W(4,Ur)}),IT=N({includeInProgress:cs(1),shuffleAnswers:cs(2),showCorrectAnswers:cs(3)}),AT=N({key:It(1),description:W(2,Ur),attachment:ce(3,xd),content:W(4,DT),feedback:W(5,Bd)}),PT=N({key:It(1),description:W(2,Ur),attachment:ce(3,xd),content:W(4,ET),feedback:W(5,Bd)}),OT=N({key:It(1),description:W(2,Ur),attachment:ce(3,xd),content:W(4,MT),feedback:W(5,Bd)}),VT=Mt({mc:AT,mr:PT,ti:OT}),iC=N({key:It(1),settings:W(2,IT),questions:te(3,VT)});var{String:Me,Int:fo,Float:aC,Bool:FT}=yt,bd=N({start:fo(1),end:fo(2),style:W(3,{name:Me(1),size:ce(2,fo),color:ce(3,Me),opacity:ce(4,aC)})}),KT=N({key:Me(1),text:Me(2),viewType:Me(3),inlineStyleRanges:te(4,bd),urls:te(5,Qr),textAlign:ce(6,Me),isOrderedListFirstItem:ce(7,FT)}),LT=N({key:Me(1),src:Me(2),width:fo(3),height:fo(4),alignment:Me(5),text:Me(6),inlineStyleRanges:te(7,bd),urls:te(8,Qr)}),$T=N({key:Me(1),src:Me(2),width:fo(3),height:fo(4),alignment:Me(5),text:Me(6),inlineStyleRanges:te(7,bd),urls:te(8,Qr)}),NT=N({key:Me(1),fileName:Me(2),fileExtension:Me(3),fileSize:fo(4)}),sC=Mt({[g.PARAGRAPH]:KT,[g.IMAGE]:LT,[g.EMBED]:$T,[g.EXERCISE]:iC,[g.ATTACHMENT]:NT}),cC=N({intro:W(1,{kicker:Me(1),title:Me(2),coverSrc:ce(3,Me),coverWidth:ce(4,fo),coverHeight:ce(5,fo),blocks:te(6,sC),coverColor:ce(7,Me),coverOpacity:ce(8,aC)}),chapters:te(2,{key:Me(1),title:Me(2),blocks:te(3,sC)})});var{String:Wr,Bool:Rc}=yt,zT=N({content:W(1,cC),publishSettings:W(2,{navigationType:Wr(1),searchEnabled:Rc(2),numberingEnabled:Rc(3),nextButtonEnabled:Rc(4),copyingEnabled:ce(6,Rc),fonts:W(5,{[oo.TOOLTIP]:Wr(1),[oo.PLAYER_MAIN]:Wr(2),[oo.CONTENT]:Wr(3)})}),cssReplacements:W(3,{[uo.ACCENT_COLOR]:Wr(1),[uo.CONTENT_FONT]:Wr(2),[uo.PLAYER_MAIN_FONT]:Wr(3)})}),lC=new jo(zT);function mC(e){return e.publishSettings.copyingEnabled=!0,e}function uC(e){return gd(e.content.intro.blocks),e.content.chapters&&e.content.chapters.forEach(t=>{gd(t.blocks)}),e}function zn({text:e,inlineStyleRanges:t,urls:o}){let r=re.create(),n=[...e].map(i=>({text:i,meta:r}));return t&&t.forEach(i=>{for(let s=i.start;s<i.end;++s){if(s>=n.length){R.warn("incorrect style ranges");break}n[s].meta=re.applyStyle(n[s].meta,[i.style])}}),o&&o.forEach(i=>{for(let s=i.start;s<i.end;++s){if(s>=n.length){R.warn("incorrect url ranges");break}n[s].meta=re.setUrl(n[s].meta,i.url)}}),n}var dC={create({type:e,width:t,height:o,src:r,crop:n,title:i,previewSrc:s}){let a={type:e,width:t,height:o,src:r};return n&&(a={...a,crop:n}),i&&(a={...a,title:i}),s&&(a={...a,previewSrc:s}),a}};function Mc(e){let t=q($e(e.blockMap));return t?w.getParagraphText(t):(R.error("first block is not text pararaph"),"")}var Qn={create(e={}){let{key:t=M(),correct:o=!1,text:r=[]}=e;return{key:t,correct:o,content:K.create([w.create({characters:r})])}},getChoiceText(e){return d(Mc(e.content))}};var Ic={create(e={}){let{choices:t=[Qn.create({correct:!0,text:qe(`${k("Roll.Exercise.Question.Content.PossibleAnswer")} 1`)}),Qn.create({text:qe(`${k("Roll.Exercise.Question.Content.PossibleAnswer")} 2`)}),Qn.create({text:qe(`${k("Roll.Exercise.Question.Content.PossibleAnswer")} 3`)})]}=e;return{choices:t}}};var Ac={create(e={}){let{key:t=M(),text:o=""}=e;return{key:t,text:o}}};var Pc={create(e={}){let{caseSensitive:t=!1,answers:o=[Ac.create({text:`${k("Roll.Exercise.TypeIn.Answer")} 1`})]}=e;return{caseSensitive:t,answers:o}}};var Oc={create(e={}){let{includeInProgress:t=!1,shuffleAnswers:o=!1,showCorrectAnswers:r=!0}=e;return{includeInProgress:t,shuffleAnswers:o,showCorrectAnswers:r}}};var pC={ANSWERED:"answered",CORRECT_INCORRECT:"correctIncorrect"};var Vc={create(e={}){let{type:t=pC.CORRECT_INCORRECT,answered:o=[],correct:r=[],incorrect:n=[]}=e;return{type:t,answered:K.create([w.create({characters:o})]),correct:K.create([w.create({characters:r})]),incorrect:K.create([w.create({characters:n})])}}};function QT(e){switch(e){case"mc":case"mr":return Ic.create();case"ti":return Pc.create();default:throw I(e),new Error(`Unknown question type: ${e}`)}}var Fc={create(e){let{key:t=M(),type:o,attachment:r=null,description:n="",content:i=QT(e.type),feedback:s=Vc.create()}=e;return{key:t,type:o,attachment:r,description:K.create([w.create({characters:n})]),content:i,feedback:s}},getDescriptionText(e){return Mc(e.description)}};var fC={create(e={}){let{key:t=M(),settings:o=Oc.create(),questions:r=[Fc.create({type:"mc"})]}=e;return{key:t,type:g.EXERCISE,settings:o,questions:r}},toExerciseBlock(e){return e&&e.type===g.EXERCISE?e:null}};function hC(e,t=!1){let o=e.questions,r=o?UT(o,t):[];return fC.create({key:t?M():e.key,settings:HT(e.settings),questions:r})}function HT(e){return Oc.create({includeInProgress:e.includeInProgress,showCorrectAnswers:e.showCorrectAnswers,shuffleAnswers:e.shuffleAnswers})}function UT(e,t){return e.map(o=>WT(o,t))}function WT(e,t){let o=e.type,r=e.attachment;return Fc.create({key:t?M():e.key,type:o,description:ls(e.description),attachment:r?qT(r):void 0,content:YT(o,e.content,t),feedback:GT(e.feedback)})}function qT(e){let t={crop:e.crop||void 0,title:e.title||void 0,previewSrc:e.previewSrc||void 0};return dC.create({type:e.type,width:e.width,height:e.height,src:e.src,...t})}function GT(e){return Vc.create({type:e.type,correct:ls(e.correct),incorrect:ls(e.incorrect),answered:ls(e.answered)})}function ls(e){return zn({text:e.text,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls})}function YT(e,t,o){switch(e){case"mc":case"mr":return jT(t,o);case"ti":return ZT(t,o);default:throw I(e),new Error(`Unknown question type: ${e}`)}}function jT(e,t){let o=e.choices,r=o?o.map(n=>XT(n,t)):[];return Ic.create({choices:r})}function XT(e,t){return Qn.create({key:t?M():e.key,text:ls(e.text),correct:e.correct})}function ZT(e,t){let o=e.answers,r=o?o.map(n=>JT(n,t)):[];return Pc.create({caseSensitive:e.caseSensitive,answers:r})}function JT(e,t){return Ac.create({key:t?M():e.key,text:e.text})}var gC={create(e={}){let t={...gt.create(e),type:g.IMAGE,src:e.src||"",isBlob:e.isBlob||!1};return e.crop&&(t.crop=e.crop),t},toImageBlock(e){return e&&e.type===g.IMAGE?e:null}};function e4(e){return w.create({key:e.key,viewType:e.viewType,textAlign:e.textAlign,characters:zn({text:e.text,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls}),isOrderedListFirstItem:e.isOrderedListFirstItem})}function t4(e){let t=e.text||"";return gC.create({key:e.key,characters:zn({text:t,inlineStyleRanges:e.inlineStyleRanges,urls:e.urls}),src:e.src,width:e.width,height:e.height,alignment:e.alignment})}function o4(e){let t=e.text||"";return za.create({key:e.key,characters:zn({text:t,inlineStyleRanges:e.inlineStyleRanges||[],urls:e.urls}),src:e.src,width:e.width,height:e.height,alignment:e.alignment})}function r4(e){return Do.create({key:e.key,fileName:e.fileName,fileSize:e.fileSize,fileExtension:e.fileExtension})}function n4(e){switch(e.type){case g.PARAGRAPH:return e4(e);case g.IMAGE:return t4(e);case g.EMBED:return o4(e);case g.EXERCISE:return hC(e);case g.ATTACHMENT:return r4(e)}return R.error(`unknown block type ${e.type}`),null}function yC(e){let t=[];return e.forEach(o=>{let r=n4(o);r&&t.push(r)}),t}function CC(e){let t=yC(e),o={order:[],blocks:{}};for(let r of t)o.order.push(r.key),o.blocks[r.key]=r;return{blockMap:o}}function i4(e){let t={kicker:e.kicker,title:e.title,coverInfoState:null};return e.coverSrc&&e.coverColor&&e.coverWidth!=null&&e.coverHeight!=null&&e.coverOpacity!=null&&(t.coverInfoState={src:e.coverSrc,width:e.coverWidth,height:e.coverHeight,color:e.coverColor,opacity:e.coverOpacity,isBlob:!1}),{header:{kicker:t.kicker,title:t.title,coverInfoState:t.coverInfoState},contentState:CC(e.blocks)}}function s4(e){return{key:e.key,header:{title:e.title},contentState:CC(e.blocks)}}function SC(e){let t=i4(e.intro),o=(e.chapters||[]).map(r=>s4(r));return{intro:t,chapters:Fe(o,r=>r.key)}}function _C({content:e,publishSettings:t,cssReplacements:o}){return{content:SC(e),settings:{main:{navigationType:t.navigationType,numberingEnabled:t.numberingEnabled,nextButtonEnabled:t.nextButtonEnabled,copyingEnabled:t.copyingEnabled},design:{accentColor:o[uo.ACCENT_COLOR],headerFont:t.fonts[oo.PLAYER_MAIN],contentFont:t.fonts[oo.CONTENT]}}}}function kC({playerDocument:e,versionFrom:t}){let o=[{targetVersion:2,upgradeFn:mC},{targetVersion:3,upgradeFn:uC},{targetVersion:4,upgradeFn:_C}],{upgradedDocument:r}=nr({document:e,initialVersion:1,versionFrom:t,versionTo:4,upgraders:o});return r}async function a4(e){let t=await bh(e,n=>{switch(n){case 1:return Ec;case 2:return rC;case 3:return lC;default:throw Error("invalid blob document format")}}),{version:o,data:r}=t;return kC({playerDocument:r,versionFrom:o})}async function xC(e){if(e instanceof Blob){let t=await a4(e),{upgradedDocument:o}=Cd({...t,version:4});return o}else{let{upgradedDocument:t}=Cd(e);return t}}function BC({product:e}){return H(e,{learn:"iSpring Learn",page:"iSpring Page",space:"iSpring Space",daily:"iSpring Daily"})}var Hn={watermark:"x402f7__watermark",highlight:{withMods:e=>__getCssClass("x402f7__highlight",e)},container:"x402f7__container",logo:"x402f7__logo",button:"x402f7__button",arrowIcon:{withMods:e=>__getCssClass("x402f7__arrow-icon",e)},moveRight:"x402f7__move-right",moveLeft:"x402f7__move-left"};function c4(e){return H(e,{islearn:"learn",isstudio:"page",isspace:"space",isdaily:"daily"})}function l4(e){let t=BC({product:c4(e)});return k("Watermark.Trial.Text",{product:t})}function Kc(e,{subscriptionProduct:t,watermarkUrl:o}){return e`
<a
	href=${o}
	target="_blank"
	class=${Hn.watermark}
>
	<div class=${Hn.highlight.withMods({dir:ot()})}></div>
	<div class=${Hn.container}>
		<div class=${Hn.logo}></div>
		<div>${l4(t)}</div>
		<div class=${Hn.button}>
			<div>${k("Common.LearnMore")}</div>
			<div class=${Hn.arrowIcon.withMods({dir:ot()})}></div>
		</div>
	</div>
</a>`}function bC(e,t,o,r){t&&o&&r&&e.appendChild(Pe(Kc)({subscriptionProduct:o,watermarkUrl:r}))}function Lc(e,t){let o;function r(){o&&(clearTimeout(o.id),o=void 0)}function n(){if(o){let a=o.handler;r(),a()}}function i(...a){r();let c=()=>{r(),e(...a)};o={id:setTimeout(c,t),handler:c}}function s(...a){r(),e(...a)}return{isPending:()=>Xe(o),cancel:r,flush:n,call:i,forceCall:s}}var qr={FULL:1180,MEDIUM:739};function $c(){return window.innerWidth>qr.FULL}function ar(){return window.innerWidth<=qr.FULL&&window.innerWidth>qr.MEDIUM}function At(){return window.innerWidth<=qr.MEDIUM}function vC(){return new Date().getTime()}function vd(e,t,o){let r=null,n=null,i;return s=>{r&&clearTimeout(r);let a=vC();n===null&&o&&o.leading===!1&&(n=a);let c=n===null?0:t-(a-n);return c<=0?(i=e(s),n=a):r=setTimeout(()=>{i=e(s),n=o&&o.leading===!1?null:vC()},c),i}}var $t=gh();function TC(){let e=[];return{add(t){let o=e.length?e[0].state:null,r=t.state;if(o&&o.transactAction!=r.transactAction)throw new Error(`[model] states '${o.fullName}' and '${r.fullName}' belong to different models`);e.push(t)},commit(){for(;e.length;){let t=e.slice();e.length=0;let o=t[0].state.transactAction;$t.dispatch(o(sf(t,r=>r.state.fullName,r=>r.setArg)))}}}}var Un=null,Nc=0;function wC(){return Un}function DC(e){Nc==0&&!Un&&(Un=TC()),++Nc;let t;try{e()}catch(o){t=o}if(--Nc,Nc==0&&Un&&(t==null&&Un.commit(),Un=null),t!=null)throw t}function RC({modelName:e,transactAction:t}){let o={},r=[];function n(l){if(o.hasOwnProperty(l))throw new Error(`[model ${e}] state '${l}' already defined`);return`${e}.${l}`}function i(l,m){let u=n(l),p=Du([u],m,()=>{});return o[l]=p,{get:()=>$t.getState(p),subscribe:S=>$t.subscribe(p,S),fullName:u,atom:p,transactAction:t}}function s(l,m){let u=n(l),p=fa([`${u} [set]`]),S=Du([u],m,_=>{_(p,EC),_(t,(C,T)=>T.hasOwnProperty(u)?EC(C,T[u]):C)});o[l]=S;let b={get:()=>$t.getState(S),subscribe:_=>$t.subscribe(S,_),set:y,mutate:_=>y(C=>Ve(C,_)),fullName:u,atom:S,transactAction:t};function y(_){let C=wC();C?C.add({state:b,setArg:_}):$t.dispatch(p(_))}return b}function a(l,m,u){let p=n(l),S=ha(vr(m,y=>y.atom)),b=yh(p,S,u);return o[l]=b,{get:()=>$t.getState(b),subscribe:y=>$t.subscribe(b,y),fullName:p,atom:b,transactAction:t}}function c(l,m,u,p){let S=n(l),b=ha(S,vr(m,y=>y.atom));o[l]=b,r.push(()=>{if(p){let y=$t.getState(b);u(y)}return $t.subscribe(b,u)})}return{const:i,def:s,map:a,effect:c,subscribe:()=>{let l=ha(o),m=$t.subscribe(l,()=>{}),u=r.map(p=>p());return()=>{u.map(p=>p()),m()}}}}function EC(e,t){return typeof t=="function"?t(e):t}var Td={};function m4(e){return Td[e]==null&&(Td[e]=0),Td[e]++}function MC(e){let t=P(e),o=Q(()=>{let r=t.current.parentModel,n=r?`${r.name}.${t.current.name}`:t.current.name,i=r?r.transactAction:fa([ze()]),s=RC({modelName:`${n}#${m4(n)}`,transactAction:i}),a=t.current.getStates(s),c=t.current.getActions(a),l=t.current.defEffects;return l&&l(s,a,c),{name:n,states:a,actions:c,transactAction:i,subscribe:s.subscribe}},[]);return A(()=>o.subscribe(),[o]),o}function IC(e){return MC(e)}function AC(e){return`QM_PLAYER_PERSISTED_STATE_${JSON.stringify(e.intro).substring(0,100)}`}function Pt(){let e=[];return{add(t){return e.push(t),()=>{let o=e.indexOf(t);o>=0&&e.splice(o,1)}},dispatch(t){for(let o of e)o(t)}}}function zc(e){return{type:e.type,correct:!1,submitted:!1,choices:e.content.order.reduce((t,o)=>(t[o]=!1,t),{})}}function Qc(){return{type:"ti",correct:!1,submitted:!1,answer:""}}var PC={type:"t",answer:"a",correct:"c",submitted:"s"},OC={correct:"c",submitted:"s",type:"t",choices:v({_:"cs"})},VC={type:"t",questionId:"qi"},Wn={sessionState:{_:"ss"},attempts:{_:"a"},timerStartTime:{_:"tst"},timerStopTime:{_:"te"},questionsViewOrder:{_:"qvo"},timeSpent:{_:"ts"},choicesViewOrderMap:v({_:"cvo"}),typeInQuestionsState:v({_:"tqi",...PC}),choicesQuestionsState:v({_:"cqs",...OC}),currentSlide:{_:"cs",...VC},bestAttempt:"ba"};function Hc(e,t){let o=[],r=[];se(e.content.matches,a=>{o.push(a.left.id),r.push(a.right.id)}),t&&xo(o);let n=e.content.distractors.order,i=[...r,...n];xo(i);let s=o.reduce((a,c)=>(a[c]=null,a),{});return{type:e.type,correct:!1,submitted:!1,leftPartsOrder:o,rightPartsOrder:i,matchedPairs:s}}function Uc(e){let t=Ve(e.content.order,o=>xo(o));return{type:e.type,correct:ko(e.content.order,t),submitted:!1,order:t}}var u4={correct:"c",submitted:"s",type:"t",order:"o"},d4={correct:"c",submitted:"s",type:"t",leftPartsOrder:"lo",rightPartsOrder:"ro",matchedPairs:v({_:"mp"})};var qn={...Wn,sequenceQuestionsState:v({_:"sqs",...u4}),matchingQuestionsState:v({_:"mqs",...d4})};function p4(e){switch(e){case 1:return Wn;case 2:return qn;default:throw Error(`cannot decode PersistedState with version ${e}`)}}function Wc(e){return{version:Gc,state:mo(e,FC,[])}}function qc(e){let t="version"in e&&typeof e.version=="number"?e.version:1,o=p4(t),r=t>1&&"state"in e?e.state:e;return{state:Ft(r,o,[]),version:t}}function ro(e){let[t]=be.getBlocksArray(e.blockMap),o=q(t);if(!o)throw new Error("Richtext must consist only paragraph block");return w.getParagraphText(o)}function f4(e){let t=Pt();function o(){t.dispatch()}let r=zs(o).call;return requestAnimationFrame(()=>{e.states.usedAttempts.subscribe(r),e.states.session.subscribe(r)}),t}function h4(e){let t=Pt();return e.states.currentSlide.subscribe(()=>t.dispatch()),t}function g4(e){let t=Pt();return e.states.quizClosed.subscribe(()=>t.dispatch()),t}function y4(e){let t=Pt();return e.states.sessionState.subscribe(o=>{o==="completed"&&t.dispatch()}),t}function C4(e){let t=Pt();return e.states.sessionState.subscribe(o=>{o==="inProgress"&&t.dispatch()}),t}function ms(e,t){let o=Pt(),r=t.states.questionsState.subscribe(n=>{let i=n[e];i&&i.submitted&&(o.dispatch(),r())});return o}function S4(e,t){return e==="completed"?{get quizPassed(){return t.states.quizPassed.get()},get score(){return t.states.score.get()},get maxScore(){return 100}}:null}function Yc(e){return{description:ro(e.description),attachment:e.attachment,feedback:{type:e.feedback.type,correct:ro(e.feedback.correct),incorrect:ro(e.feedback.incorrect),answered:ro(e.feedback.answered)}}}function _4(e,t){return{id:e.id,type:"ti",data:{...Yc(e),content:{...e.content,answers:so(e.content.answers)}},get state(){let r=t.states.typeInQuestionsState.get()[e.id];return r?{correct:r.correct,answer:r.answer}:null},onSubmitted:ms(e.id,t)}}function k4(e){return{...Yc(e),content:e.content.order.map(t=>{let o=e.content.blocks[t];return{...o,text:ro(o.text)}})}}function x4(e,t){return{id:e.id,type:"sq",data:k4(e),get state(){let r=t.states.sequenceQuestionsState.get()[e.id];return r?{correct:r.correct,order:r.order}:null},onSubmitted:ms(e.id,t)}}function KC(e){return{...Yc(e),content:e.content.order.map(t=>{let o=e.content.blocks[t];return{...o,text:ro(o.text)}})}}function B4(e,t){return{id:e.id,type:"mc",data:KC(e),get state(){let r=t.states.choicesQuestionsState.get()[e.id];if(!r)return null;let n=r.choices,i=Object.keys(n).find(s=>n[s])||null;return{correct:r.correct,selectedChoiceId:i}},onSubmitted:ms(e.id,t)}}function b4(e){let t=e.content.matches.order.map(r=>{let n=e.content.matches.blocks[r];return{id:n.id,left:{id:n.left.id,text:ro(n.left.text)},right:{id:n.right.id,text:ro(n.right.text)}}}),o=e.content.distractors.order.map(r=>{let n=e.content.distractors.blocks[r];return{id:n.id,text:ro(n.text)}});return{...Yc(e),content:{matches:t,distractors:o}}}function v4(e,t){return{id:e.id,type:"mt",data:b4(e),get state(){let r=t.states.matchingQuestionsState.get()[e.id];return r?{correct:r.correct,leftPartsOrder:r.leftPartsOrder,rightPartsOrder:r.rightPartsOrder,matchedPairs:r.matchedPairs}:null},onSubmitted:ms(e.id,t)}}function T4(e,t){return{id:e.id,type:"mr",data:KC(e),get state(){let r=t.states.choicesQuestionsState.get()[e.id];if(!r)return null;let n=r.choices,s=t.states.choicesViewOrderMap.get()[e.id];return{correct:r.correct,choices:s.map(a=>({id:a,selected:n[a]}))}},onSubmitted:ms(e.id,t)}}function w4(e,t){let{questions:o}=t.states.quiz.get(),r=o.blocks[e];if(!r)throw new Error(`Unknown question with id=${e}`);switch(r.type){case"sq":return x4(r,t);case"ti":return _4(r,t);case"mc":return B4(r,t);case"mr":return T4(r,t);case"mt":return v4(r,t);default:I(r)}throw new Error("Unknown question type")}function D4(e){return e.states.questionsViewOrder.get().map(o=>w4(o,e))}function E4(e){let{intro:t}=e.states.quiz.get();return t?{title:ro(t.title),description:ro(t.description),attachment:t.attachment}:null}function R4(e){let t=e.states.sessionState.get();return t==="notStarted"?null:{get questions(){return D4(e)},get quizDuration(){return e.states.timerDuration.get()},get timeSpent(){return e.states.timeSpent.get()},get evaluation(){return S4(t,e)},onCompleted:y4(e)}}function M4(e){return{passingScore:e.states.playerSettings.get().passingScore}}function LC({title:e,model:t}){return{get title(){return e},get intro(){return E4(t)},get session(){return R4(t)},get sessionState(){return t.states.sessionState.get()},get settings(){return M4(t)},get currentSlideId(){let o=t.states.currentSlide.get();return o.type==="question"?o.questionId:o.type},get persistedState(){return JSON.stringify(Wc($C(t)))},onPersistedStateChanged:f4(t),onSlideChanged:h4(t),onSessionChanged:C4(t),onCloseQuiz:g4(t)}}function cr(){return{sessionState:"notStarted",currentSlide:{type:"intro"},typeInQuestionsState:{},choicesQuestionsState:{},sequenceQuestionsState:{},matchingQuestionsState:{},evaluationStartTime:null,evaluationStopTime:null,timeSpentBeforeSession:0,sessionStartTime:null,bestAttempt:null}}function NC(e,t){let o=[];se(e.content,i=>{i.correct&&o.push(i.id)}),o=o.sort();let r=t.choices,n=Object.keys(r).filter(i=>r[i]).sort();return ko(o,n)}function zC(e,t){return ko(e.content.order,t.order)}function wd(e){return e.replace(/\s\s+/g," ").trim()}function jc(e,t){return so(e.answers).some(({text:o})=>{let r=wd(o),n=wd(t);return e.caseSensitive?r===n:r.toUpperCase()===n.toUpperCase()})}function QC(e,t){return e.content.matches.order.every(o=>{let r=e.content.matches.blocks[o],n=t.matchedPairs[r.left.id];return r.right.id===n})}function Gn(e,t){let o={};return se(e.questions,r=>{switch(r.type){case"mc":case"mr":{let n=r.content.order;t.shuffleAnswersEnabled&&(n=Ve(n,i=>xo(i))),o[r.id]=n;break}case"ti":case"sq":case"mt":break;default:I(r)}}),o}function Yn(e,t){let o=e.questions.order;return t.shuffleQuestionsEnabled&&(o=Ve(o,r=>xo(r))),o}function HC(e,{decodedPersistedState:t,quiz:o,playerSettings:r}){let n=cr(),i=e.def("QuizPlayer.States.QuestionsState.TypeInQuestionsState",t?t.typeInQuestionsState:n.typeInQuestionsState),s=e.def("QuizPlayer.States.QuestionsState.ChoicesQuestionsState",t?t.choicesQuestionsState:n.choicesQuestionsState),a=e.def("QuizPlayer.States.QuestionsState.SequenceQuestionsState",t?t.sequenceQuestionsState:n.sequenceQuestionsState),c=e.def("QuizPlayer.States.QuestionsState.MatchingQuestionsState",t?t.matchingQuestionsState:n.matchingQuestionsState),l=e.map("QuizPlayer.States.QuestionsState",{typeInQuestionsState:i,choicesQuestionsState:s,sequenceQuestionsState:a,matchingQuestionsState:c},p=>({...p.typeInQuestionsState,...p.choicesQuestionsState,...p.sequenceQuestionsState,...p.matchingQuestionsState})),m=e.def("QuizPlayer.States.QuestionsState.\u0421hoicesViewOrderMap",t?t.choicesViewOrderMap:Gn(o.get(),r.get())),u=e.def("QuizPlayer.States.QuestionsState.QuestionsViewOrder",t?t.questionsViewOrder:Yn(o.get(),r.get()));return{typeInQuestionsState:i,choicesQuestionsState:s,sequenceQuestionsState:a,matchingQuestionsState:c,questionsState:l,choicesViewOrderMap:m,questionsViewOrder:u}}function UC(e,t){function o(h){e.typeInQuestionsState.mutate(x=>{x[h]=Qc()})}function r({id:h,answer:x}){e.typeInQuestionsState.mutate(B=>{let L=B[h];L.type==="ti"?L.answer=x:R.error('"setTypeInAnswer" action available only for type in question')})}function n(h){e.typeInQuestionsState.mutate(x=>{let B=x[h.id];if(B){let L=h.content;B.correct=jc(L,B.answer),B.submitted=!0}else R.error(`TypeIn question with id=${h.id} state not initialized`)})}function i(h){e.choicesQuestionsState.mutate(x=>{x[h.id]=zc(h)})}function s({questionId:h,choiceId:x}){e.choicesQuestionsState.mutate(B=>{let L=B[h],$=L.choices;if(L.type==="mr")$[x]=!$[x];else if(L.type==="mc"){if($[x])return;for(let z of Object.keys($))$[z]=z===x}else R.error('"toggleChoiceSelection" action available only for choices in questions')})}function a(h){e.choicesQuestionsState.mutate(x=>{let B=x[h.id];B?(B.correct=NC(h,B),B.submitted=!0):R.error(`Choices question with id=${h.id} state not initialized`)})}function c(h){e.sequenceQuestionsState.mutate(x=>{x[h.id]=Uc(h)})}function l({newOrder:h,questionId:x}){e.sequenceQuestionsState.mutate(B=>{let L=B[x];L?L.order=h:R.error(`Selections question with id=${x} state not initialized`)})}function m(h){e.sequenceQuestionsState.mutate(x=>{let B=x[h.id];B?(B.correct=zC(h,B),B.submitted=!0):R.error(`Selections question with id=${h.id} state not initialized`)})}function u(h){e.matchingQuestionsState.mutate(x=>{x[h.id]=Hc(h,t.shuffleAnswersEnabled)})}function p({questionId:h,matchToConnect:x}){e.matchingQuestionsState.mutate(B=>{let L=B[h];if(L.type==="mt"){let{leftPartsOrder:$,rightPartsOrder:z,matchedPairs:ue}=L,Z=$.findIndex(jt=>jt===x.leftId),Je=z.findIndex(jt=>jt===x.rightId);af(z,Z,Je),ue[x.leftId]=x.rightId}else R.error('"connectMatch" action available only for matches in questions')})}function S({questionId:h,leftIdToDisconnect:x}){e.matchingQuestionsState.mutate(B=>{let L=B[h];L.type==="mt"?L.matchedPairs[x]=null:R.error('"disconnectMatch" action available only for matches in questions')})}function b(h){e.matchingQuestionsState.mutate(x=>{let B=x[h.id];B?(B.correct=QC(h,B),B.submitted=!0):R.error(`Matching question with id=${h.id} state not initialized`)})}function y(h){switch(h.type){case"ti":o(h.id);break;case"mc":case"mr":i(h);break;case"sq":c(h);break;case"mt":u(h);break;default:I(h)}}function _(h){switch(h.type){case"ti":n(h);break;case"mc":case"mr":a(h);break;case"sq":m(h);break;case"mt":b(h);break;default:I(h)}}function C(h){e.choicesViewOrderMap.set(h)}function T(h){e.questionsViewOrder.set(h)}return{setTypeInAnswer:r,toggleChoiceSelection:s,changeSequenceOrder:l,connectMatch:p,disconnectMatch:S,initQuestionState:y,answerQuestion:_,setChoicesViewOrderMap:C,setQuestionsViewOrder:T}}function WC(e,{decodedPersistedState:t,questionsState:o,quiz:r,playerSettings:n}){let i=cr(),s=e.def("QuizPlayer.States.Session.SessionState",t?t.sessionState:i.sessionState),a=e.def("QuizPlayer.States.Session.UsedAttempts",t?t.attempts:0),c=t?t.currentSlide:i.currentSlide,l=e.def("QuizPlayer.States.CurrentSlide",c),m=e.def("QuizPlayer.States.QuizClosed",!1),u=e.def("QuizPlayer.States.Session.BestAttempt",t?t.bestAttempt:i.bestAttempt),p=e.map("QuizPlayer.States.QuizScore",{questionsState:o,quiz:r},y=>{let _=0;for(let T of Object.keys(y.questionsState)){let h=y.questionsState[T];h.submitted&&h.correct&&_++}let C=y.quiz.questions.order.length;return C?Math.round(_/C*100):0}),S=e.map("QuizPlayer.States.QuizCompleted",{questionsState:o,quiz:r},y=>{let _=Object.keys(y.questionsState);return _.length!==y.quiz.questions.order.length?!1:_.every(C=>y.questionsState[C].submitted)}),b=e.map("QuizPlayer.States.QuizPassed",{score:p,playerSettings:n},y=>y.score>=y.playerSettings.passingScore);return{sessionState:s,usedAttempts:a,currentSlide:l,bestAttempt:u,quizCompleted:S,quizPassed:b,score:p,quizClosed:m}}function qC(e){function t(i){e.sessionState.set(i)}function o(){e.usedAttempts.set(e.usedAttempts.get()+1)}function r(i){e.currentSlide.set(i)}function n(i){e.bestAttempt.set(i)}return{setSessionState:t,incrementAttempt:o,setCurrentSlide:r,setBestAttempt:n}}function Xc(e){var t;return{...e,bestAttempt:(t=e.bestAttempt)!=null?t:null,sequenceQuestionsState:{},matchingQuestionsState:{}}}function Zc({state:e,version:t}){return nr({document:e,initialVersion:GC,versionFrom:t,versionTo:Gc,upgraders:[{targetVersion:2,upgradeFn:Xc}]}).upgradedDocument}function YC(e,{timeLimitEnabled:t,timerLeftTime:o,evaluationStartTime:r,currentSlide:n}){let i=e.map("QuizPlayer.States.Popups.QuizEndTimePopupOpened",{timeLimitEnabled:t,timerLeftTime:o,currentSlide:n},a=>a.timeLimitEnabled&&a.timerLeftTime===0&&a.currentSlide.type==="question"),s=e.map("QuizPlayer.States.Popups.QuizStartInfoMessageOpened",{timeLimitEnabled:t,evaluationStartTime:r,currentSlide:n},a=>a.timeLimitEnabled&&a.evaluationStartTime==null&&a.currentSlide.type==="question");return{quizEndTimePopupOpened:i,quizStartInfoMessageOpened:s}}function jC(e,{decodedPersistedState:t,playerSettings:o,quizCompleted:r}){let n=cr(),i=e.def("QuizPlayer.States.Timer.EvaluationStartTime",t?t.timerStartTime:n.evaluationStartTime),s=e.def("QuizPlayer.States.Timer.EvaluationStopTime",t?t.timerStopTime:n.evaluationStopTime),a=e.def("QuizPlayer.States.Timer.TimeSpentBeforeSession",t?t.timeSpent:n.timeSpentBeforeSession),c=e.def("QuizPlayer.States.Timer.CurrentTime",Date.now()),l=e.def("QuizPlayer.States.Timer.SessionStartTime",n.sessionStartTime),m=e.map("QuizPlayer.States.QuizTimeLimitEnabled",{playerSettings:o},y=>y.playerSettings.timeLimitEnabled),u=e.map("QuizPlayer.States.Timer.TimeSpent",{sessionStartTime:l,timeSpentBeforeSession:a,currentTime:c},y=>{if(!y.sessionStartTime)return 0;let _=Math.max(y.currentTime-y.sessionStartTime,0);return y.timeSpentBeforeSession+_}),p=e.map("QuizPlayer.States.Timer.TimerDuration",{currentTime:c,evaluationStartTime:i,evaluationStopTime:s},y=>y.evaluationStartTime?y.evaluationStopTime?y.evaluationStopTime-y.evaluationStartTime:y.currentTime-y.evaluationStartTime:0),S=e.map("QuizPlayer.States.Timer.TimerLeftTime",{timerDuration:p,playerSettings:o},y=>y.playerSettings.timeLimitEnabled?Math.max(y.playerSettings.timeLimit-y.timerDuration,0):0),b=e.map("QuizPlayer.States.Timer.CanContinueTimer",{timeLimitEnabled:m,timerLeftTime:S,quizCompleted:r},y=>y.timeLimitEnabled?!y.quizCompleted&&y.timerLeftTime>0:!y.quizCompleted);return{timerLeftTime:S,timeLimitEnabled:m,evaluationStopTime:s,evaluationStartTime:i,currentTime:c,sessionStartTime:l,timeSpentBeforeSession:a,timeSpent:u,timerDuration:p,canContinueTimer:b}}function XC(e,t){let o=e.def("QuizPlayer.States.SubscriptionProduct",t.subscriptionProduct),r=e.def("QuizPlayer.States.WatermarkUrl",t.watermarkUrl),n=e.def("QuizPlayer.States.ShowWatermark",t.showWatermark),i=e.def("QuizPlayer.States.BaseUrl",t.baseUrl),s=e.def("QuizPlayer.States.Quiz",t.quiz),a=e.def("QuizPlayer.States.QuizPlayerSettings",t.settings),c=e.def("QuizPlayer.States.InsertType",t.insertType),l=e.def("QuizPlayer.States.Direction",t.direction),m=t.persistedState?Zc(qc(t.persistedState)):null,u=HC(e,{decodedPersistedState:m,quiz:s,playerSettings:a}),p=WC(e,{decodedPersistedState:m,quiz:s,questionsState:u.questionsState,playerSettings:a}),S=jC(e,{decodedPersistedState:m,playerSettings:a,quizCompleted:p.quizCompleted}),b=YC(e,{timeLimitEnabled:S.timeLimitEnabled,timerLeftTime:S.timerLeftTime,evaluationStartTime:S.evaluationStartTime,currentSlide:p.currentSlide}),y=e.map("QuizPlayer.States.Session",{sessionState:p.sessionState,currentSlide:p.currentSlide,typeInQuestionsState:u.typeInQuestionsState,sequenceQuestionsState:u.sequenceQuestionsState,matchingQuestionsState:u.matchingQuestionsState,choicesQuestionsState:u.choicesQuestionsState,questionsViewOrder:u.questionsViewOrder,choicesViewOrderMap:u.choicesViewOrderMap,evaluationStartTime:S.evaluationStartTime,evaluationStopTime:S.evaluationStopTime,timeSpentBeforeSession:S.timeSpentBeforeSession,sessionStartTime:S.sessionStartTime,bestAttempt:p.bestAttempt},C=>C),_=e.map("QuizPlayer.States.Player",{attempts:p.usedAttempts,quiz:s,playerSettings:a,session:y,subscriptionProduct:o,direction:l,watermarkUrl:r,showWatermark:n},C=>C);return{quiz:s,playerSettings:a,subscriptionProduct:o,direction:l,watermarkUrl:r,showWatermark:n,baseUrl:i,insertType:c,...S,...p,...u,...b,session:y,player:_}}var I4=500;function ZC(e){function t(r){e.sessionStartTime.set(r);let n=e.evaluationStartTime.get()||r;e.evaluationStartTime.set(n),e.currentTime.set(n)}function o(){let r=setInterval(()=>{let n=e.canContinueTimer.get(),i=Date.now();e.currentTime.set(i),n||(clearInterval(r),e.evaluationStopTime.set(i))},I4)}return{setSessionStartTime:t,startTimer:o}}function JC(e){let t=qC(e),o=UC(e,e.playerSettings.get()),r=ZC(e);function n(h){e.quiz.set(h),c()}function i(h){if(h.type==="question"){let x=h.questionId;if(!e.questionsState.get()[x]){let $=e.quiz.get().questions.blocks[x];if(!$){R.error(`Unknown question id=${x}`);return}o.initQuestionState($)}}t.setCurrentSlide(h)}function s(){e.quizClosed.set(!0)}function a(){let h=e.currentSlide.get();if(h.type!=="question"){R.error('"submitQuestion" action available only for questions');return}let{showCorrectAnswersEnabled:x,showFeedbackEnabled:B}=e.playerSettings.get(),L=h.questionId,z=e.questionsState.get()[L],{questions:ue}=e.quiz.get(),Z=ue.blocks[L];if(z.submitted){R.error(`Question with id=${L} already submitted`);return}o.answerQuestion(Z),!x&&!B&&m()}function c(){DC(()=>{let h=e.quiz.get(),x=e.playerSettings.get(),B=Yn(h,x),L=Gn(h,x),$=cr();e.sessionState.set($.sessionState),e.currentSlide.set($.currentSlide),e.typeInQuestionsState.set($.typeInQuestionsState),e.choicesQuestionsState.set($.choicesQuestionsState),e.sequenceQuestionsState.set($.sequenceQuestionsState),e.matchingQuestionsState.set($.matchingQuestionsState),e.questionsViewOrder.set(B),e.choicesViewOrderMap.set(L),e.evaluationStartTime.set($.evaluationStartTime),e.evaluationStopTime.set($.evaluationStopTime),e.timeSpentBeforeSession.set($.timeSpentBeforeSession),e.sessionStartTime.set($.sessionStartTime)}),p()}function l(){let h=e.currentSlide.get();if(h.type==="question"){let $=e.questionsState.get()[h.questionId];if(!$)throw new Error("Current question must have state");$.submitted||a()}t.setSessionState("completed");let x=e.score.get(),B=e.bestAttempt.get();(B===null||x>B)&&t.setBestAttempt(x)}function m(){var B;let h=e.currentSlide.get(),x=e.questionsViewOrder.get();switch(h.type){case"intro":{let[L]=x;L&&i({type:"question",questionId:L})}break;case"results":R.error('"gotoNextSlide" action not available in results slide');break;case"question":{let L=h.questionId,$=x.findIndex(z=>z===L);if($>=0&&$<x.length-1){let z=x[$+1];i({type:"question",questionId:z})}else(B=e.quiz.get().results)!=null&&B.visible&&i({type:"results"})}break;default:I(h)}}function u(){let h=e.currentSlide.get(),{showCorrectAnswersEnabled:x,showFeedbackEnabled:B}=e.playerSettings.get();if(h.type==="question"){let $=e.questionsState.get()[h.questionId].submitted;!x&&!B&&$&&m()}}function p(){var B,L;let h=e.currentSlide.get().type,x=e.quiz.get();h==="intro"&&!((B=x.intro)!=null&&B.visible)&&T(),h==="results"&&!((L=x.results)!=null&&L.visible)&&s()}function S(h){e.timeLimitEnabled.get()&&h===0&&l()}function b(){p(),u();let h=e.timerLeftTime.get();S(h)}function y(){e.timeLimitEnabled.get()||(r.setSessionStartTime(Date.now()),r.startTimer())}function _(){e.timeLimitEnabled.get()&&(r.setSessionStartTime(Date.now()),r.startTimer())}function C(){if(e.sessionState.get()!=="inProgress")return;e.canContinueTimer.get()&&(r.setSessionStartTime(Date.now()),r.startTimer())}function T(){e.quiz.get().questions.order.length&&(y(),t.incrementAttempt(),t.setSessionState("inProgress"),m())}return{initQuizPlayer:b,resetQuiz:n,startQuiz:T,closeQuiz:s,restartQuiz:c,gotoSlide:i,gotoNextSlide:m,submitQuestion:a,...t,...o,...r,resumeEvaluation:C,startEvaluation:y,startEvaluationWithLimit:_,checkTimeIsUp:S}}function eS(e,t,o){e.effect("onTimerLeftTime",{timerLeftTime:t.timerLeftTime},r=>{o.checkTimeIsUp(r.timerLeftTime)}),e.effect("onQuizCompleted",{quizCompleted:t.quizCompleted,score:t.score,bestAttempt:t.bestAttempt},r=>{r.quizCompleted&&(o.setSessionState("completed"),(r.bestAttempt===null||r.score>r.bestAttempt)&&o.setBestAttempt(r.score))})}var tS=vt({});function oS(e,t){let o=IC({name:"QuizPlayer.Model",getStates:n=>XC(n,t),getActions:JC,defEffects:eS}),r=Q(()=>LC({title:t.title,model:o}),[o,t.title]);return e.setContext(tS,o),t.initApi(r),A(()=>{let n=!1?o.states.player.subscribe(()=>{if(window.localStorage){let i=AC(o.states.quiz.get());window.localStorage.setItem(i,r.persistedState)}}):()=>{};return t.initApi(r),o.actions.initQuizPlayer(),t.persistedState&&o.actions.resumeEvaluation(),n},[r,r.persistedState,o.actions,o.states.player,o.states.quiz,t,t.persistedState]),o}function U(){return Ie(tS)}var FC=qn,GC=1,Gc=2;function $C(e){return{sessionState:e.states.sessionState.get(),attempts:e.states.usedAttempts.get(),timerStartTime:e.states.evaluationStartTime.get(),timerStopTime:e.states.evaluationStopTime.get(),questionsViewOrder:e.states.questionsViewOrder.get(),choicesViewOrderMap:e.states.choicesViewOrderMap.get(),typeInQuestionsState:e.states.typeInQuestionsState.get(),sequenceQuestionsState:e.states.sequenceQuestionsState.get(),choicesQuestionsState:e.states.choicesQuestionsState.get(),matchingQuestionsState:e.states.matchingQuestionsState.get(),currentSlide:e.states.currentSlide.get(),timeSpent:e.states.timeSpent.get(),bestAttempt:e.states.bestAttempt.get()}}var Bt={create(e){let t={},o={},r={},n={};return se(e.state.questions,i=>{switch(i.type){case"ti":o[i.id]=Qc();break;case"mc":case"mr":t[i.id]=zc(i);break;case"sq":r[i.id]=Uc(i);break;case"mt":n[i.id]=Hc(i,e.settings.main.shuffleAnswersEnabled);break;default:I(i)}}),{key:e.key,type:g.QUIZ,quizData:e,attempts:0,timeSpent:0,timerStartTime:null,timerStopTime:null,sessionState:"notStarted",currentSlide:{type:"intro"},typeInQuestionsState:o,choicesQuestionsState:t,sequenceQuestionsState:r,matchingQuestionsState:n,questionsViewOrder:Yn(e.state,e.settings.main),choicesViewOrderMap:Gn(e.state,e.settings.main),bestAttempt:null}},toQuizState(e){return e.type!==g.QUIZ?null:e}};function A4(e){let t=[];for(let o of e){let r=at.toQuizBlock(o);r&&t.push(Bt.create(r))}return t}var rS={create(e=[]){return{blockMap:K.createBlocks(e),blocksState:A4(e)}}};var nS={create(e={}){return{title:e.title||"",subtitle:e.subtitle||""}}};var iS={create(e){return{key:e.key,header:e.header,contentState:e.contentState,index:e.index||0,progress:e.progress||0,continueButtonKey:""}}};var sS={create(e={}){return{title:e.title||"",kicker:e.kicker||"",coverInfo:e.coverInfo||null}}};var aS={create(e){return{key:e.key,header:e.header,contentState:e.contentState,index:-1,progress:e.progress||0,continueButtonKey:""}}};function P4(e,t){let o=t+1;return e[o]||null}var Ee={sections(e){return[e.intro,...e.chapters]},nextSection(e){return P4(e.chapters,e.selectedSectionIndex)},selectedSection(e){let t=e.selectedSectionIndex;return t==-1?e.intro:e.chapters[t]},getContinueButtons(e){let t=this.selectedSection(e),o=[];return be.forEach(t.contentState.blockMap,r=>{let n=Re.toContinueBlock(r);n&&o.push(n)}),o},getLastContinueButtonKey(e){let t=this.getContinueButtons(e);return t.length?t[t.length-1].key:null},create(e,t){return{intro:e,chapters:t,selectedSectionIndex:-1,navigationPanelShowed:!1}}};function cS(e){let t=[];for(let o of e.blockMap.order)t.push(e.blockMap.blocks[o]);return rS.create(t)}function O4(e){let t={kicker:e.header.kicker,title:e.header.title,coverInfo:e.header.coverInfoState};return e.header.coverInfoState&&(t.coverInfo={src:e.header.coverInfoState.src,width:e.header.coverInfoState.width,height:e.header.coverInfoState.height,color:e.header.coverInfoState.color,opacity:e.header.coverInfoState.opacity}),aS.create({key:e.key,header:sS.create(t),contentState:cS(e.contentState)})}function V4(e){return e.order.map((t,o)=>{let r=e.blocks[t];return iS.create({key:r.key,index:o,header:nS.create({title:r.header.title,subtitle:r.header.subtitle}),contentState:cS(r.contentState)})})}function lS(e){let t=O4(e.intro),o=V4(e.chapters);return Ee.create(t,o)}function F4(e,t){return{...e,...t}}function mS(e,t){for(let o of t){let r=e.findIndex(s=>o.key===s.key),n=e[r];if(r===-1||!n)continue;let i=Bt.toQuizState(n);if(i){e[r]=F4(i,o);continue}throw new Error(`Unexpected block state type: ${n.type}`)}}function Dd(e,t){let{intro:o,chapters:r,selectedChapter:n}=t;if(o){let{progress:i,blocksState:s,continueButtonKey:a}=o;typeof i=="number"&&(e.intro.progress=i),a&&(e.intro.continueButtonKey=a),s&&mS(e.intro.contentState.blocksState,s)}r&&e.chapters.forEach((i,s)=>{let a=d(r)[s],{progress:c,blocksState:l,continueButtonKey:m}=a;c&&(i.progress=c),m&&(i.continueButtonKey=m),l&&mS(i.contentState.blocksState,l)}),typeof n=="number"&&n>=0&&(e.selectedSectionIndex=n)}var uS={...Wn,_:"b",key:"k",type:"t"},dS={intro:{_:"i",progress:"p",blocksState:uS,continueButtonKey:"c"},chapters:{_:"c",progress:"p",blocksState:uS,continueButtonKey:"c"},selectedChapter:"s"};var pS={...qn,_:"b",key:"k",type:"t"},fS={intro:{_:"i",progress:"p",blocksState:pS,continueButtonKey:"c"},chapters:{_:"c",progress:"p",blocksState:pS,continueButtonKey:"c"},selectedChapter:"s"};function hS(e){switch(e){case 1:return dS;case 2:return fS;default:throw Error(`cannot decode ResumeState with version ${e}`)}}function gS(e,t){let o=_o(e,ya),r=hS(t);return mo(o,r,[])}function yS(e,t){let o=hS(t),r=Ft(e,o,[]);return _o(r,gn)}function CS(e){return e.replace(/(["'])/g,"\\$1")}function SS(e){return e.replace(/\\(["'])/g,"$1")}function _S(e){let t=Bt.toQuizState(e);return t?{...t,...Xc(t)}:e}function kS(e){return Ks({...e,intro:e.intro&&{...e.intro,blocksState:e.intro.blocksState&&e.intro.blocksState.map(_S)},chapters:e.chapters&&e.chapters.map(t=>({...e.chapters,blocksState:t.blocksState&&t.blocksState.map(_S)}))},t=>!!t)}function Jc({resumeState:e,version:t}){return nr({document:e,initialVersion:1,versionFrom:t,versionTo:2,upgraders:[{targetVersion:2,upgradeFn:kS}]}).upgradedDocument}function bS(e){let t=e.length;if(!t)return 0;let o=0;for(;--t%4>1&&e.charAt(t)==="=";)++o;return Math.ceil(e.length*3)/4-o}var K4=new Array(64),vS=new Array(123);for(let e=0;e<64;)vS[K4[e]=e<26?e+65:e<52?e+71:e<62?e-4:e-59|43]=e++;var BS="invalid encoding";function TS(e,t,o=0){let r=o,n=0,i;for(let s=0;s<e.length;){let a=e.charCodeAt(s++);if(a===61&&n>1)break;if((a=vS[a])===void 0)throw Error(BS);switch(n){case 0:i=a,n=1;break;case 1:t[o++]=i<<2|(a&48)>>4,i=a,n=2;break;case 2:t[o++]=(i&15)<<4|(a&60)>>2,i=a,n=3;break;case 3:t[o++]=(i&3)<<6|a,n=0;break}}if(n===1)throw Error(BS);return o-r}function wS(e,t){let o=new Uint8Array(bS(e));TS(e,o);let r=new Uint32Array(o.buffer.slice(0,Uint32Array.BYTES_PER_ELEMENT))[0],n=new Uint8Array(o.buffer.slice(Uint32Array.BYTES_PER_ELEMENT)),{Type:i}=t(r),s=i.decode(n);return i.toObject(s)}var{Int:L4,Bool:el,String:jn}=yt,DS=N({key:jn(1),selected:el(2)}),$4=N({choicesState:te(1,DS)}),N4=N({choicesState:te(1,DS)}),z4=N({answer:jn(1)}),Q4=N({key:jn(1),answered:el(2),contentState:W(3,$4)}),H4=N({key:jn(1),answered:el(2),contentState:W(3,N4)}),U4=N({key:jn(1),answered:el(2),contentState:W(3,z4)}),W4=Mt({mc:Q4,mr:H4,ti:U4}),ES=N({key:jn(1),selectedQuestionIndex:L4(2),questionsState:te(3,W4)});var{Float:RS,Int:q4,String:MS}=yt,IS=Mt({[g.EXERCISE]:ES}),G4=N({intro:W(1,{progress:ce(1,RS),blocksState:te(2,IS),continueButtonKey:ce(3,MS)}),chapters:te(2,{progress:ce(1,RS),blocksState:te(2,IS),continueButtonKey:ce(3,MS)}),selectedChapter:ce(3,q4)}),AS=new jo(G4);var PS={create(e){let t=[],o=t.length>0?0:-1;return{key:e.key,type:g.QUIZ,exercise:e,questionsState:t,selectedQuestionIndex:o}},toExerciseState(e){return e.type!==g.EXERCISE?null:e}};function Y4({questionState:e,questionData:t,choicesQuestionsState:o,choicesViewOrderMap:r}){if(e.type!=="mr"&&e.type!=="mc")return;let i=e.contentState.choicesState;if(!i)return;let s=so(t.content).filter(u=>u.correct),a=[],c={},l=[];i.forEach(u=>{a.push(u.key),c[u.key]=u.selected,u.selected&&l.push(u.key)});let m=e.answered&&s.length===l.length&&s.every(u=>c[u.id]);o[e.key]={type:e.type,correct:m,submitted:e.answered,choices:c},r[e.key]=a}function j4({questionState:e,questionData:t,typeInQuestionsState:o}){let r=e.contentState,n=jc(t.content,r.answer);o[e.key]={type:"ti",correct:n,submitted:e.answered,answer:r.answer}}function X4(e,t){let{questionsState:o,selectedQuestionIndex:r,key:n}=e,i=[],s={},a={},c={};return o.forEach(l=>{i.push(l.key);let m=t.state.questions.blocks[l.key];m&&((l.type==="mr"||l.type==="mc")&&(m.type==="mr"||m.type==="mc")?Y4({questionState:l,questionData:m,choicesQuestionsState:a,choicesViewOrderMap:c}):m.type==="ti"&&j4({questionState:l,questionData:m,typeInQuestionsState:s}))}),{key:n,type:g.QUIZ,attempts:0,timeSpent:0,timerStartTime:null,timerStopTime:null,sessionState:"inProgress",currentSlide:{type:"question",questionId:o[r].key},typeInQuestionsState:s,choicesQuestionsState:a,questionsViewOrder:i,choicesViewOrderMap:c,bestAttempt:null}}function OS(e,t){return e.map(o=>{let r=PS.toExerciseState(o),n=at.toQuizBlock(t.blocks[o.key]);return r&&n?X4(o,n):o})}function VS(e,t){let o=e.intro?{...e.intro,blocksState:e.intro.blocksState&&OS(e.intro.blocksState,t.intro.contentState.blockMap)}:void 0,r=e.chapters?e.chapters.map((n,i)=>{let s=t.chapters[i];return{...n,blocksState:n.blocksState&&OS(n.blocksState,s.contentState.blockMap)}}):void 0;return{...e,intro:o,chapters:r}}function FS(e,t){let o=wS(e,()=>AS),r=VS(o,t);return Jc({resumeState:r,version:1})}function KS(e,t){let o=lS(e.content);if(t)try{let{version:r,state:n}=JSON.parse(SS(t)),i=yS(n,r),s=Jc({resumeState:i,version:r});return Dd(o,s),o}catch(r){Z4(o,t)}return o}function Z4(e,t){try{let o=FS(t,e);Dd(e,o)}catch(o){R.warn(o)}}function J4(e){return{key:e.key,type:g.QUIZ,sessionState:e.sessionState,attempts:e.attempts,currentSlide:e.currentSlide,typeInQuestionsState:e.typeInQuestionsState,choicesQuestionsState:e.choicesQuestionsState,sequenceQuestionsState:e.sequenceQuestionsState,matchingQuestionsState:e.matchingQuestionsState,questionsViewOrder:e.questionsViewOrder,choicesViewOrderMap:e.choicesViewOrderMap,timeSpent:e.timeSpent,timerStartTime:e.timerStartTime,timerStopTime:e.timerStopTime,bestAttempt:e.bestAttempt}}function LS(e){return e.map(t=>{let o=Bt.toQuizState(t);if(o)return J4(o);throw new Error(`Unexpected block state type: ${t.type}`)})}function $S(e){return{intro:{progress:e.intro.progress,blocksState:LS(e.intro.contentState.blocksState),continueButtonKey:e.intro.continueButtonKey},chapters:e.chapters.map(t=>({progress:t.progress,blocksState:LS(t.contentState.blocksState),continueButtonKey:t.continueButtonKey})),selectedChapter:e.selectedSectionIndex}}function ew(e){let t=e.state;return{type:"mc",selectedChoiceId:t?t.selectedChoiceId:null}}function tw(e){let t=e.state;return t?{type:"mr",choices:t.choices.map(o=>({id:o.id,selected:o.selected}))}:{type:"mr",choices:e.data.content.map(o=>({id:o.id,selected:!1}))}}function ow(e){let t=e.state;return{type:"ti",answer:t?t.answer:""}}function rw(e){return{type:"sq",sequence:d(e.state).order}}function nw(e){return{type:"mt",matches:d(e.state).matchedPairs}}function Ed(e){let t,o=e.type;switch(o){case"mc":t=ew(e);break;case"mr":t=tw(e);break;case"ti":t=ow(e);break;case"sq":t=rw(e);break;case"mt":t=nw(e);break;default:throw I(o,`unknown question type ${o}`),Error()}return JSON.stringify(t)}var NS=1;function iw(e){let t=d(e.evaluation),o=Ii(t.maxScore/e.questions.length,NS);return e.questions.map(r=>{let n=r.state;return n?{questionId:r.id,correct:n.correct,score:n.correct?o:0,maxScore:o,data:Ed(r)}:{questionId:r.id,correct:!1,score:0,maxScore:o,data:Ed(r)}})}function zS(e,t){let o=d(e.evaluation),r={version:1,attemptDate:Date.now(),timeSpent:e.timeSpent,evaluation:{passingScore:t.passingScore,maxScore:o.maxScore,quizPassed:o.quizPassed,score:Ii(o.score,NS)},answers:iw(e)};return JSON.stringify(r)}function QS(e){let t=Pt(),o=i=>{i.onCompleted.add(()=>{let s=d(e.session);t.dispatch({result:zS(s,e.settings),duration:s.quizDuration})})},r=()=>{let i=e.onSessionChanged.add(()=>{let s=e.session;s&&o(s),i()})},n=e.session;return n?o(n):r(),t}var tl=class{constructor({longreadMainSettings:t,updateQuizState:o,onQuizToGradeCompleted:r,onQuizStatisticChange:n}){this._longreadMainSettings=t,this._onQuizStatisticChange=n,this._updateQuizState=o,this._onQuizToGradeCompleted=r,this._quizKeyToApiMap=new Map,this._quizKeyToUnsubs=new Map}setApi({quizBlockKey:t,quizId:o,isGraded:r,api:n}){let i=this._quizKeyToApiMap.get(t);if(i){if(i===n)return;d(this._quizKeyToUnsubs.get(t)).forEach(c=>c())}let s=QS(n);this._quizKeyToApiMap.set(t,n),this._quizKeyToUnsubs.set(t,ln([n.onPersistedStateChanged.add(()=>this._onQuizPersistedStateChanged(t,n)),r&&!!o&&s.add(a=>this._onQuizStatisticChangedHandler(n,o,a))]))}_onQuizStatisticChangedHandler(t,o,r){var i;let n=this._longreadMainSettings.grade;if(n.mode==="gradeByQuiz"&&n.quizToGradeId===o){let s=(i=t.session)==null?void 0:i.evaluation;s&&this._onQuizToGradeCompleted({passed:s.quizPassed,score:s.score})}this._onQuizStatisticChange.dispatch({...r,quizId:o})}_onQuizPersistedStateChanged(t,o){let r=Zc(qc(JSON.parse(o.persistedState)));this._updateQuizState(t,r)}};var ol=class{constructor(t){this.chaptersCount=t.main.chaptersCount,this.navigationType=t.main.navigationType,this.longreadType=t.main.longreadType,this.searchEnabled=!1,this.numberingEnabled=t.main.numberingEnabled,this.nextButtonEnabled=t.main.nextButtonEnabled,this.copyingEnabled=t.main.copyingEnabled,this.fonts={tooltip:Vi(we.LATO),playerMain:Vi(t.design.headerFont),content:Vi(t.design.contentFont)}}};function no({reducer:e,timingFn:t,duration:o,abortSignal:r,beforeAnimation:n,afterAnimation:i}){let s=Date.now(),a=!1,c=new He;function l(){if(a)return;let u=_t(Date.now()-s,0,o),p=t(u/o);e.animate(p),u<o?tt(l):(i&&i(),r&&r.remove(m),c.dispatch(!0),tt(()=>{e.complete()}))}n&&n(),tt(l);function m(){a=!0,d(r).remove(m),c.dispatch(!1)}return r&&r.add(m),c}function HS(e){return e}function ho(e){return--e*e*e+1}function Rd(e,t){return o=>o<t?0:e((o-t)/(1-t))}function rl(e){return t=>1-e(t)}function sw({setScrollValue:e,initialValue:t,delta:o,duration:r}){if(!o)return;no({duration:r,timingFn:ho,reducer:{animate:i=>{e(t+o*i)},complete:()=>{},changedProperties:[]}})}function US({element:e,container:t,duration:o,scrollDirection:r,bounds:n}){let i=e.getBoundingClientRect(),s=0;r==="top"&&n.top>i.top?s=i.top-n.top:r==="bottom"&&n.bottom<i.bottom&&(s=i.bottom-n.bottom),sw({initialValue:t.scrollTop,setScrollValue:a=>{t.scrollTop=a},delta:s,duration:o})}var Md="id";var WS="comp";function ne(e){if(e)return typeof e=="string"&&(e={[Md]:e}),Object.entries(e).filter(([t,o])=>br(o)).map(([t,o])=>`${t}=${o}`).join(";")}function Gr(e,t){let o=window.getComputedStyle(e),r=o&&o.opacity?parseFloat(o.opacity):1;return{animate:n=>{e.style.opacity=`${r-r*n}`},complete:()=>{e.style.opacity=t||""},changedProperties:["opacity"]}}function nl(e){return{animate:t=>{e.forEach(o=>o.animate(t))},complete:()=>{e.forEach(t=>t.complete())},changedProperties:[]}}function aw({element:e,initialTransform:t,from:o,to:r}){let{x:n,y:i}=da(e),s=o.x||n,a=o.y||i,c=0,l=0;r.x!==void 0&&(c=r.x-s),r.y!==void 0&&(l=r.y-a);let m=null;return{animate:u=>{m==null&&(m=ua(e)),e.style.transform=`${m} translate(${c*u}px, ${l*u}px)`},complete:()=>{e.style.transform=t||""},changedProperties:["transform"]}}function qS({element:e,initialTransform:t,from:o,to:r}){return aw({element:e,initialTransform:t,from:{y:o},to:{y:r}})}var cw=50;function il(e,t){return{animate:o=>{e.style.transform=`translateY(${cw*o}px)`},complete:()=>{e.style.transform=""},changedProperties:["transform"]}}function lr(e){let[t,o]=j(()=>({width:0,height:0}));return A(()=>{let r=d(e.current),n=new ResizeObserver(([i])=>{o(i.contentRect)});return n.observe(r),()=>{n.disconnect()}},[e]),[t.width,t.height]}var lw=[];function sl(e,t=lw){let[o,r]=j(!1),[n,i]=j(!1),[s,a]=lr(e);return A(()=>{let c=e.current.scrollWidth>e.current.clientWidth;c!=o&&r(c);let l=e.current.scrollHeight>e.current.clientHeight;l!=n&&i(l),Ws(s,a,...t)},[e,o,n,s,a,t]),[o,n]}function al(e,t){let[o]=sl(e,t);return o}function V(){return P()}function mr(){return P()}function us({elementSize:e={width:0,height:0},popoverSize:t,side:o,align:r,offsetX:n=0,offsetY:i=0}){let s={x:0,y:0};switch(o){case"top":s.y=-t.height-i;break;case"bottom":s.y=e.height+i;break;case"left":s.x=-t.width-n;break;case"right":s.x=e.width+n;break;default:I(o)}switch(r){case"start":switch(o){case"top":case"bottom":s.x=n;break;case"right":case"left":s.y=i;break;default:I(o)}break;case"center":switch(o){case"top":case"bottom":s.x=(e.width-t.width)/2;break;case"right":case"left":s.y=(e.height-t.height)/2;break;default:I(o)}break;case"end":switch(o){case"top":case"bottom":s.x=e.width-t.width-n;break;case"right":case"left":s.y=e.height-t.height-i;break;default:I(o)}break;default:I(r)}return s}function Id(e,t,o){let r=0;switch(e){case"top":r=o.top-t.top;break;case"right":r=t.right-o.right;break;case"bottom":r=t.bottom-o.bottom;break;case"left":r=o.left-t.left;break;default:I(e)}return Math.max(0,r)}function Ad(e,t,o,r){let n=0;switch(t){case"start":switch(e){case"top":case"bottom":n=o.right-r.right;break;case"right":case"left":n=o.bottom-r.bottom;break;default:I(e)}break;case"center":switch(e){case"top":case"bottom":n=Math.max(o.right-r.right,r.left-o.left);break;case"right":case"left":n=Math.max(o.bottom-r.bottom,r.top-o.top);break;default:I(e)}break;case"end":switch(e){case"top":case"bottom":n=r.left-o.left;break;case"right":case"left":n=r.top-o.top;break;default:I(e)}break;default:I(t)}return Math.max(0,n)}function Pd(e){switch(e){case"top":return"bottom";case"right":return"left";case"bottom":return"top";case"left":return"right";default:throw I(e),new Error}}function Od(e){switch(e){case"start":return"end";case"center":throw new Error;case"end":return"start";default:throw I(e),new Error}}function GS(e,t,o){switch(e){case"top":case"bottom":if(t.right>=o.right)return"end";if(t.left<=o.left)return"start";break;case"right":case"left":if(t.bottom>o.bottom)return"end";if(t.top<o.top)return"start";break;default:I(e)}return"center"}function YS(e,t){switch(e){case"right":case"left":return{side:Pd(e),align:t};case"top":case"bottom":return{side:e,align:t==="center"?t:Od(t)};default:throw I(e),new Error}}var Y=(e,t,o)=>{let r=P(o);r.current=o;let n=o===null;A(()=>{if(n)return;let i=St(e.current,t,s=>d(r.current)(s));return()=>zt(i)},[e,t,n])};function go(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.707 5.707a1 1 0 0 0-1.414-1.414L10 8.586 5.707 4.293a1 1 0 0 0-1.414 1.414L8.586 10l-4.293 4.293a1 1 0 1 0 1.414 1.414L10 11.414l4.293 4.293a1 1 0 0 0 1.414-1.414L11.414 10l4.293-4.293z" fill="currentColor"/></svg>
`}function jS(e,t){X(()=>{for(let o in t)t.hasOwnProperty(o)&&e.current.setAttributeNS(null,o,t[o].toString())},[e,...Object.keys(t),...Object.keys(t).map(o=>t[o])])}function fe(e){let t=P();return t.current=e,t}var Yr=8;function cl(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left";default:throw I(e),new Error}}function mw(e){switch(e){case"start":return"end";case"center":return"center";case"end":return"start";default:throw I(e),new Error}}function ur(e){switch(e){case"start":return 0;case"center":return-.5;case"end":return-1;default:throw I(e),new Error}}function uw(e,t){switch(e){case"top":return{x:ur(t),y:-1};case"bottom":return{x:ur(t),y:0};case"left":return{x:-1,y:ur(t)};case"right":return{x:0,y:ur(t)};default:throw I(e),new Error}}function dw(e,t){switch(e){case"top":return{x:-ur(t),y:0};case"bottom":return{x:-ur(t),y:1};case"left":return{x:0,y:-ur(t)};case"right":return{x:1,y:-ur(t)};default:throw I(e),new Error}}function Vd({component:e,overlaySize:t,side:o,align:r,offset:n}){let i=xn(e),s=Dr(Pi(t),uw(o,r)),a=Dr(Pi(i),dw(o,r)),c=To(wr(e),s);return c=To(c,n),c=To(c,a),c}function Fd(e){switch(e.side){case"top":case"bottom":return Dr(e.offset,{x:1,y:-1});case"left":case"right":return Dr(e.offset,{x:-1,y:1});default:throw I(e.side),new Error}}function XS(e,t,o){function r([n,i],[s,a]){return s<n||i<a}switch(e){case"top":case"bottom":return r([t.top,t.bottom],[o.top,o.bottom]);case"left":case"right":return r([t.left,t.right],[o.left,o.right]);default:throw I(e),new Error}}function pw({viewPort:e,component:t,overlaySize:o,side:r,align:n,offset:i}){return XS(r,e,Eo(Vd({side:r,component:t,overlaySize:o,align:n,offset:i}),o))&&!XS(cl(r),e,Eo(Vd({side:cl(r),component:t,overlaySize:o,align:n,offset:Fd({side:r,offset:i})}),o))}function fw({side:e,viewPort:t,overlay:o}){let r=([n,i],[s,a])=>{n+=Yr,i-=Yr;let c=a-s;return Math.max(n,Math.min(i,a)-c)};switch(e){case"top":case"bottom":return{x:r([t.left,t.right],[o.left,o.right]),y:o.top};case"left":case"right":return{x:o.left,y:r([t.top,t.bottom],[o.top,o.bottom])};default:throw I(e),new Error}}function hw(e,t,o){let r=dn()?gw(e,t):{side:e,align:t},n=r.side===e?o:Fd({side:r.side,offset:o});return{side:r.side,align:r.align,offset:n}}function Kd(e){let t=hw(e.side,e.align,e.offset);return e.side=t.side,e.align=t.align,e.offset=t.offset,pw(e)?cl(e.side):e.side}function ZS(e){let t=Kd(e);return fw({viewPort:e.viewPort,side:t,overlay:Eo(Vd({...e,offset:t===e.side?e.offset:Fd(e),side:t}),e.overlaySize)})}function gw(e,t){switch(e){case"right":case"left":return{side:cl(e),align:t};case"top":case"bottom":return{side:e,align:t==="center"?t:mw(t)};default:throw I(e),new Error}}var yw={pointer:{withMods:e=>__getCssClass("x0bad2__pointer",e)}},ll=22;function Cw({targetRect:e,hintRect:t}){if(t.left>=e.right)return"right";if(t.right<=e.left)return"left";if(t.top>=e.bottom)return"bottom";if(t.bottom<=e.top)return"top";throw new Error("Never")}function Sw({hintSide:e,hintRect:t,targetRect:o}){let r=Uh(o);switch(e){case"left":case"right":return r.y-t.top-ll/2;case"top":case"bottom":return r.x-t.left-ll/2;default:throw I(e),new Error}}function _w({hintSide:e,shift:t}){let o={left:"",right:"",top:"",bottom:""},r=H(e,{left:"top",right:"top",top:"left",bottom:"left"});return{...o,[e]:"calc(100% - 2px)",[r]:`${t}px`}}function kw(e){return H(e,{left:"translateX(-6px) translateY(6px) rotate(90deg)",right:"translateX(6px) translateY(6px) rotate(-90deg)",top:"scaleY(-1)",bottom:""})}function JS(e,{color:t,getHintRect:o,getTargetRect:r}){let n=P(),i=fe(o),s=fe(r);return jS(n,{width:ll,height:10,viewBox:`0 0 ${ll} 10`}),A(()=>{let a=i.current(),c=s.current(),l=Cw({hintRect:a,targetRect:c}),m=Sw({hintSide:l,hintRect:a,targetRect:c}),u=_w({hintSide:l,shift:m});n.current.style.left=u.left,n.current.style.right=u.right,n.current.style.top=u.top,n.current.style.bottom=u.bottom,n.current.style.transform=kw(l)},[i,s,n]),e`
<svg
	xmlns="http://www.w3.org/2000/svg"
	save-ref=${n}
	class=${yw.pointer.withMods({color:t})}
>
	<path
		fill-rule="evenodd"
		clip-rule="evenodd"
		d="M10 0C13 0 15.9999 8 20 8H0C3.9749 8 7 0 10 0Z"
	/>
	<rect x="0" y="8" width="20" height="2"></rect>
</svg>
`}var ml={tooltip:{withMods:e=>__getCssClass("x17c2d__tooltip",e)},content:"x17c2d__content",closeButton:"x17c2d__close-button",text:"x17c2d__text"};function ul(e,t){let o=V(),{onClose:r=null,getPointerTargetRect:n,size:i="small",type:s="default",autotestData:a}=t,c=V();Y(c,"mousedown",m=>m.stopPropagation());let l=t.contentType==="text"?f(Bw,t.text):t.content;return Y(o,"mousedown",r),e`
<div class=${ml.tooltip.withMods({type:s,text:t.contentType==="text",size:i})}
	save-ref=${c}
	data-at=${ne(a)}
>
	${e.renderIf(JS,()=>n&&{color:xw(s),getTargetRect:n,getHintRect:()=>c.current.getBoundingClientRect()})}
	${e(l,ml.content)}
	${e.renderIf(go,()=>!!r,{className:ml.closeButton,ref:o})}
</div>`}function xw(e){return H(e,{default:"dark",onboarding:"purple"})}function Bw(e,t){return e`<div class=${ml.text}>${t}</div>`}function bw(e,t,o,r){e.current!==void 0&&(clearTimeout(e.current),e.current=void 0),r<=0?t(o):e.current=setTimeout(()=>{e.current=void 0,t(o)},r)}function Xn(e){let[t,o]=j(typeof e=="function"?e:()=>e),r=P(void 0),n=O((i,s)=>bw(r,a=>o(a),i,s),[]);return[t,n]}var vw=!1;function e_({propName:e,defaultValue:t,units:o,element:r,getCurrentValue:n}){let i=window.getComputedStyle(r),s=i&&i.getPropertyValue(e),a=s?parseFloat(s):t,c=r.style.getPropertyValue(e);return{animate:l=>{r.style.setProperty(e,`${n(l,a)}${o||""}`)},complete:()=>{r.style.setProperty(e,c)},changedProperties:[e]}}function Tw(e,t){return e_({propName:"opacity",defaultValue:1,element:e,getCurrentValue:t})}function ww(e,t){return e_({propName:"max-height",defaultValue:0,units:"px",element:e,getCurrentValue:t})}function Dw(e,t,o){let r=e.style.transform,n=ua(e);return{animate:i=>{let s=[n],a=o&&o(i);if(a!=null){let[l,m]=a;s.push(`translate(${l}px, ${m}px)`)}let c=t&&t(i);if(c!=null)if(typeof c=="number")s.push(`scale(${c})`);else{let[l,m]=c;l!=null&&s.push(`scaleX(${l})`),m!=null&&s.push(`scaleY(${m})`)}e.style.transform=s.join(" ")},complete:()=>{e.style.transform=r},changedProperties:["transform"]}}function Ew({reducer:e,duration:t,abortSignal:o,before:r,after:n}){return new Promise(i=>{let s=Date.now(),a=!1,c=o?o.add(()=>{a=!0}):()=>{};function l(){let m=_t(Date.now()-s,0,t),u=m/t;e.animate(u),a||m>=t?(c(),e.complete(),i(),n&&n()):requestAnimationFrame(l)}r&&r(),l()})}function dl({opacity:e,maxHeight:t,scale:o,translate:r,duration:n,before:i,after:s}){return vw?{play:()=>Promise.resolve()}:{play:(a,c)=>Ew({reducer:nl([e?Tw(a,e):null,t?ww(a,t):null,o||r?Dw(a,o,r):null].filter(br)),duration:n,abortSignal:c,before:i&&(()=>d(i)(a)),after:s&&(()=>d(s)(a))})}}function pl(e,t,o){let r=t-e;return n=>(o&&(n=o(n)),n>=1?t:e+r*n)}function fl(e,t,o){let r=t[0]-e[0],n=t[1]-e[1];return i=>(o&&(i=o(i)),i>=1?t:[e[0]+r*i,e[1]+n*i])}function Zn(e,t){let o=e.getBoundingClientRect(),r=!1;function n(){if(r)return;let i=e.getBoundingClientRect();(Math.round(i.top)!=Math.round(o.top)||Math.round(i.left)!=Math.round(o.left)||i.width!=o.width||i.height!=o.height)&&(o=i,t()),requestAnimationFrame(n)}return requestAnimationFrame(n),()=>{r=!0}}function hl(e,t){let o=fe(t);A(()=>{if(e)return Zn(e,o.current)},[e,o])}function gl({html:e,layer:t,createBinding:o,show:r,appearAnimation:n,hideAnimation:i}){let s=P(null),a=P(null),c=O(()=>{a.current&&(a.current.parentElement==t&&t.removeChild(a.current),a.current=null)},[t]),l=O(()=>{c();let p=s.current;p&&p.parentElement===t&&t.removeChild(p)},[c,t]);A(()=>l,[l]);let m=r?o():null,u=e(m);return X(()=>{s.current!=u&&(u?(c(),u.style.position="absolute",R.assert(s.current==null),t.appendChild(u),n&&n(u)):s.current&&(a.current=s.current,i?i(s.current).then(c):c()),s.current=u)}),s}function t_({getPopoverRect:e,side:t,align:o,rootElementRect:r,args:n,offset:i}){let s=e(i),a=Id(t,s,r);if(a){let l=Pd(t),m=us({...n,side:l}),u=e(m);Id(l,u,r)<a&&(n.side=l,i=m)}let c=Ad(n.side,o,s,r);if(c){let l=o=="center"?GS(n.side,s,r):Od(o),m=us({...n,align:l}),u=e(m);Ad(n.side,l,u,r)<c&&(n.align=l,i=m)}return i}function Rw(e,t){let o=e?e.getBoundingClientRect():{top:0,right:document.body.scrollHeight-document.body.offsetHeight?document.body.offsetWidth:window.innerWidth,bottom:document.body.offsetHeight,left:0};return{top:o.top+t.y,right:o.right+t.x,bottom:o.bottom+t.y,left:o.left+t.x}}function yl({element:e,popover:t,isTopLayer:o,side:r,align:n,getOffset:i,autoInvert:s,rootElement:a}){let c=o?{x:window.pageXOffset,y:window.pageYOffset}:{x:0,y:0},l=Rw(a,c),m=e.getBoundingClientRect(),u={width:m.width,height:m.height},p=Hh(t);function S(T){let h=T.x+m.left+c.x,x=T.y+m.top+c.y;return{left:h,top:x,right:h+p.width,bottom:x+p.height}}let b=i&&i()||{x:0,y:0},y=dn()?YS(r,n):{side:r,align:n},_={elementSize:u,popoverSize:p,side:y.side,align:y.align,offsetX:b.x,offsetY:b.y},C=us(_);return s&&(C=t_({getPopoverRect:S,side:y.side,align:y.align,rootElementRect:l,args:_,offset:C})),o&&(C.x+=m.left+c.x,C.y+=m.top+c.y),C}var o_=500;function Mw({tooltipElement:e,elementRef:t,position:o,setVisible:r,ignoreIsElementWithinViewport:n}){if(e.style.left="0",e.style.top="0",e.style.transform=`translateX(${o.x}px) translateY(${o.y}px)`,!n&&!Iw(e))return e.style.display="none",r(!1,0),Promise.resolve();let i=o.y>t.current.getBoundingClientRect().top?-5:5;return dl({opacity:pl(0,1),translate:fl([0,i],[0,0]),duration:150}).play(e)}function r_({html:e,elementRef:t,container:o,show:r=!0,stayOnHover:n=!1,side:i="top",align:s="center",offset:a={x:0,y:8},appearDelay:c=o_,hideDelay:l=n?o_:0,isPreventDefaultClick:m=!1,ignoreIsElementWithinViewport:u=!1}){let p=P(null),S=P(null),[b,y]=Xn(!1);A(()=>{Ws(r),r||y(!1,l)},[l,y,r]),Y(t,"mouseover",()=>y(!0,c)),Y(t,"mouseout",()=>y(!1,l)),Y(t,"click",C=>m&&C.preventDefault());let _=gl({html:e,layer:Uo("tooltip"),createBinding:()=>o,show:r&&b,appearAnimation:C=>{function T(){return yl({element:t.current,popover:C,side:i,align:s,isTopLayer:!0,getOffset:()=>a,autoInvert:!0})}return p.current=Zn(t.current,()=>y(!1,0)),Mw({elementRef:t,tooltipElement:C,position:T(),setVisible:y,ignoreIsElementWithinViewport:!!u}).then(()=>{S.current=new ResizeObserver(()=>{let h=T();C.style.transform=`translateX(${h.x}px) translateY(${h.y}px)`}),S.current.observe(C)})},hideAnimation:()=>(p.current&&(p.current(),p.current=null),S.current&&(S.current.disconnect(),S.current=null),Promise.resolve())});return X(()=>{let C=_.current;if(!n||!C)return;let T=()=>y(!0,0),h=()=>y(!1,l);return C.addEventListener("mouseover",T),C.addEventListener("mouseout",h),()=>{C.removeEventListener("mouseover",T),C.removeEventListener("mouseout",h)}}),{visible:b,setVisible:y}}function Iw(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function n_(e){r_({...e,container:f(ul,{contentType:"text",text:e.text,size:e.size,autotestData:e.autotestData})})}function qt(e){n_(e)}var Aw={text:"x31b75__text"};function yo(e,{text:t,disableTooltip:o,autotestData:r}){let n=V(),i=al(n,[typeof t=="string"?t:t.html]);return qt({html:e,elementRef:n,text:t,show:!o&&i}),e`
<div
	class=${Aw.text}
	save-ref=${n}
	data-at=${ne(r)}
>
	${t}
</div>`}var Ld="data-focus-visible-added",$d="focus-visible";function i_(e,{focused:t,onFocusedChange:o}){if(Xe(t)&&!Xe(o))throw new Error("useFocusProps: `focused` requires `onFocusedChange`");A(()=>{if(!Xe(t))return;let r=e.current,n=r===document.activeElement;t&&!n?(r.focus(),r.setAttribute(Ld,""),r.classList.add($d)):!t&&n&&(r.blur(),r.removeAttribute(Ld),r.classList.remove($d))},[t,e]),Y(e,"focus",()=>{o&&o(!0)}),Y(e,"blur",()=>{o&&o(!1)})}var Pw={preloader:{withMods:e=>__getCssClass("x12792__preloader",e)},spin:"x12792__spin"};function dr(e,{size:t="medium",color:o="accent"}){return e`
<svg
	class=${Pw.preloader.withMods({size:t,color:o})}
	viewBox="0 0 32 32"
	xmlns="http://www.w3.org/2000/svg"
>
	<path
		d="M30 16C30 23.732 23.732 30 16 30C8.26801 30 2 23.732 2 16C2 8.26801 8.26801 2 16 2"
		stroke="currentColor"
		stroke-width="2.5"
		stroke-linecap="round"
		fill="none"
	/>
</svg>
`}var ds={button:{withMods:e=>__getCssClass("xcc0a8__button",e)},icon:"xcc0a8__icon",text:"xcc0a8__text",preloader:"xcc0a8__preloader"},Ow={button:{withMods:e=>__getCssClass("xeba1a__button",e)},icon:"xeba1a__icon",text:"xeba1a__text",preloader:"xeba1a__preloader"},Vw={button:{withMods:e=>__getCssClass("x3e989__button",e)},icon:"x3e989__icon",text:"x3e989__text",preloader:"x3e989__preloader"},Fw={button:{withMods:e=>__getCssClass("x1ebbb__button",e)},text:"x1ebbb__text",icon:"x1ebbb__icon",preloader:"x1ebbb__preloader"},Kw={button:{withMods:e=>__getCssClass("xb6cd3__button",e)},icon:"xb6cd3__icon",text:"xb6cd3__text",preloader:"xb6cd3__preloader"},Lw={button:{withMods:e=>__getCssClass("xe13f3__button",e)},icon:"xe13f3__icon",text:"xe13f3__text",preloader:"xe13f3__preloader"},$w={button:{withMods:e=>__getCssClass("xa084d__button",e)},icon:"xa084d__icon",text:"xa084d__text",preloader:"xa084d__preloader"},Nw={button:{withMods:e=>__getCssClass("x133d5__button",e)},text:"x133d5__text",icon:"x133d5__icon",preloader:"x133d5__preloader"},zw={button:{withMods:e=>__getCssClass("x959fd__button",e)},text:"x959fd__text",icon:"x959fd__icon",preloader:"x959fd__preloader"},Qw={button:{withMods:e=>__getCssClass("x9131e__button",e)},text:"x9131e__text",icon:"x9131e__icon",preloader:"x9131e__preloader"},Hw={button:{withMods:e=>__getCssClass("x08261__button",e)},text:"x08261__text",icon:"x08261__icon",preloader:"x08261__preloader"},Uw={button:{withMods:e=>__getCssClass("xc515f__button",e)},text:"xc515f__text",icon:"xc515f__icon",preloader:"xc515f__preloader"},Ww={button:{withMods:e=>__getCssClass("xea2c3__button",e)},text:"xea2c3__text",icon:"xea2c3__icon",preloader:"xea2c3__preloader"},qw={button:{withMods:e=>__getCssClass("x2278a__button",e)},text:"x2278a__text",icon:"x2278a__icon",preloader:"x2278a__preloader"},Gw={button:{withMods:e=>__getCssClass("x0901e__button",e)},text:"x0901e__text",icon:"x0901e__icon",preloader:"x0901e__preloader"},Yw={button:{withMods:e=>__getCssClass("x0783f__button",e)},text:"x0783f__text",icon:"x0783f__icon",preloader:"x0783f__preloader"};function Ce(e,t){let o=V(),{size:r="medium",state:n="default",minWidth:i=!0,autotestData:s,tooltip:a,cursor:c="pointer",radius:l="default"}=t,{iconLeft:m,text:u,iconRight:p}=Jw(t),S=Zw(t),b=n=="loading",y=b||n=="disabled";function _(h){!y&&!h.defaultPrevented&&(h.preventDefault(),t.onClick&&t.onClick())}let C=H(t.style,{primary:Ow,secondary:Vw,destructive:Kw,ghostDestructive:Lw,warning:$w,ghost:Nw,ghostInversed:zw,link:Qw,linkInversed:Hw,linkSecondary:Uw,linkSecondaryAlpha:Ww,complementary:qw,secondaryInversed:Fw,promo:Gw,aiPrimary:Yw}),T=de(ds.button.withMods({size:r,spacing:t.structure=="icon"&&S=="default"?"icon":S,"min-width":t.structure!="icon"&&i,loading:b,bold:tD(t.style),radius:l,cursor:c}),C.button.withMods({pressed:n=="pressed"}));return qt({html:e,elementRef:o,show:!!a,text:typeof a=="string"?a:typeof a=="object"?a.text:"",size:typeof a=="object"?a.size:void 0,side:typeof a=="object"?a.side:void 0,align:typeof a=="object"?a.align:void 0,offset:typeof a=="object"?a.offset:void 0}),i_(o,t),e`
<button
	class=${T}
	disabled=${y}
	onclick=${_}
	save-ref=${o}
	data-at=${ne(s)}
>
	${e.renderIf(s_,()=>!!m&&{className:de(ds.icon,C.icon),tooltip:a,icon:m})}
	${e.renderIf(jw,()=>!!u&&{className:de(ds.text,C.text),text:u,disableTooltip:!!a})}
	${e.renderIf(s_,()=>!!p&&{className:de(ds.icon,C.icon),icon:p})}
	${e.renderIf(Xw,()=>b&&{className:de(ds.preloader,C.preloader),color:eD(t.style)})}
</button>
`}function s_(e,{className:t,icon:o}){return e`
<div class=${t}>
	${e(o)}
</div>
`}function jw(e,{className:t,text:o,disableTooltip:r}){return e`
<div class=${t}>
	${e(yo,{text:o,disableTooltip:r})}
</div>
`}function Xw(e,{className:t,color:o}){return e`
<div class=${t}>
	${e(dr,{size:"small",color:o})}
</div>
`}function Zw(e){switch(e.style){case"link":case"linkInversed":case"linkSecondary":case"linkSecondaryAlpha":return e.spacing||"default";case"primary":case"secondary":case"secondaryInversed":case"destructive":case"ghostDestructive":case"warning":case"ghost":case"ghostInversed":case"complementary":case"promo":case"aiPrimary":return"default";default:throw I(e),new Error}}function Jw(e){switch(e.structure){case"icon":return{iconLeft:e.icon,text:null,iconRight:null};case"text":return{iconLeft:null,text:e.text,iconRight:null};case"iconAndText":return{iconLeft:e.icon,text:e.text,iconRight:null};case"textAndIcon":return{iconLeft:null,text:e.text,iconRight:e.icon};case"iconAndTextAndIcon":return e;default:throw I(e),new Error}}function eD(e){return H(e,{primary:"onColor",secondary:"subdued",destructive:"onColor",ghostDestructive:"subdued",warning:"onColor",ghost:"subdued",ghostInversed:"onColor",link:"subdued",linkInversed:"onColor",linkSecondary:"subdued",linkSecondaryAlpha:"subdued",complementary:"subdued",secondaryInversed:"onColor",promo:"onColor",aiPrimary:"onColor"})}function tD(e){return H(e,{primary:!0,secondary:!0,destructive:!0,ghostDestructive:!0,warning:!0,ghost:!0,ghostInversed:!0,link:!1,linkInversed:!1,linkSecondary:!1,linkSecondaryAlpha:!1,complementary:!0,secondaryInversed:!0,promo:!0,aiPrimary:!0})}var Ot=class e{constructor(t,o=null){this._block=t,this._element=o}className(){return this._element?`${this._block}__${this._element}`:this._block}getModifierClassName(t){return`${this.className()}_${t}`}getModifierWithValueClassName(t,o){return`${this.getModifierClassName(t)}_${o}`}createChildElementBemInfo(t){return d(!this._element),new e(this._block,t)}};function Se(e,t={}){let o=e.map(n=>n instanceof Ot?n:new Ot(n)),r=o.map(n=>n.className());for(let n of Object.keys(t)){let i=t[n];for(let s of o)i==null?r.push(s.getModifierClassName(n)):r.push(s.getModifierWithValueClassName(n,i))}return r.join(" ")}!1&&(window.top.__HYPER_HTML_MODE__="development");var Nd="_ismeta";function zd(e){let t=window.top.__ON_UPDATE_ELEMENT__;t&&t(e)}function Qd(){let e=window.top.__UPDATE_ELEMENTS__;e&&e()}function Cl(e,t){!1&&!e[Nd]&&(e[Nd]={...e[Nd],...t})}var oD=[ee.CLICK],ei=new Map,Hd=new Map,Jn=!1,c_=!1,rD=()=>null;function l_(){nD(),tt(l_)}tt(l_);function nD(){if(ei.size&&!c_){Jn=!0;for(let e of ei.keys())e._redraw();Jn=!1,ei.clear()}}function iD(e){ei.set(e,!0)}function a_(e){ei.delete(e)}function sD(e){return ei.has(e)}var oe=class extends Tt{constructor({bemInfo:t,blockName:o,block:r=o,relatedData:n,direction:i="ltr"}){super(),this._bemInfoArray=[],(t||r)&&this._addBemInfo(d(t||r)),this._childElements=null,this._childElementsRef=null,this._relatedData=n||this,this._modifiers={},this._browserEventSignals=null,this._domElement=null,this._onDidRedraw=null,this._onDomElementReCreatedCallback=null,this._childContext=new Map,this._direction=i}setDirection(t){this._direction=t}_setContext(t,o){Qs(this._childContext,t,o)}static renderInProgress(){return Jn}static suspend(t){c_=t}domElement(){if(sD(this)){let t=Jn;Jn=!0,this._redraw(),Jn=t}return this._domElement?this._domElement:(this._redraw(),this.domElement())}onDidRedraw(){return this._onDidRedraw||(this._onDidRedraw=this._createSignal()),this._onDidRedraw}updateModifier(t,o){o?typeof o=="string"?this._modifiers[t]=o:o&&(this._modifiers[t]=null):delete this._modifiers[t],this._sheduleRender()}hasModifier(t){return Object.keys(this._modifiers).includes(t)}handleEvent(t){if(t.defaultPrevented&&oD.includes(t.type))return;let o=this._getBrowserEventSignalIfExists(t.type);o&&o.dispatch(t)}createChildBemInfo(t){return d(this._bemInfoArray[0]).createChildElementBemInfo(t)}addBemInfo(t,o){this._addBemInfo(t,o),this._sheduleRender()}setOnDomElementReCreatedCallback(t){this._onDomElementReCreatedCallback=t}clearCache(){this._relatedData={},this._sheduleRender()}_sheduleRender(){iD(this)}_redraw(){a_(this);let t=this._render();if(t!=this._domElement){let o=this._domElement;this._domElement=t,o&&(this._onDomElementReCreatedCallback?this._onDomElementReCreatedCallback():R.error(`[${this.constructor.name}] component element was changed`))}!1&&(t.component=this),this._onDidRedraw&&document.body.contains(this._domElement)&&this._onDidRedraw.dispatch()}_getBrowserEventSignalIfExists(t){return this._browserEventSignals&&this._browserEventSignals[t]||null}_getBrowserEventSignal(t){return this._browserEventSignals||(this._browserEventSignals={}),this._browserEventSignals[t]||(this._browserEventSignals[t]=this._createSignal(),this._sheduleRender()),this._browserEventSignals[t]}_activeListenerExists(t){let o=this._getBrowserEventSignalIfExists(t);return!!o&&o.handlersCount()>0}_getHandler(t){return this._activeListenerExists(t)?this:null}_addBemInfo(t,o){t instanceof Ot||(t=new Ot(t,o)),this._bemInfoArray.push(t)}_getCssClasses(){return this._bemInfoArray?Se(this._bemInfoArray,this._modifiers):""}_wasRendered(){return!!this._domElement}_html(t,...o){return this._generateElement("",t,...o)}_renderFunctionEx(t){return this._childElementsRef||(this._childElementsRef={}),this._childElementsRef[t]||(this._childElementsRef[t]={}),Qo(this._relatedData,t,this._childContext,this._childElementsRef[t])}_childHtml(t){Hd.has(this)||Hd.set(this,{});let o=Hd.get(this);return o[t]||(o[t]=(r,...n)=>typeof r=="string"?this._childHtml(t+r):this._generateElement(t,r,...n),o[t].optional=(r,n)=>n?o[t](r):rD,!1&&(o[t].__hyperId=t)),o[t]}_getChildClass(t){return this.createChildBemInfo(t).className()}_getChildElement(t){if(this._childElementsRef&&this._childElementsRef[t])return d(this._childElementsRef[t].current);this.domElement();let o=this._childElements;return o&&o[t]||null}_generateElement(t,o,...r){let n=a=>a.map((c,l)=>{if(c instanceof Ot)c=c.className();else if(c instanceof He)c=c.dispatch.bind(c);else if(typeof c=="function")c=c.bind(this);else{if(c==this)return c.handleEvent.bind(this);if(c&&c!=this&&typeof c.domElement=="function")return typeof c.setOnDomElementReCreatedCallback=="function"&&c.setOnDomElementReCreatedCallback(()=>this._redraw()),this._addDisposable(c),c.domElement();if(Array.isArray(c))return n(c)}if(o[l]&&o[l].endsWith("passive-events="))for(let m of Object.keys(c))typeof c[m]=="function"&&(c[m]=c[m].bind(this));return c});r=n(r);let i=t&&`:${t}`,s=J(this._relatedData,i)(o,...r);if(t){if(this._childElements=this._childElements||{},!1){let a=this._childElements[t];a?(d(a==s,`[${this.constructor.name}] component child('${t}') element was changed`),zd(a)):(Cl(s,{id:ze(),renderer:`${this.constructor.name}: ${t}`}),Qd())}this._childElements[t]=s}else!1&&(this._domElement?zd(this._domElement):(Cl(s,{id:ze(),renderer:this.constructor.name}),Qd()));return!1&&Cl(s,{renderArgs:[o,...r]}),s}_render(){}_destruct(){a_(this),super._destruct()}};var bt={NBSP:String.fromCharCode(160),ZERO_WIDTH_SPACE:String.fromCharCode(8203),ELLIPSIS:"\u2026",NDASH:"\u2013",GREATER_THAN_OR_EQUAL_TO:String.fromCharCode(8805),LESS_THAN:String.fromCharCode(60),LESS_THAN_OR_EQUAL_TO:String.fromCharCode(8804),PERCENT:String.fromCharCode(37),LTR_DIRECTION:"\u200E",RTL_QUESTION_SIGN:"\u2E2E"};var ti=class{constructor(){this._ids={}}generate(t){return Xe(this._ids[t])?`${t}_${++this._ids[t]}`:(this._ids[t]=0,t)}};function m_({styles:e,ignoreInlineStyles:t}){return t?re.create({url:e.url}):e}function u_({characters:e,ignoreInlineStyles:t=!1}){if(e.length==0)return[];let o=[{text:e[0].text,styles:m_({styles:e[0].meta,ignoreInlineStyles:t})}];for(let r=1;r<e.length;++r){let n=e[r],i=m_({styles:n.meta,ignoreInlineStyles:t}),s=o.length-1,a=o[s].styles;re.compare(i,a)?o[s].text+=n.text:o.push({text:n.text,styles:i})}return o}var d_=["h1","h2","h3"],p_=["blockquote","pullquote"];function oi(e){let t=At();return e<=15?"1.72":e<=21||e<=23&&!t?"1.68":e<=31&&t?"1.48":e<=31&&!t?"1.52":"normal"}var Co=class{constructor({paragraph:t,bemInfo:o,blockBeforeType:r,blockAfterType:n,idPrefix:i=w.isList(t)?"list-item":"",placeholder:s="",prompt:a="",paragraphIndex:c,direction:l}){this._paragraph=t,this._direction=l,this.blockBeforeType=r||"",this.blockAfterType=n||"",this.paragraphIndex=c,this._isPrompt=!!a,this._className=this._getClassName(o),this.invertBold=d_.includes(this.type()),this.invertItalic=p_.includes(this.type()),this.renderId=i+t.key+t.viewType,this.placeholder=a||s}_getClassName(t){let o=t||new Ot("paragraph"),r=`${o.className()}`;if(r+=` ${o.getModifierWithValueClassName("type",this.type())}`,r+=` ${o.getModifierWithValueClassName("align",this.textAlign())}`,this._direction&&(r+=` ${o.getModifierWithValueClassName("dir",this._direction)}`),this._paragraph.characters.length==0){let n=this._isPrompt?"prompt":"empty";r+=` ${o.getModifierClassName(n)}`}return r}paragraph(){return this._paragraph}type(){return this._paragraph.viewType}textAlign(){return this._paragraph.textAlign}className(){return this._className}getLineHeightForFontSize(t){return oi(t)}getFontSize(t){if(t==="auto")throw Error("cannot set 'auto' font-size in default paragraph");return t}};var Sl={};function aD(e){return Sl[e]||(Sl[e]={}),Sl[e]}function cD(e){delete Sl[e]}function lD(e,t,o,r,n){if(!e)return null;let i=e.style,s={},a=new Set,c="",l=1;if(i.forEach(m=>{switch(m.name){case"bold":s["font-weight"]=o?"normal":"bold";break;case"italic":s["font-style"]=t?"normal":"italic";break;case"underline":a.add("underline");break;case"strikethrough":a.add("line-through");break;case"fontSize":{let u=r(m.size);s["font-size"]=`${u}px`;let p=n(u);s["line-height"]=`${p}`;break}case"fontColor":s.color=`${m.color}`;break;case"textHighlightColor":{c=m.color;break}case"textHighlightOpacity":l=m.opacity;break;case"alignment":case"code":break;default:I(m)}}),e.url&&a.add("underline"),a.size&&(s["text-decoration"]=[...a].join(" ")),c&&c!==pt){let[m,u,p]=pe(c);s["background-color"]=`rgba(${m}, ${u}, ${p}, ${l})`}return s}function mD(e,t,o,r){return J(e,`:${t}`)`
		<sup style=${r}>${o}</sup>`}function uD(e,t,o,r){return J(e,`:${t}`)`
		<sub style=${r}>${o}</sub>`}function dD({rendererKey:e,id:t,text:o,textDecoration:r,alignment:n}){let i={"text-decoration":r};return n==="superscript"?mD(e,t,o,i):uD(e,t,o,i)}function h_({rendererKey:e,id:t,text:o,alignment:r,styles:n}){let i=r?n&&{...n,"text-decoration":null}:n,s=r?dD({rendererKey:e,id:t,text:o,alignment:r,textDecoration:n?n["text-decoration"]:""}):o;return{chunkStyles:i,content:s}}function f_(e){let{rendererKey:t,id:o,attributes:r={},className:n=null}=e,{content:i,chunkStyles:s}=h_(e);return J(t,`:${o}`)`
<span style=${s} class=${n} data-richtext-inline-code=${r.richtextInlineCode||null}>${i}</span>`}function pD(e){let{rendererKey:t,id:o,url:r,onOverHandler:n,attributes:i={},className:s=null}=e,{content:a,chunkStyles:c}=h_(e);return J(t,`:${o}`)`
<a href=${r} target=_blank onmouseover=${n} class=${s} data-richtext-inline-code=${i.richtextInlineCode||null} style=${c}>${a}</a>`}function Ud(e){return!!e&&re.isInlineCodeMeta(e.styles)}function fD(e,t){let o,r,n=Ud(e[t-1]),i=Ud(e[t]),s=Ud(e[t+1]);return i&&(o=de("inline-code",i&&!n?"inline-code_start":null,i&&!s?"inline-code_end":null),r={richtextInlineCode:!0}),{className:o,attributes:r}}function pr(e,t,o=!1,r=!1){let n=e.paragraph(),i=w.isList(n),s=u_({characters:n.characters}),a=[],c=new ti,l=!1,m=aD(e.renderId);if(s.forEach((T,h)=>{let{className:x,attributes:B}=fD(s,h),L=lD(T.styles,e.invertItalic,e.invertBold,e.getFontSize.bind(e),e.getLineHeightForFontSize.bind(e)),$=c.generate(`${e.renderId}_${T.text}_${L}`),z=T.text;h==s.length-1&&z.endsWith(`
`)&&(z+=bt.ZERO_WIDTH_SPACE);let ue=ve.getAlignment(T.styles.style),Z=T.styles.url;Z&&(l=!0);let Je=Z?pD({rendererKey:m,id:$,styles:L,text:z,url:Z,alignment:ue,onOverHandler:t,attributes:B,className:x}):f_({rendererKey:m,id:$,styles:L,text:z,alignment:ue,attributes:B,className:x});a.push(Je)}),a.length)l&&cD(e.renderId);else{let T=c.generate(`${e.renderId}_empty`),h=f_({rendererKey:m,id:T,styles:null,text:bt.ZERO_WIDTH_SPACE,alignment:null});a.push(h)}let u=`enter-blockquote-field-${e.paragraphIndex}`,S=`${i?"enter-list-item-field":"enter-paragraph-field"}-${e.paragraphIndex}`,b=r||o||i?null:e.placeholder,y=J(m,`:${e.renderId}`),_=e.className(),C=!r&&!o;switch(n.viewType){case"h1":return y`<h1 class=${_} data-key=${n.key} contenteditable=${C}>${a}</h1>`;case"h2":return y`<h2 class=${_} data-key=${n.key} contenteditable=${C}>${a}</h2>`;case"h3":return y`<h3 class=${_} data-key=${n.key} contenteditable=${C}>${a}</h3>`;case"blockquote":case"pullquote":return y`<blockquote class=${_} data-key=${n.key} data-at=${ne(u)} contenteditable=${C}>${a}</blockquote>`}return y`
<p
	class=${_}
	data-key=${n.key}
	data-placeholder=${b}
	data-at=${ne(S)}
	contenteditable=${C}
>${a}</p>`}var hD={paragraphBlock:{withMods:e=>__getCssClass("xc15dc__paragraph-block",e)}};function _l(e,{block:t,blockBeforeType:o,blockAfterType:r,readonlyMode:n,isLock:i,onHyperlinkOverFn:s,direction:a,paragraphProps:c={}}){let l=Q(()=>new Co({paragraph:t,blockBeforeType:o,blockAfterType:r,direction:a,...c}),[r,o,a,t,c]);return e`
<div
	class=${hD.paragraphBlock.withMods({type:l.type()})}
	tabindex="-1"
>
	${pr(l,s,n,i)}
</div>`}function g_(e){if(navigator.clipboard)navigator.clipboard.writeText(e);else{let o=St(document,"copy",r=>{r.clipboardData&&(r.clipboardData.setData("text/plain",e),r.preventDefault(),zt(o))});document.execCommand("copy")}}function Ct({target:e,onResize:t,ignoreObservationStart:o=!1},r=[]){let n=fe(t);X(()=>{let i=e instanceof Element?e:e&&e.current;if(!i)return;let s=o,a=new ResizeObserver(([c])=>{if(s){s=!1;return}n.current&&n.current(c.contentRect)});return a.observe(i),()=>{a.disconnect()}},[e,n,o,...r])}function y_(e){let t=()=>e.current.scrollTop;return{onScroll:Pt(),getDomObject:()=>e.current,getRelativeElementOffset:o=>{let r=e.current,n=r.getBoundingClientRect(),i=o.getBoundingClientRect();return{x:r.scrollLeft+i.left-n.left,y:r.scrollTop+i.top-n.top}},getScrollLeft:()=>e.current.scrollLeft,getScrollTop:t,getClientWidth:()=>e.current.clientWidth,getClientHeight:()=>e.current.clientHeight,getMaxScrollX:()=>e.current.scrollWidth-e.current.clientWidth,getMaxScrollY:()=>e.current.scrollHeight-e.current.clientHeight,scroll:(o,r,n)=>{e.current.scrollTo({top:r,left:o,behavior:n})},scrollBy:(o,r)=>e.current.scroll(e.current.scrollLeft+o,e.current.scrollTop+r)}}function ri(e,t=[]){let o=Q(()=>y_(e),[e]);return A(()=>{let r=e.current;if(!r)return;let n=()=>o.onScroll.dispatch();return r.addEventListener("scroll",n),()=>r.removeEventListener("scroll",n)},[e,o.onScroll,...t]),o}function C_(e,t){A(()=>{if(t)return t(),e.onScroll.add(t)},[t,e])}function S_(e,t){e.push(t),e.length>3&&(e[e.length-3-1].markedAsRemoved=!0)}function __(e,t){if(!e.length)return[t];let o=e.findIndex(l=>l.important),r=e.findIndex(l=>!l.important),n=r==-1,i=o==-1,s=e.filter(l=>l.important),a=e.filter(l=>!l.important);t.important?S_(s,t):S_(a,t);let c;return i?c=[...a,...s]:n?c=[...s,...a]:o<r?c=[...s,...a]:c=[...a,...s],c}function k_(e,t){return e.filter(o=>o.id!==t)}var kl=Pt(),x_=Pt();function ni(e){let t=ze();switch(e.type){case"basic":case"warning":case"critical":kl.dispatch({id:t,type:e.type,important:e.important,text:e.text,onClose:e.onClose});break;case"withLoad":kl.dispatch({id:t,type:e.type,important:e.important,text:e.text,operationCompletePromise:e.operationCompletePromise,onClose:e.onClose});break;case"withLoadAndCancel":kl.dispatch({id:t,type:e.type,important:e.important,text:e.text,operationCompletePromise:e.operationCompletePromise,cancelButtonLabel:e.cancelButtonLabel,onCancel:e.onCancel,onClose:e.onClose});break;default:I(e);break}}function xl(e){x_.dispatch(e)}function B_(){let[e,t]=j(()=>[]),{unsubAdd:o,unsubRemove:r}=Q(()=>({unsubAdd:kl.add(n=>t(i=>__(i,n))),unsubRemove:x_.add(n=>t(i=>k_(i,n)))}),[]);return X(()=>()=>{o(),r()},[o,r]),e}var Wd;function ps(e,t){return o=>{let r=Wd==null?void 0:Wd[e];r?r(o):t(o)}}var yD=ps("showCriticalToast",({text:e,important:t=!1})=>{ni({type:"critical",important:t,text:e})});var b_=ps("showBasicToast",({text:e,important:t=!1,onClose:o})=>{ni({type:"basic",important:t,text:e,onClose:o})});var CD=ps("showWarningToast",({text:e,important:t=!1})=>{ni({type:"warning",important:t,text:e})});var due=ps("showToastWithLoad",({text:e,operationCompletePromise:t})=>{ni({type:"withLoad",text:e,important:!0,operationCompletePromise:t})});var pue=ps("showToastWithLoadAndCancel",({text:e,operationCompletePromise:t,onCancel:o})=>{ni({type:"withLoadAndCancel",text:e,important:!0,operationCompletePromise:t,cancelButtonLabel:k("Common.Toasts.CancelButtonLabel"),onCancel:o})});var v_=e=>b_({text:e});function T_(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m4 6 4 4 4-4" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function w_(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 10 8 6l-4 4" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function D_(e){let t=fe(e);return O((...o)=>t.current(...o),[t])}function E_(e){let t=Math.abs(e.scrollTop),o=d(getComputedStyle(e)),n=o.overflowY==="auto"||o.overflowY==="scroll"?e.scrollHeight-e.clientHeight:0;return t===n}function SD(e,t){for(;e!==t&&t.parentElement;){if(!E_(t))return!1;t=t.parentElement}return E_(t)}function qd(e){let t=St(e,"wheel",o=>{let r=o.deltaY>0;SD(e,o.srcElement)&&r&&o.preventDefault()});return()=>zt(t)}function R_(e){A(()=>{if(e)return qd(e)},[e])}function M_(e){let t=e?-5:5;return dl({opacity:pl(0,1),translate:fl([0,t],[0,0]),duration:150})}var Bl=8;function I_({popover:e,position:t}){let o=window.pageYOffset+window.innerHeight,r=window.pageYOffset,i=t.y+e.offsetHeight>o,s=t.y<r+Bl;if(s||i){let a;s?(a=e.offsetHeight-Math.abs(t.y-r-Bl),t.y=r+Bl):a=o-t.y-Bl,e.style.width=`${e.offsetWidth}px`,e.style.maxHeight=`${a}px`,e.style.overflowY="auto"}e.style.left=`${t.x}px`,e.style.top=`${t.y}px`}function A_(e){let t=!1,o;return r=>(t||(o=e(r),t=!0),o)}var fr=[];function P_(e){let t=fr.pop();for(;t&&e(t,fr.length);)t.closePopover(),t=fr.pop();t&&fr.push(t),fr.length||O_().clearHandler()}function _D(e){let t=fr.indexOf(e);if(~t)P_((o,r)=>r>=t);else throw new Error("PopoverStackItem must be in popover stack")}function kD(e){return fr.length||O_().registerHandler(),fr.push(e),e}var O_=A_(()=>{function e(t){let o=t.target;P_(({relatedRef:r,popover:n})=>!r.current.contains(o)&&!n.contains(o))}return{registerHandler:()=>window.addEventListener("mousedown",e),clearHandler:()=>window.removeEventListener("mousedown",e)}});function V_({relatedRef:e,popoverRef:t,onClose:o}){let r=P(null);A(()=>{let n=t.current;n&&r.current===null&&(r.current=kD({popover:n,relatedRef:e,closePopover:()=>{r.current=null,o()}})),!n&&r.current!==null&&_D(r.current)})}var xD=8,BD=vt(null);function bD(){let e=P([]);return{register:t=>{e.current.push(t)},clean:()=>{e.current.forEach(t=>t()),e.current=[]}}}function vD({elementRef:e,beforeShow:t,afterShow:o,onHide:r}){return{appearAnimation:n=>{t(n);let i=n.getBoundingClientRect().top>e.current.getBoundingClientRect().top;return M_(i).play(n).then(()=>o(n))},hideAnimation:n=>Promise.resolve().then(()=>r(n))}}function F_({html:e,elementRef:t,createPopover:o,opened:r,setOpened:n,prepareList:i,offset:s,suppressOpenOnElementClick:a,keepOpenedOnAnchorMove:c,side:l="bottom",align:m="start"}){let u=bD(),p=D_(n),S=Ie(BD),b=_=>I_({popover:_,position:yl({element:t.current,popover:_,side:l,align:m,isTopLayer:!0,getOffset:()=>({x:s&&s.x||0,y:s&&s.y||xD}),autoInvert:!0,rootElement:S&&S.current})}),y=gl({html:e,createBinding:o,show:r,layer:Uo("popover"),...vD({elementRef:t,beforeShow:_=>{i&&i(_),b(_),c?u.register(Zn(t.current,()=>b(_))):u.register(Zn(t.current,()=>p(!1))),u.register(qd(_))},afterShow:_=>{let C=new ResizeObserver(()=>b(_));C.observe(_),u.register(()=>C.disconnect())},onHide:u.clean})});V_({relatedRef:t,popoverRef:y,onClose:()=>p(!1)}),Y(t,"click",a?null:()=>p(!r))}function K_(e,{createControl:t,createPopover:o,opened:r,setOpened:n,useControlWidth:i=!1,offset:s,suppressOpenOnElementClick:a,keepOpenedOnAnchorMove:c,side:l,align:m}){let u=V();return F_({html:e,elementRef:u,createPopover:o,opened:r,setOpened:n,prepareList:p=>{if(i){let S=`${u.current.clientWidth}px`;p.style.minWidth=S,p.style.maxWidth=S,p.style.width=S}},offset:s,suppressOpenOnElementClick:a,keepOpenedOnAnchorMove:c,side:l,align:m}),Ae(e,t(),u)}function $_(e,t){let o=t.state=="pressed";return K_(e,{...t,createControl:()=>f(Ce,{...t.chevron?TD(t,o):t,onClick:()=>{t.onClick&&t.onClick(),t.setState(o?"default":"pressed")}}),createPopover:t.createPopover,opened:o,setOpened:r=>t.setState(r?"pressed":"default"),suppressOpenOnElementClick:!0})}function TD(e,t){switch(e.structure){case"icon":case"iconAndTextAndIcon":case"textAndIcon":return e;case"iconAndText":return{...e,structure:"iconAndTextAndIcon",iconLeft:e.icon,iconRight:L_(t)};case"text":return{...e,structure:"textAndIcon",icon:L_(t)};default:throw I(e),new Error}}function L_(e){return e?f(w_):f(T_)}var wD={group:"xbea27__group"};function N_(e,{buttons:t,size:o,spacing:r}){return e`
<div class=${wD.group}>
	${e.renderAll(t,n=>n.withPopover?ye(n.id,$_,{...n,size:o,spacing:r}):ye(n.id,Ce,{...n,size:o,spacing:r}))}
</div>`}var DD={container:"x6e61f__container"};function z_(e,t){return e`
<div class=${DD.container}>
	${e(dr,t)}
</div>`}function ED({overlayRef:e,anchorRef:t,enabled:o,stayOnHover:r,onInstantlyShow:n,onDeferredShow:i,onInstantlyHide:s,onDeferredHide:a}){let c=fe(n),l=fe(a);Y(t,"mouseenter",o?i:null),Y(t,"mouseleave",o?r?a:s:null),X(()=>{if(!o)return;let m=e.current,u=c.current,p=l.current;if(!(!r||!m||!u||!p))return m.addEventListener("mouseenter",u),m.addEventListener("mouseleave",p),()=>{m.removeEventListener("mouseenter",u),m.removeEventListener("mouseleave",p)}},[e.current,r])}function RD({hideDelay:e,appearDelay:t}){let[o,r]=Xn(!1),n=O(()=>r(!1,0),[r]),i=O(()=>r(!1,e),[e,r]),s=O(()=>r(!0,0),[r]),a=O(()=>r(!0,t),[t,r]);return{opened:o,deferredShow:a,showInstantly:s,hideInstantly:n,deferredHide:i}}function Q_({overlayRef:e,anchorRef:t,stayOnHover:o,appearDelay:r,hideDelay:n}){let{opened:i,deferredShow:s,showInstantly:a,hideInstantly:c,deferredHide:l}=RD({appearDelay:r,hideDelay:n});return ED({overlayRef:e,anchorRef:t,enabled:!0,stayOnHover:o,onInstantlyShow:a,onDeferredShow:s,onInstantlyHide:c,onDeferredHide:l}),{opened:i,hideInstantly:c,deferredHide:l}}function MD(e,t){switch(e){case"top":return[0,-t];case"bottom":return[0,t];case"right":return[t,0];case"left":return[-t,0];default:throw I(e),new Error}}function H_([e,t]){return`translate(${e}px, ${t}px)`}function U_({element:e,side:t}){return new KeyframeEffect(e,[{opacity:0,transform:H_(MD(t,5))},{opacity:1,transform:H_([0,0])}],{duration:150,fill:"forwards"})}function fs(e){return e.current?e.current.getBoundingClientRect():{left:0,top:0,right:0,bottom:0,width:0,height:0}}function q_(){return{x:window.pageXOffset,y:window.pageYOffset}}function Gd(){let e=fs({current:document.body}),t=wr(e),o=Dr(q_(),la(2));return Eo(To(t,o),e)}function W_(e){let t=fs(e);return Eo(To(wr(t),q_()),t)}function Yd({rootRef:e,overlayRef:t,relatedRef:o}){return{viewPort:e?W_(e):Gd(),component:W_(o),overlaySize:fs(t)}}function ii(){let[,e]=j(!0);return O(()=>e(t=>!t),[])}function ID(){let e=!1;try{e=!!window.Animation}catch(t){}return e}function jd({element:e,createKeyframes:t,abortSignal:o}){if(!ID())return Promise.resolve();let r=new Animation(t(e));return new Promise(n=>{let i=e.style.pointerEvents;e.style.pointerEvents="none";function s(){c(),n()}function a(){c(),n("aborted")}function c(){e.style.pointerEvents=i,o&&o.removeEventListener("abort",a),r.removeEventListener("cancel",a),r.removeEventListener("finish",s)}o&&o.addEventListener("abort",a),r.addEventListener("cancel",a),r.addEventListener("finish",s),r.play()})}function si({element:e,getAppearKeyframes:t,getHideKeyframes:o,onAppeared:r,onHidden:n}){let[i,s]=j(!1),a=ii(),c=P(new AbortController),l=P(e),m=P(null);e!==l.current&&(m.current=l.current),l.current=e;let u=fe({getAppearKeyframes:t,getHideKeyframes:o,onAppeared:r||(()=>{}),onHidden:n||(()=>{})});return X(()=>{if(!e)return;c.current.abort(),c.current=new AbortController;let p=c.current.signal,S=u.current.getAppearKeyframes,b=u.current.getHideKeyframes;return S?(s(!0),jd({element:e,createKeyframes:S,abortSignal:p}).then(()=>{s(!1),u.current.onAppeared()})):u.current.onAppeared(),()=>{if(!b||p.aborted){m.current=null,a(),u.current.onHidden();return}s(!0),jd({element:e,createKeyframes:b,abortSignal:p}).then(()=>{m.current=null,s(!1),u.current.onHidden()})}},[u,e,a]),{animating:i,element:m.current||e}}function ai({layer:e,element:t,onAppend:o,beforeAppend:r,beforeUnmount:n}){let i=P(null),s=fe(n),a=O(()=>{let c=i.current;c&&(d(c.parentElement==e,`useExternalLayer(): layer "${e}" doesn't contain element`),s.current&&s.current(),e.removeChild(c),i.current=null)},[e,s]);X(()=>a,[a]),t!=i.current&&(a(),t&&(r&&r(t),t.style.position="absolute",e.appendChild(t),o&&o(t)),i.current=t)}function bl({overlay:e,getPosition:t}){AD(e);let o=t(),r=Gd(),n=Eo(o,fs({current:e})),i=r.top+Yr,s=r.bottom-Yr,a=n.top<i,c=n.bottom>s;(a||c)&&(e.style.width||(e.style.width=`${xn(n).width}px`),e.style.overflowY="auto"),a?(e.style.top=`${Yr}px`,e.style.maxHeight=`${n.bottom-Yr}px`):(e.style.top=`${n.top}px`,e.style.maxHeight=`${s-n.top}px`),e.style.left=`${n.left}px`}function AD(e){e.style.maxHeight="",e.style.left="",e.style.top="",e.style.overflowY=""}function G_({html:e,layer:t,getOverlayPosition:o,getAppearKeyframes:r,getHideKeyframes:n,beforeMount:i,afterMount:s,opened:a,onClose:c,createOverlay:l,anchorTracking:m}){let u=e(a?l():null),{animating:p,element:S}=si({element:u,getAppearKeyframes:r,getHideKeyframes:n});ai({layer:Uo(t),element:S,beforeAppend:i,onAppend:y=>{bl({overlay:y,getPosition:()=>o(y)}),s&&s(y)}}),R_(S);let b=Q(()=>({current:S}),[S]);return Ct({target:b,onResize:()=>{S&&bl({overlay:S,getPosition:()=>o(d(S))})}}),Ct({target:document.body,onResize:()=>!p&&c(),ignoreObservationStart:!0}),hl(S&&m?m.anchorRef.current:null,S&&m?H(m.action,{close:c,move:()=>bl({overlay:S,getPosition:()=>o(S)})}):()=>{}),S}var vl=9,Y_=8;function Tl(e){return H(e,{start:-Y_,center:0,end:Y_})}function PD(e,t){return H(e,{left:{x:-vl,y:Tl(t)},right:{x:vl,y:Tl(t)},top:{x:Tl(t),y:-vl},bottom:{x:Tl(t),y:vl}})}function j_({html:e,anchorRef:t,tooltipProps:o,side:r,align:n,offset:i,onClose:s,anchorTrackingAction:a,disablePointer:c}){let l=n||"center",m=r||"top",u=i||PD(m,l);return G_({html:e,opened:!!o,layer:"tooltip",onClose:s,createOverlay:()=>o&&f(ul,{...o,getPointerTargetRect:c?void 0:()=>t.current.getBoundingClientRect()}),getAppearKeyframes:p=>U_({element:p,side:Kd({...Yd({relatedRef:t,overlayRef:{current:p}}),offset:u,align:l,side:m})}),getOverlayPosition:p=>ZS({...Yd({relatedRef:t,overlayRef:{current:p}}),offset:u,align:l,side:m}),anchorTracking:a&&{anchorRef:t,action:a}})}var OD=500,VD=500;function X_({html:e,anchorRef:t,tooltipProps:o,side:r,align:n,offset:i,stayOnHover:s=!1,show:a=!0,appearDelay:c=OD,hideDelay:l=VD}){let m=P(),{opened:u,hideInstantly:p}=Q_({overlayRef:m,anchorRef:t,stayOnHover:s,appearDelay:c,hideDelay:s?l:0});return m.current=j_({html:e,anchorRef:t,tooltipProps:u&&a?o:null,side:r,align:n,offset:i,onClose:p}),hl(u&&a?t.current:null,p),m.current}function Z_(e,t,o,r){if(t<0&&e==0||t>0&&e==o-1||t==0)return e;let n=Mf(t),i=l=>l+n;t=Math.abs(t);let s=e,a=r(i(s)),c=a/2;for(;c<t&&s<o&&s>=0;)c+=a/2,s=i(s),s>0&&s<o-1&&(a=r(i(s)),c+=a/2);return _t(s,0,o-1)}function J_({items:e,listRef:t,deps:o=[]}){let r=P(new Map);return A(()=>{let n=new ResizeObserver(()=>{let i=t.current.children;for(let s=0;s<i.length;++s){let a=i[s];if(a instanceof HTMLElement){let c=window.getComputedStyle(a),l=parseInt(c.marginTop,10)||0,m=parseInt(c.marginBottom,10)||0,u=l+a.offsetHeight+m;r.current.set(e[s],u)}}});return Array.from(t.current.children).forEach(i=>{n.observe(i)}),()=>{n.disconnect()}},[r,e,t,...o]),r}var ek=15,tk={current:window};function FD({items:e,item:t,heightsMapRef:o,gap:r}){var i;let n=0;for(let s of e){if(s===t)break;n+=((i=o.current.get(s))!=null?i:0)+r}return n}function KD(e,t,o){let r=e[t],n=e.slice();return t<o?(n.splice(o+1,0,r),n.splice(t,1)):(n.splice(t,1),n.splice(o,0,r)),n}function ok({scrollController:e,listRef:t,draggedItemRef:o,items:r,getItemId:n,onItemsChange:i,gap:s=0,deps:a=[]}){let c=J_({items:r,listRef:t,deps:a}),[l,m]=j(()=>null),u=P(!1),p=P(0),S=O(_=>e.getDomObject()instanceof Window?_:_+e.getScrollTop(),[e]),b=fe(n),y=O((_,C,T)=>{C.preventDefault();let h=r.findIndex(Z=>b.current(Z)===_);if(h===-1)throw new Error("invalid dragged item id");let x=r[h],B=t.current,L=d(window.getComputedStyle(B)),$=parseInt(L.paddingTop,10)||0,z=parseInt(L.paddingBottom,10)||0,ue=$+FD({items:r,item:x,heightsMapRef:c,gap:s});m({item:x,startIndex:h,startOffset:ue,startMouseY:S(C.pageY),listOffset:e.getRelativeElementOffset(B).y,listPaddingTop:$,listPaddingBottom:z,currItems:r,currIndex:h,onDragEnd:T}),u.current=!0},[r,t,c,s,S,e,b]);return Y(tk,"pointermove",l?_=>{var z;if(!u.current)return;_.preventDefault();let C=t.current,T=o.current,h=S(_.pageY)-l.startMouseY,x=(z=c.current.get(l.item))!=null?z:0,B=_t(l.startOffset+h,l.listPaddingTop,C.offsetHeight-l.listPaddingBottom-x);T.style.top=`${B}px`;let L=l.listOffset+B;L<e.getScrollTop()&&p.current>B?e.scrollBy(0,-ek):L+x>e.getScrollTop()+e.getClientHeight()&&p.current<B&&e.scrollBy(0,+ek),p.current=B;let $=Z_(l.startIndex,B-l.startOffset,r.length,ue=>{var Z;return((Z=c.current.get(r[ue]))!=null?Z:0)+s});$!==l.currIndex&&m(ue=>({...d(ue),currItems:KD(l.currItems,l.currIndex,$),currIndex:$}))}:null),Y(tk,"pointerup",l?()=>{let _=l.currIndex===l.startIndex?null:l.currItems;_&&i(_,l.item),m(null),u.current=!1,l.onDragEnd&&l.onDragEnd()}:null),{renderItems:l?l.currItems:r,renderIndex:l&&l.currIndex,startIndex:l&&l.startIndex,startOffset:l&&l.startOffset,startDrag:y}}var Xd=vt({});function rk(){return Ie(Xd)}var nk={container:"x28e79__container",draggedItem:"x28e79__dragged-item"};function ik(e,{items:t,getItemId:o,onItemsChange:r,getItemBinding:n,scrollController:i,gap:s,autotestData:a}){let c=V(),l=V(),{renderItems:m,renderIndex:u,startIndex:p,startOffset:S,startDrag:b}=ok({scrollController:i,listRef:c,draggedItemRef:l,items:t,getItemId:o,onItemsChange:r,gap:s});return e.setContext(Xd,b),e`
<div
	save-ref=${c}
	class=${nk.container}
	data-at=${ne(a)}
>
	${e.renderAll(m,(y,_)=>n(y,_,u===_?"hidden":"normal"))}
	${e.renderIf(LD,()=>u!==null&&S!==null&&p!==null&&{ref:l,binding:n(t[p],u,"dragged").binding,startOffset:S})}
</div>
`}function LD(e,{ref:t,binding:o,startOffset:r}){return X(()=>{t.current.style.top=`${r}px`},[t,r]),e`
<div
	save-ref=${t}
	class=${nk.draggedItem}
>
	${e(o)}
</div>`}function ci(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 4a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm0 6a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm1.5 7.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zM11 4a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm0 6a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm1.5 7.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" fill="currentColor"/></svg>
`}function sk(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.685 4.272a1 1 0 0 1 .043 1.413l-5.647 6a1 1 0 0 1-1.456 0l-2.353-2.5a1 1 0 0 1 1.456-1.37L6.353 9.54l4.919-5.226a1 1 0 0 1 1.413-.043z" fill="currentColor"/></svg>
`}var hs={wrapper:{withMods:e=>__getCssClass("xd4261__wrapper",e)},checkbox:{withMods:e=>__getCssClass("xd4261__checkbox",e)},input:"xd4261__input",checkIcon:"xd4261__check-icon",indeterminate:"xd4261__indeterminate"};function $D(e){return e`
<div class=${hs.indeterminate}></div>`}function ak(e,{id:t,checked:o,size:r,onCheckedRequest:n,autotestData:i,disabled:s=!1,hovered:a=!1}){let c=V(),l=mr(),m=O(p=>{p.preventDefault(),n(!o,p)},[o,n]);X(()=>{l.current.checked=!!o},[l,o]),Y(l,"click",p=>{p.defaultPrevented||m(p)}),Y(c,"click",p=>{!s&&!p.defaultPrevented&&m(p)});let u=o===null;return e`
<div 
	class=${hs.wrapper.withMods({disabled:s,size:r,hovered:a})}
	save-ref=${c}
>
	<div class=${hs.checkbox.withMods({size:r,indeterminate:u})}>
		<input
			id=${t}
			save-ref=${l}
			type="checkbox"
			class=${hs.input}
			disabled=${s}
			data-at=${ne(i)}
		>
		${e.switch(()=>o?f(sk,{},hs.checkIcon):u?f($D,{}):null)}
	</div>
</div>`}function ck(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#System20dpEyeClosed__a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.731 7.704c-.259.273-.53.529-.808.772-.172.153-.352.293-.531.435-.076.059-.148.125-.225.183l.819 1.031a1.04 1.04 0 0 1-.116 1.411.916.916 0 0 1-1.338-.123l-1.013-1.274a11.718 11.718 0 0 1-4.566 1.331v1.537c0 .554-.425 1.003-.949 1.003-.525 0-.949-.449-.949-1.003V11.47a11.728 11.728 0 0 1-4.567-1.331l-1.012 1.274a.915.915 0 0 1-1.337.123 1.038 1.038 0 0 1-.117-1.411l.819-1.031c-.077-.058-.149-.123-.224-.183-.179-.142-.36-.282-.532-.435a11.96 11.96 0 0 1-.807-.772 1.04 1.04 0 0 1 0-1.417.913.913 0 0 1 1.342 0c1.973 2.081 4.594 3.228 7.384 3.228 2.789 0 5.411-1.147 7.384-3.228a.914.914 0 0 1 1.343 0c.37.391.37 1.026 0 1.417z" fill="currentColor"/></g><defs><clipPath id="System20dpEyeClosed__a"><path fill="#fff" transform="translate(1 6)" d="M0 0h18v8H0z"/></clipPath></defs></svg>
`}function lk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.68 7.797a1 1 0 0 1-1.36 1.466c-3.283-3.05-6.345-3.568-8.832-3.125-2.55.453-4.625 1.942-5.78 3.099a1 1 0 0 1-1.415-1.414C2.637 6.48 5.063 4.716 8.137 4.17c3.138-.558 6.826.174 10.544 3.628zM8 11.03a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm2-4a4 4 0 1 0 0 8 4 4 0 0 0 0-8z" fill="currentColor"/></svg>
`}var ND={counter:"xbf8f9__counter"};function mk(e,{maxCount:t,count:o}){return e`
<div class=${ND.counter}>
	${`${o}/${t}`}
</div>`}function li(e,{component:t,tooltipText:o,size:r,stayOnHover:n,show:i,side:s,align:a,isPreventDefaultClick:c}){let l=P();return qt({html:e,elementRef:l,text:o,size:r,stayOnHover:n,show:i,side:s,align:a,isPreventDefaultClick:c}),Ae(e,t,l)}function uk(e){switch(e){case"bash":return"Bash";case"c":return"C";case"cpp":return"C++\u200E";case"csharp":return"C#\u200E";case"css":return"CSS";case"dart":return"Dart";case"delphi":return"Delphi";case"diff":return"Diff";case"go":return"Go";case"html":return"HTML";case"ini":return"Ini";case"java":return"Java";case"javascript":return"Javascript";case"json":return"Json";case"kotlin":return"Kotlin";case"latex":return"Latex";case"less":return"Less";case"lua":return"Lua";case"makefile":return"Makefile";case"markdown":return"Markdown";case"matlab":return"Matlab";case"objectivec":return"Objective C";case"pascal":return"Pascal";case"perl":return"Perl";case"php":return"Php";case"php-template":return"Php Template";case"plaintext":return"PlainText";case"python":return"Python";case"python-repl":return"Python repl";case"r":return"R";case"ruby":return"Ruby";case"rust":return"Rust";case"scss":return"SCSS";case"shell":return"Shell";case"sql":return"Sql";case"swift":return"Swift";case"typescript":return"Typescript";case"vbnet":return"VBNet";case"xml":return"XML";case"yaml":return"YAML";default:return I(e,`unknown code language: "${e}"`),""}}function dk(e){let t=[];for(let o of e)if(o.nodeType===Gs.TEXT){if(o.textContent){let r=document.createElement("span");r.textContent=o.textContent,t.push(r)}}else o.nodeType===Gs.ELEMENT&&(o.childNodes.length===1&&o.childNodes[0].nodeType===Gs.TEXT?t.push(o):t.push(...dk(o.childNodes)));return t}function pk(e,t){hljs.configure({classPrefix:`${Zd}-`});let o=hljs.highlight(e,{language:t}),r=document.createElement("div");r.innerHTML=o.value;let n=dk(r.childNodes),[i]=n.slice(-1);if(!i)return bt.ZERO_WIDTH_SPACE;i.innerHTML.endsWith(`
`)&&(i.innerHTML+=bt.ZERO_WIDTH_SPACE);let s=document.createElement("div");return s.append(...n),s.innerHTML}var mi={codeBlockView:"x14660__code-block-view",codeTextWrapper:{withMods:e=>__getCssClass("x14660__code-text-wrapper",e)},codeBlockControls:"x14660__code-block-controls",languageLabel:"x14660__language-label",copyButton:"x14660__copy-button",codeText:{withMods:e=>__getCssClass("x14660__code-text",e)}},Zd="code-text";function zD(e,{textToCopy:t}){let o=()=>{g_(t),v_(k("Roll.Common.CodeBlock.Copied"))};return Ce(e,{style:"linkSecondary",structure:"text",text:k("Roll.Common.CodeBlock.CopyCode"),onClick:o,size:"xSmall"})}function QD(e,{block:t}){return e`
<div class=${mi.codeBlockControls}>
	${e(zD,{textToCopy:w.getParagraphText(t.paragraph)},mi.copyButton)}
	<div class=${mi.languageLabel}>${uk(t.language)}</div>
</div>`}function HD(e,t){let[o,r]=j(!1),[n,i]=j(!1),s=ri(e),a=O(()=>{let c=t==="rtl"?Math.abs(Math.ceil(e.current.scrollLeft)):Math.ceil(e.current.scrollLeft),l=Math.ceil(e.current.scrollWidth-e.current.clientWidth),m=c>0,u=c<l;o!==m&&r(m),n!==u&&i(u)},[t,e,o,n]);return C_(s,a),Ct({target:e,onResize:a}),{"overflow-left":o,"overflow-right":n}}function UD(e,{block:t,readonlyMode:o,isLock:r}){let n=!r&&!o,i=o?null:k("Roll.Common.CodeBlock.Placeholder"),s=de(mi.codeText.withMods({empty:w.isEmptyParagraph(t.paragraph)}),Zd),a=Q(()=>pk(w.getParagraphText(t.paragraph),t.language),[t.language,t.paragraph]),c=t.fontSize==="auto"?{lineHeight:"auto"}:{fontSize:t.fontSize+"px",lineHeight:oi(t.fontSize)};return e`
<pre
    class=${s}
    data-key=${t.paragraph.key}
    contenteditable=${n}
	data-placeholder=${i}
	style=${c}
>${{html:a}}</pre>`}function WD(e,{block:t,readonlyMode:o,isLock:r,direction:n}){let i=V(),s=!o&&!r,a=HD(i,n);return e`
<div
	save-ref=${i}
	class=${mi.codeTextWrapper.withMods({rtl:n==="rtl",...a})}
	contenteditable="${s}"
>
	${e(UD,{block:t,readonlyMode:o,isLock:r})}
</div>`}function wl(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n}){let i=t;return e`
<div class=${mi.codeBlockView} dir="ltr">
	${e(WD,{block:i,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,direction:"ltr"})}
	${e(QD,{block:i})}
</div>`}var fk=null,hk=null;function je(e){if(!e.length||e.startsWith("data:")||e.startsWith("blob:"))return e;let t=e;return fk&&(t=`${fk}${e}`),hk&&(t=hk(t)),t}function qD(e,t){let o=e.width/t.width,r=e.height/t.height;return o>1||r>1?Math.max(o,r):1}function gk(e,t,o){let[r,n]=j(1),i=Q(()=>Dt(e),[e]),[s,a]=lr(t);return A(()=>{if(t.current){let c=t.current,l={width:o?o.width:c.clientWidth,height:o?o.height:c.clientHeight};n(qD(i,l))}},[t,i,o,s,a]),r}var Jd={imageSelection:"x9c461__image-selection",imageContainer:{withMods:e=>__getCssClass("x9c461__image-container",e)},image:{withMods:e=>__getCssClass("x9c461__image",e)}};function GD(e){return e`
<img
	class=${Jd.imageSelection}
	src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="
	tabIndex="-1"
	aria-hidden=true
	draggable=false
/>
`}function YD(e,{image:t,onClick:o,withImageSelection:r,withSize:n,withZoom:i,withFullImageUrl:s,outContainerRef:a,containerLimit:c}){let l=V(),m=Q(()=>Dt(t),[t]),u=gk(t,a,c),p=n?m.width/u:void 0,S=n?m.height/u:void 0,b=Yh(t),y=p&&S?`width: ${p}px; height: ${S}px;`:"";return e`
<div
	save-ref=${l}
	class=${Jd.image.withMods({withZoom:!!i})}
	style=${`
	    ${y}
		background: url(${s?t.src:je(t.src)}) no-repeat;
		background-size: ${b.width}% ${b.height}%;
		background-position: ${b.positionX}% ${b.positionY}%;`}
	onclick=${o}
>
	${e.renderIf(GD,()=>r)}
</div>
`}function jD(e,{image:t,withSize:o,withBackdrop:r,withImageSelection:n,withZoom:i,withFullImageUrl:s,outContainerRef:a,containerLimit:c,className:l="",onClick:m}){let u=V();return e`
<div
	class=${l+" "+Jd.imageContainer.withMods({fill:!o,origin:!!o,backdrop:!!r})}
	save-ref=${u}
>
	${e(YD,{image:t,withZoom:i,withSize:o,withImageSelection:n,withFullImageUrl:s,onClick:m,outContainerRef:a||u,containerLimit:c})}
</div>
`}function hr(e,{image:t,...o}){let r=Q(()=>({...t,crop:t.crop?t.crop:Pu()}),[t]),n={...o,image:r};return Ae(e,f(jD,n))}function yk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M15.5 4h-11A1.5 1.5 0 0 0 3 5.5v9A1.5 1.5 0 0 0 4.5 16h11a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 15.5 4zm-11-2A3.5 3.5 0 0 0 1 5.5v9A3.5 3.5 0 0 0 4.5 18h11a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 15.5 2h-11zm.75 5.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zm7.474 2.206a1 1 0 0 1 1.21.007l1.566 1.205V14.5h-11v-1.334l3.38-1.762a1 1 0 0 1 .908-.008L10 12l2.724-2.044z" fill="currentColor"/></svg>
`}var gs={stubContainer:"xced08__stub-container",preloaderContainer:"xced08__preloader-container",preloader:"xced08__preloader",loadingLabel:"xced08__loading-label",loadingText:"xced08__loading-text",selectionImage:"xced08__selection-image",cropImage:"xced08__crop-image"};function XD(e){return e`
<div class=${gs.stubContainer}>
	<div class=${gs.preloaderContainer}>
		${e(dr,{},gs.preloader)}
		<div class=${gs.loadingLabel}>
			${e(yk,{})}
			<div class=${gs.loadingText}>
				${k("Roll.Editor.ImageLoading.Label")}
			</div>
		</div>
	</div>
</div>`}function ZD(e,{image:t,onClick:o}){return Ae(e,f(hr,{image:t,withImageSelection:!0,onClick:o}))}function Ck(e,{imageBlock:t,className:o,onClick:r}){let{isBlob:n,src:i}=t,[s,a]=j(!n);return X(()=>{if(n){let c=new Image;c.onload=()=>a(!0),c.onerror=()=>a(!1),c.src=i}else a(!0)},[i,n]),e`
<div>
	${e.switch(()=>s?f(ZD,{image:t,onClick:r},o):f(XD,{},o))}
</div>`}var Sk={imageBlockWrapper:{withMods:e=>__getCssClass("x77dfc__image-block-wrapper",e)},imageBlockPlaceholder:"x77dfc__image-block-placeholder"};function _k(e,{imageBlock:t,isDraggable:o=!1,preventCollaging:r=!1,isLock:n,onClick:i,imageContentBinding:s}){let a=Dt(t).width,l=Dt(t).height/a*100,m=r?`${a}px`:null,u=s!=null?s:f(Ck,{imageBlock:t,className:"collaged-image",onClick:i});return e`
<div
	draggable=${o}
	class=${Sk.imageBlockWrapper.withMods({lock:n,zoomable:!!i})}
	style=${{"max-width":m}}
>
	${e(u)}
	<div class=${Sk.imageBlockPlaceholder} style=${{"padding-bottom":`${l}%`}}></div>
</div>`}function Gt(e,{paragraph:t,idPrefix:o,isLock:r,onHyperlinkOverFn:n,readonlyMode:i,paragraphClassName:s,placeholder:a}){let c=Q(()=>new Co({paragraph:t,idPrefix:o,placeholder:a}),[o,t,a]),l=Q(()=>{let m=pr(c,n,i,r);return s&&m.classList.add(...s.split(" ")),m},[c,r,n,i,s]);return e`
<div contenteditable=${!i&&!r} data-name="paragraph-wrapper">
	${l}
</div>`}var ep={captionWrapper:{withMods:e=>__getCssClass("x2b960__caption-wrapper",e)},paragraphWrapper:"x2b960__paragraph-wrapper",imageText:"x2b960__image-text"};function kk(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,showCaption:i=!1}){let s=V(),a=de(ep.imageText,"image-text"),c=w.create({key:t.key,characters:t.characters,textAlign:"center"});return X(()=>{s.current&&(s.current.style.display=i||t.characters.length?"block":"")},[t.characters.length,s,i]),e`
<figcaption
	save-ref=${s}
	class=${ep.captionWrapper.withMods({lock:o})}
>
	${e(Gt,{paragraph:c,idPrefix:"image-block",isLock:o,readonlyMode:r,onHyperlinkOverFn:n,placeholder:k("Roll.Editor.MediaCaptionDefaultText"),paragraphClassName:a},ep.paragraphWrapper)}
</figcaption>`}var JD={imageBlock:{withMods:e=>__getCssClass("x24829__image-block",e)},imageControls:"x24829__image-controls",imageDndIcon:"x24829__image-dnd-icon"};function xk(e,{block:t,readonlyMode:o,isLock:r,onHyperlinkOverFn:n,grow:i,imageContentBinding:s,imageControlsBinding:a,onClick:c,isFirst:l=!1,isLast:m=!1,isDraggable:u=!1,forceShowCaption:p=!1,preventCollaging:S=l&&m}){let b=t,y=t,_=JD.imageBlock.withMods({lock:!1,blob:y.isBlob,collaged:!!y.parentCollageKey,first:l,last:m}),C=i?{flex:`${i} 0 0`}:null;return e`
<figure
	data-collaged-key=${t.key}
	data-parent-collage-key=${y.parentCollageKey}
	class=${_}
	style="${C}"
	contenteditable="false"
	tabindex="-1"
>
	${e(_k,{imageBlock:b,imageContentBinding:s,isDraggable:u,isLock:r,preventCollaging:S,onClick:c})}
	${e(kk,{block:b,isLock:r,readonlyMode:o,onHyperlinkOverFn:n,showCaption:p})}
	${e(a)}
</figure>
`}var eE={layer:{withMods:e=>__getCssClass("xd16ae__layer",e)}};function Bk(e,{type:t,onClick:o}){return e`
<div
	class=${eE.layer.withMods({type:t})}
	onclick=${o}
>
</div>`}function bk(e){switch(e){case"right":return"left";case"left":return"right";case"center":case"bottom":return e;default:throw I(e),new Error}}var ys=220,jr="cubic-bezier(.24,.84,.26,.99)",tE=40,Tk=480,oE=360;function tp(e){return e<=Tk?oE:440}function op(e){return e<=Tk?280:320}function wk(e,t){return H(e,{center:{appearDuration:ys,hideDuration:ys,hideTranslate:[0,tE],appearTranslate:[0,0],fade:!0,easing:jr},right:{appearDuration:tp(t.getBoundingClientRect().width),hideDuration:op(t.getBoundingClientRect().width),hideTranslate:[t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:jr},bottom:{appearDuration:tp(t.getBoundingClientRect().height),hideDuration:op(t.getBoundingClientRect().height),hideTranslate:[0,t.getBoundingClientRect().height],appearTranslate:[0,0],fade:!1,easing:jr},left:{appearDuration:tp(t.getBoundingClientRect().height),hideDuration:op(t.getBoundingClientRect().height),hideTranslate:[-t.getBoundingClientRect().width,0],appearTranslate:[0,0],fade:!1,easing:jr}})}function vk([e,t]){return`translate(${e}px, ${t}px)`}function Dk({element:e,transformStart:t,transformEnd:o,opacity:r,duration:n,easing:i}){return new KeyframeEffect(e,[{transform:vk(t),...r?{opacity:r[0]}:{}},{transform:vk(o),...r?{opacity:r[1]}:{}}],{duration:n,easing:i,fill:"forwards"})}function Ek(e,t){let{hideTranslate:o,appearTranslate:r,fade:n,appearDuration:i,easing:s}=wk(e,t);return Dk({element:t,duration:i,transformStart:o,transformEnd:r,opacity:n?[0,1]:void 0,easing:s})}function Rk(e,t,o){let{hideTranslate:r,fade:n,appearTranslate:i,easing:s,hideDuration:a}=wk(e,t);return Dk({element:t,easing:s,duration:a,transformStart:i,transformEnd:r,opacity:n?[1,0]:void 0})}var rE=e=>new KeyframeEffect(e,[{opacity:0},{opacity:1}],{duration:ys,easing:jr,fill:"forwards"}),nE=e=>new KeyframeEffect(e,[{opacity:1},{opacity:0}],{duration:ys,easing:jr,fill:"forwards"}),Mk=iE();function Ik({html:e,layer:t,props:o}){let r=e.renderIf(Bk,()=>o),{element:n}=si({element:r,getAppearKeyframes:rE,getHideKeyframes:nE});ai({layer:t,element:n}),X(()=>{if(r)return t.style.pointerEvents="auto",Mk.increment(t),()=>{Mk.decrement(t)===0&&(t.style.pointerEvents="")}},[r,t])}function iE(){let e=new Map;function t(r){var i;let n=(i=e.get(r))!=null?i:0;return e.set(r,++n),n}function o(r){var i;let n=(i=e.get(r))!=null?i:0;return e.set(r,--n),n}return{increment:t,decrement:o}}function sE(e,t,o){switch(e){case"center":return{left:Math.round((t.offsetWidth-o.clientWidth)*.5),top:Math.round((t.offsetHeight-o.clientHeight)*.5)};case"right":return{top:0,bottom:0,right:0};case"bottom":return{bottom:0,left:0,right:0};case"left":return{top:0,bottom:0,left:0};default:throw I(e),new Error}}function Dl(e,t,o){let{left:r,top:n,bottom:i,right:s}=sE(e,t,o),a=c=>Xe(c)?`${c}px`:"";o.style.top=a(n),o.style.right=a(s),o.style.bottom=a(i),o.style.left=a(r)}var rp=new Map;function Ak({type:e,element:t,onModalOverlayClick:o}){let r=P(null),n=ii(),i=fe(o),s=Q(()=>(rp.has(e)||rp.set(e,[]),d(rp.get(e))),[e]);t&&r.current===null&&(r.current=s.push({idRef:r,redraw:n,onModalOverlayClick:()=>i.current&&i.current()})-1,r.current&&r.current>=1&&s[r.current-1].redraw()),!t&&r.current===s.length-1&&(r.current&&r.current>=1&&s[r.current-1].redraw(),s.pop(),r.current=null),X(()=>()=>{r.current!==null&&(s.splice(r.current),r.current=null)},[s]);let a=O(()=>{if(s.length){let c=s[s.length-1];c.onModalOverlayClick&&c.onModalOverlayClick()}},[s]);return{isFirst:r.current===0,activeElement:r.current===s.length-1?t:null,onModalOverlayClick:a}}function Pk(e,t){A(()=>{if(t){let o=e.style.overflow;return e.style.overflow="hidden",()=>{e.style.overflow=o}}},[t,e])}function Ok(e){Pk(window.document.body,e)}function ui({html:e,side:t,createModal:o,close:r,beforeUnmount:n,modalOverlayType:i="default",layer:s=Uo("popup")}){let a=e(o()),c=dn()?bk(t):t,{isFirst:l,activeElement:m,onModalOverlayClick:u}=Ak({type:c==="center"?"popup":"sidePanel",element:a,onModalOverlayClick:r});Ok(l),Ik({html:e,layer:s,props:l?{type:i,onClick:u}:null});let{element:p}=si({element:m,getAppearKeyframes:S=>Ek(c,S),getHideKeyframes:S=>Rk(c,S)});ai({layer:s,element:p,onAppend:S=>Dl(c,s,S),beforeUnmount:n}),Ct({target:document.body,onResize:()=>a&&Dl(c,s,a)}),Ct({target:a,onResize:()=>a&&Dl(c,s,a)})}function Cs({html:e,side:t,component:o,closeOnOverlayClick:r,modalOverlayType:n,onBeforeClose:i}){let[s,a]=j(null),c=O(()=>{i&&i(),a(null)},[i]);return ui({html:e,side:t,createModal:()=>s&&f(o,s),close:r?()=>c():void 0,modalOverlayType:n}),Q(()=>({open:a,close:()=>c()}),[c])}function Ss(){return"ontouchstart"in document.documentElement}function Vk(e,t,o,r=300){let n=P(0),i=P(0);function s(){n.current=0,clearTimeout(i.current)}Y(e,"click",c=>{c.preventDefault(),n.current+=1,n.current===1&&(i.current=setTimeout(()=>{o&&o(),s()},r)),n.current===2&&(t(),s())})}var np={area:"x473a7__area",button:{withMods:e=>__getCssClass("x473a7__button",e)},icon:"x473a7__icon"};function Fk(e,{onClick:t,style:o="default",icon:r=f(go),size:n="small",autotestId:i}){function s(a){a.defaultPrevented||(a.preventDefault(),t())}return e`
<div
	class=${np.area}
	onclick=${s}
	data-at=${ne({[WS]:"OverlayButton",[Md]:i})}
>
	<button
		class=${np.button.withMods({style:o,size:n})}
		onclick=${s}
	>
		${e(r,np.icon)}
	</button>
</div>
`}function Kk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.293 2.293a1 1 0 1 1 1.414 1.414L14.414 7H16a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1V4a1 1 0 1 1 2 0v1.586l3.293-3.293zm-14 14a1 1 0 1 0 1.414 1.414L7 14.414V16a1 1 0 1 0 2 0v-4a1 1 0 0 0-1-1H4a1 1 0 1 0 0 2h1.586l-3.293 3.293zM18 17v-4a1 1 0 1 0-2 0v3h-3a1 1 0 1 0 0 2h4a1 1 0 0 0 1-1zM3 2a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V4h3a1 1 0 0 0 0-2H3z" fill="currentColor"/></svg>
`}function Lk(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 10h14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function $k(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M11 3a1 1 0 1 0-2 0v6H3a1 1 0 0 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3z" fill="currentColor"/></svg>
`}function ip(e,t,o,r){let n=Math.abs(o.width-window.innerWidth)/2/r,i=-n,s=Math.abs(o.height-window.innerHeight)/2/r,a=-s,c=_t(e,i,n),l=_t(t,a,s);return{fittedX:c,fittedY:l}}function El(e,t,o,r,n){let i=o.x+(e.x-t.x)/n,s=o.y+(e.y-t.y)/n,{fittedX:a,fittedY:c}=ip(i,s,r,n);return{x:a,y:c}}function Rl(e,t){let o=e.current.offsetWidth*t,r=e.current.offsetHeight*t;return{horizontalOverflow:o>window.innerWidth,verticalOverflow:r>window.innerHeight}}function Ml(e,t){let o=P({horizontalOverflow:!1,verticalOverflow:!1});return A(()=>{o.current=Rl(e,t)},[e,o,t]),o}var Il={left:0,center:1,right:2},aE=1;function Nk(e){return e.buttons===aE}function di(e){e.stopPropagation()}function sp(e){Ri(e,(t,o)=>{zt(t),delete e[o]})}var Al=(e,t,o)=>St(e,t,r=>{try{o(r)===!0&&r.preventDefault(),vf()||fu()}catch(n){R.error(n)}});var So={WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255};function gr(e,t,o,r,n=!1,i=!0){let s=r||{};Y(e,"keydown",n?null:a=>{a.defaultPrevented||a.keyCode===t&&(s.ctrl===void 0||a.ctrlKey===s.ctrl)&&(s.shift===void 0||a.shiftKey===s.shift)&&(s.metaKey===void 0||a.metaKey===s.metaKey)&&(i&&a.preventDefault(),o(a))})}function zk(e,t,o,r){let n=P(window),i=Xs(),s=i?So.FF_DASH:So.DASH,a=i?So.FF_EQUALS:So.EQUALS;gr(n,s,t,r),gr(n,a,e,r),gr(n,So.NUM_MINUS,t,r),gr(n,So.NUM_PLUS,e,r),gr(n,So.ESC,o,r)}function Qk(e,t){A(()=>{function o(r){r.deltaY>0?t():e()}return window.addEventListener("wheel",o),()=>{window.removeEventListener("wheel",o)}},[t,e])}function cE(e,t,o,r,n){let i=P({x:0,y:0}),s=P(r),a=fe(r),c=P({width:0,height:0}),l=fe(n),m=Ml(t,o);A(()=>{let u=null,p=null,S=null,b=()=>{sp([p,S])},y=C=>{let T=C,h=l.current,x=a.current,B={x:T.clientX,y:T.clientY};Nk(C)?(C.preventDefault(),x=El(B,i.current,s.current,c.current,o)):b(),h({x:m.current.horizontalOverflow?x.x:a.current.x,y:m.current.verticalOverflow?x.y:a.current.y})},_=C=>{let T=C,h=t.current.getBoundingClientRect();c.current={width:h.width,height:h.height},s.current=a.current,i.current={x:T.clientX,y:T.clientY},C.preventDefault(),S=Al(window,"mouseup",b),p=Al(window,"mousemove",y)};return(m.current.horizontalOverflow||m.current.verticalOverflow)&&(u=Al(t.current,"mousedown",_)),()=>{sp([u,p,S])}},[o,a,t,l,m])}function Hk(e,t,o,r,n,i,s,a){Qk(i,s),zk(i,s,a),cE(e,t,o,r,n)}function lE(e){let t={x:e[0].pageX,y:e[0].pageY},o={x:e[1].pageX,y:e[1].pageY};return[t,o]}function ap(e){if(e.length===2){let[t,o]=lE(e);return Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2))}return 0}function Uk(e,t,o,r,n){let i=P({startTouchPointsDist:0,startZoomScale:1,startDragPosition:{x:0,y:0},gesture:"none"}),s=Ml(e,t),a=P(r),c=fe(r),l=P(),m=fe(n),u=O(T=>{i.current.gesture="pinch",i.current.startZoomScale=t,i.current.startTouchPointsDist=ap(T.touches)},[t]),p=O(T=>{let x=ap(T.touches)/i.current.startTouchPointsDist,B=t*x;o(B)},[t,o]),S=O(T=>{let h=e.current.getBoundingClientRect(),x=T.touches[0];l.current={width:h.width,height:h.height},i.current.startDragPosition={x:x.clientX,y:x.clientY},a.current=c.current,i.current.gesture="drag"},[c,e]),b=O(T=>{let h=m.current,x=c.current,B=T.touches[0],L={x:B.clientX,y:B.clientY};T.touches&&T.touches.length===1&&(x=El(L,i.current.startDragPosition,a.current,l.current,t)),h({x:s.current.horizontalOverflow?x.x:c.current.x,y:s.current.verticalOverflow?x.y:c.current.y})},[c,t,m,s]),y=O(T=>{T.cancelable&&T.preventDefault();let h=T;h.touches&&(h.touches.length===2&&i.current.gesture==="pinch"?p(h):h.touches.length===1&&i.current.gesture==="drag"&&(s.current.horizontalOverflow||s.current.verticalOverflow)&&b(h))},[b,p,s]),_=O(()=>{i.current.gesture="none",window.removeEventListener("touchmove",y),window.removeEventListener("touchend",_)},[y]),C=O(T=>{let h=T;h.touches&&(h.touches.length===2?u(h):h.touches.length===1&&S(h),window.addEventListener("touchmove",y,{passive:!1}),window.addEventListener("touchend",_))},[S,u,_,y]);A(()=>(window.addEventListener("touchstart",C),()=>{window.removeEventListener("touchstart",C)}),[C])}var pi={preview:"x2385b__preview",imageContainer:{withMods:e=>__getCssClass("x2385b__image-container",e)},image:{withMods:e=>__getCssClass("x2385b__image",e)},zoomToolbar:{withMods:e=>__getCssClass("x2385b__zoom-toolbar",e)},centerButton:"x2385b__center-button",closeCross:"x2385b__close-cross"},lp=.5,Zr=6,Xr=1;function mE(){let[e,t]=j(1);return{imageScale:e,setScale:s=>{s>=Zr?t(Zr):s<=Xr?t(Xr):t(s)},increaseScale:()=>{let s=e+lp;s<=Zr?t(s):t(Zr)},decreaseScale:()=>{let s=e-lp;s>=Xr?t(s):t(Xr)},resetScale:()=>{t(Xr)}}}function uE(e,t){let[o,r]=j(!0);return A(()=>{o?(e.current.style.bottom=hn("--tool-bar-bottom"),t.current.style.top=hn("--close-button-top")):(e.current.style.bottom=`-${e.current.offsetHeight}px`,t.current.style.top=`-${t.current.offsetHeight}px`)},[o,r,e,t]),{isToolsVisible:o,setUiVisibility:r}}function dE(e,{style:t,onClose:o}){return li(e,{component:f(Fk,{style:t==="dark"?"dark":"default",onClick:o},pi.closeCross),tooltipText:k("Common.Close"),side:"bottom",align:"start"})}function pE(e,{style:t,icon:o,onClick:r,disabled:n}){return Ce(e,{style:H(t,{light:"ghost",dark:"ghostInversed"}),size:"small",onClick:r,structure:"icon",icon:o,state:n?"disabled":"default"})}function cp(e,t){return li(e,{component:f(pE,t),tooltipText:t.tooltipText,show:!Ss()})}function fE(e,{style:t,increaseScale:o,decreaseScale:r,resetScale:n,scale:i,ref:s}){return Y(s,"click",a=>a.preventDefault()),e`
<div
	save-ref=${s}
	class=${pi.zoomToolbar.withMods({style:t})}
>
	${e(cp,{style:t,icon:f(Lk),tooltipText:k("Common.ImageZoom.Tooltip.Decrease"),onClick:r,disabled:i==Xr})}
	${e(cp,{style:t,icon:f(Kk),tooltipText:k("Common.ImageZoom.Tooltip.ResetScale"),onClick:n,disabled:i==Xr},pi.centerButton)}
	${e(cp,{style:t,icon:f($k),tooltipText:k("Common.ImageZoom.Tooltip.Increase"),onClick:o,disabled:i==Zr})}
</div>
`}function hE(e,{src:t,hasImageTransition:o,isTouchscreenDevice:r}){return e`
		<img
			class=${pi.image.withMods({transition:o,touchscreen:r})}
			src=${t}
			alt=''
		/>`}function Wk(e,{style:t,imageSrc:o,imageCrop:r,closeZoomFn:n}){let[i,s]=j(()=>({x:0,y:0})),[a,c]=j(!1),l=mE(),m=V(),u=V(),p=V(),S=V(),b=Ss(),{isToolsVisible:y,setUiVisibility:_}=uE(p,u),C=Z=>{let Je=Rl(S,Z),{fittedX:jt,fittedY:wi}=ip(i.x,i.y,{width:S.current.offsetWidth*Z,height:S.current.offsetHeight*Z},Z);s({x:Je.horizontalOverflow?jt:0,y:Je.verticalOverflow?wi:0})};function T(Z){c(!1),l.setScale(Z),C(Z)}function h(){c(!0),l.increaseScale()}function x(){c(!0),l.decreaseScale(),C(l.imageScale-lp)}function B(){c(!0),l.resetScale(),s({x:0,y:0})}function L(Z){c(!1),s(Z)}function $(){b&&_(!y)}function z(){b&&(y&&_(!1),l.imageScale>=Zr/2?B():(c(!0),l.setScale(Zr/2)))}Y(p,"click",Z=>Z.preventDefault()),Y(m,"click",Z=>{Z.defaultPrevented||(Z.preventDefault(),n())}),Vk(S,z,$),Uk(S,l.imageScale,T,i,L),Hk(m,S,l.imageScale,i,L,h,x,n),A(()=>{let Z=Rl(S,l.imageScale),Je=Z.horizontalOverflow||Z.verticalOverflow,jt=S.current.offsetWidth/2,wi=S.current.offsetHeight/2;S.current.style.cursor=Je?"move":"default",S.current.style.transformOrigin=`${jt-i.x}px ${wi-i.y}px`,S.current.style.transform=`translate(${i.x}px, ${i.y}px) scale(${l.imageScale})`},[S,l.imageScale,i,s]),X(()=>{m.current.style.height=`${window.innerHeight}px`});let ue={ref:S};return e`
<div
	class=${pi.preview}
	save-ref=${m}
>
	<div class=${pi.imageContainer.withMods({touchscreen:b})}
	>
		${e.renderIf(hE,()=>!r&&{src:o,hasImageTransition:a,isTouchscreenDevice:b},ue)}
		${e.renderIf(hr,()=>r&&{image:r,withSize:!0,outContainerRef:m},ue)}
	</div>
	${e(fE,{style:t,increaseScale:h,decreaseScale:x,resetScale:B,scale:l.imageScale,ref:p})}
	${e(dE,{style:t,onClose:n},{ref:u})}
</div>`}function Pl(e,{style:t}){let o=Cs({html:e,side:"center",component:Wk,closeOnOverlayClick:!0,modalOverlayType:t});return O((r,n=void 0)=>o.open({imageSrc:r,imageCrop:n&&n.crop?{...n,crop:n.crop}:void 0,closeZoomFn:o.close,style:t}),[o,t])}function qk(e,t){let o=t.block,r=Pl(e,{style:"light"});return Ae(e,f(xk,{...t,onClick:()=>r(je(o.src),o)}))}function Gk(e){let t=e.map(n=>{let i=Dt(n);return i.crop?i.width/i.height:n.width/n.height}),o=Math.min(...t);return{imagesGrows:t.map(n=>n/o),minImageRatio:o}}var Yk={collageBlock:{withMods:e=>__getCssClass("x7c5d9__collage-block",e)},collageBlockWrapper:{withMods:e=>__getCssClass("x7c5d9__collage-block-wrapper",e)},newImagePlaceholder:"x7c5d9__new-image-placeholder",blockMenuButton:"x7c5d9__block-menu-button",selectionFrame:"x7c5d9__selection-frame",imageDndIcon:"x7c5d9__image-dnd-icon"},gE=740;function Ol(e,{renderImageFn:t=qk,block:o,...r}){let n=V(),i=o,s=ae.isOneImageCollage(i),a=s,c=s?i.images[0].key:null,{imagesGrows:l}=Gk(i.images),m=yE(i,a,n),u=!0;return e`
<div
	save-ref=${n}
	data-key=${i.key}
	class=${Yk.collageBlockWrapper.withMods({"single-image":a})}>
	<figure
		class=${Yk.collageBlock.withMods({lock:!1,addingAnimated:!1,"dnd-mode":!1,"one-image":s,"read-only":u})}
		style=${m}
		data-key=${i.key}
		data-collaged-key=${c}
		data-block-type="${g.COLLAGE}"
		draggable="false"
		contenteditable="false"
		tabindex="-1"
	>
		${e.renderAll(i.images,(p,S)=>ye(p.key,t,{...r,block:p,grow:l[S],isFirst:!S,isLast:S===i.images.length-1,readonlyMode:u,isLock:!1,preventCollaging:a},"media-block_collaged"))}
	</figure>
</div>`}function yE(e,t,o){let[r]=lr(o);if(ae.isOneImageCollage(e)&&(document.body.clientWidth<=gE||e.alignment==="float-left"||t)){let n=e.images[0],i=Dt(n).width;return{[i<r?"min-width":"width"]:`${i}px`}}return null}var Po={SPAN:"SPAN",DIV:"DIV",SVG:"SVG",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",UL:"UL",OL:"OL",LI:"LI",P:"P",BR:"BR",B:"B",STRONG:"STRONG",I:"I",EM:"EM",A:"A",U:"U",S:"S",STRIKE:"STRIKE",SUP:"SUP",SUB:"SUB",IMG:"IMG",IFRAME:"IFRAME",BLOCKQUOTE:"BLOCKQUOTE",Q:"Q",FIGURE:"FIGURE",FIGCAPTION:"FIGCAPTION",LINK:"LINK",CANVAS:"CANVAS",INPUT:"INPUT",BUTTON:"BUTTON",TABLE:"TABLE",TD:"TD",HR:"HR",PRE:"PRE",CODE:"CODE"};var CE="data-key",jk="data-wrapper-key";var mSe=[Po.P,Po.H1,Po.H2,Po.H3,Po.BLOCKQUOTE,Po.PRE];function Xk(e,t=CE){for(;e.parentElement;){if(e.hasAttribute(t))return e;e=e.parentElement}return null}var mp={continueContent:{withMods:e=>__getCssClass("x17f33__continue-content",e)},paragraphWrapper:"x17f33__paragraph-wrapper",continueText:"x17f33__continue-text"};function SE(e){let t=pe(e.color);return{background:`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${e.opacity})`}}function _E(e,{paragraph:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n}){let i=de(mp.continueText,"continue-text");return Gt(e,{paragraph:t,idPrefix:"continue-block",isLock:o,readonlyMode:n,onHyperlinkOverFn:r,paragraphClassName:i})}function Zk(e,{block:t,isLock:o,onHyperlinkOverFn:r,onClick:n=()=>{},readonlyMode:i}){let s=Q(()=>SE(t.continueColor),[t.continueColor]);return e`
<div
	class=${mp.continueContent.withMods({readonly:i})}
	style=${s}
	onclick=${n}
>
	${e(_E,{paragraph:t.paragraph,isLock:o,readonlyMode:i,onHyperlinkOverFn:r},mp.paragraphWrapper)}
</div>`}var Jk={continueWrapper:"xab693__continue-wrapper",continueContent:"xab693__continue-content"};function e0(e,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,onClick:i}){let s=t;return e`
<div class=${Jk.continueWrapper}>
	${e(Zk,{block:s,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,onClick:i},{className:Jk.continueContent})}
</div>`}function kE(e){let t=e.current,o=Xk(t,jk),r=o&&o.parentElement;return r&&r.nextElementSibling}function t0(e,{block:t,continueProps:o,...r}){let n=V(),i=O(()=>{if(o){let s=kE(n);o.onContinueClick(t.key),s&&o.scrollToContinueGroupFn(s)}},[t.key,o,n]);return e`
<div
	data-key=${t.key}
	save-ref=${n}
	contenteditable="false"
	tabindex="-1"
>
	${e(e0,{...r,block:t,onClick:i,readonlyMode:!0})}
</div>`}var xE={embedIframe:{withMods:e=>__getCssClass("x78428__embed-iframe",e)}};function o0(e,{block:t,active:o,onContentResize:r}){let n=O(i=>{let s=i.target;try{let a=d(s.contentWindow),c=new ResizeObserver(()=>{c.unobserve(a.document.body),r(a.document.body.clientHeight/a.document.body.clientWidth)});c.observe(a.document.body)}catch(a){}},[r]);return e`
<iframe
	onload=${n}
	src=${t.src}
	allowfullscreen
	loading="lazy"
	class=${xE.embedIframe.withMods({rounded:t.alignment!=="full",active:o})}
>
</iframe>
`}var up={embedContainer:"x64f23__embed-container",embedContent:"x64f23__embed-content",embedBlockPlaceholder:"x64f23__embed-block-placeholder"};function BE(e,t){return e.width?{"padding-bottom":`${(t||e.height/e.width)*100}%`}:{width:"100%",height:`${e.height}px`}}function r0(e,{block:t,isDraggable:o=!1,isActive:r}){let[n,i]=j(0),s=BE(t,n);return e`
<div class=${up.embedContainer} draggable=${o}>
	${e(o0,{block:t,active:r,onContentResize:i},up.embedContent)}
	<div class=${up.embedBlockPlaceholder} style=${s}></div>
</div>`}var dp={paragraphWrapper:"x09d41__paragraph-wrapper",embedText:"x09d41__embed-text",captionWrapper:"x09d41__caption-wrapper"};function n0(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n}){let i=V(),s=de(dp.embedText,"embed-text"),a=w.create({key:t.key,characters:t.characters,textAlign:"center"});return A(()=>{i.current&&(i.current.style.display=t.characters.length?"block":"")},[t.characters.length,i]),e`
<figcaption
	save-ref=${i}
	class=${dp.captionWrapper}
>
	${e(Gt,{paragraph:a,idPrefix:"embed-block",isLock:o,readonlyMode:r,onHyperlinkOverFn:n,placeholder:k("Roll.Editor.MediaCaptionDefaultText"),paragraphClassName:s},dp.paragraphWrapper)}
</figcaption>`}var pp={embedBlockView:{withMods:e=>__getCssClass("x1777f__embed-block-view",e)},embedContainer:"x1777f__embed-container",textContainer:"x1777f__text-container"};function Vl(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,isSelected:i,isActive:s=!0,isDraggable:a=!1}){let c=t;return e`
<div
	class=${pp.embedBlockView.withMods({active:s,selected:i})}
>
	${e(r0,{block:c,isDraggable:a,isActive:s},pp.embedContainer)}
	${e(n0,{block:c,isLock:o,readonlyMode:r,onHyperlinkOverFn:n},pp.textContainer)}
</div>`}var i0={x:50,y:50},s0={color:"#000000",opacity:.3};function Fl(e){let t=ie.toLayoutBlock(e);return!!(t&&ie.isBackgroundLayoutBlock(t))}function bE(e){return Fl(e)}function Kl(e){var t,o;return(o=(t=e.designSettings)==null?void 0:t.background)==null?void 0:o.mediaResource}function a0(e){let t=Kl(e);return t==null?void 0:t.position}function vE(e){var t,o;return(o=(t=e.designSettings)==null?void 0:t.size)==null?void 0:o.minHeight}function c0(e){if(!bE(e))return"";let t=vE(e);return t?`${t}vh`:""}function l0(e){let t=ge.toDividerBlock(e);if(t&&ge.toDividerWithLineBlock(t))return t.alignment;let o=E.toTableBlock(e);if(o)return o.alignment;let r=G.toFlipCardsBlock(e);if(r)return r.cardsLayout==="full-width"?"full":r.cardsLayout;let n=ae.toCollageBlock(e);if(n)return n.alignment;let i=kt.toVideoBlock(e);if(i)return i.alignment;let s=gt.toMediaBlock(e);if(s)return s.alignment;let a=ie.toLayoutBlock(e);if(a)return a.alignment;let c=at.toQuizBlock(e);return c?c.alignment:null}var m0={text:{text:[16,16],none:[16,16],h1:[16,16],h2:[16,16],h3:[16,16],media:[16,16],"media-float-left":[16,16],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[16,16],attachment:[16,16],collage:[16,16],video:[16,16],note:[16,16],table:[16,16],"layout-column":[16,16],"layout-column-background":[32,32],"flip-cards":[16,16],"divider-line":[16,16],"divider-line-with-text":[16,16],"divider-arrow":[16,16],"divider-quotes":[16,16],"divider-diamonds":[16,16],continue:[16,16],snippet:[16,16],code:[16,16],ol:[16,16],ul:[16,16],blockquote:[16,16],pullquote:[16,16]},h1:{text:[56,4],none:[16,4],h1:[56,4],h2:[56,4],h3:[56,4],media:[56,4],"media-float-left":[56,4],"media-inner":[56,4],"media-outer":[56,4],"media-full":[56,4],quiz:[56,4],attachment:[56,4],collage:[56,4],video:[56,4],note:[56,4],table:[56,4],"layout-column":[56,4],"layout-column-background":[32,32],"flip-cards":[56,4],"divider-line":[56,4],"divider-line-with-text":[56,4],"divider-arrow":[56,4],"divider-quotes":[56,4],"divider-diamonds":[56,4],continue:[56,4],snippet:[56,4],code:[56,0],ol:[56,4],ul:[56,4],blockquote:[56,4],pullquote:[56,4]},h2:{text:[40,0],none:[16,0],h1:[40,0],h2:[40,0],h3:[40,0],media:[40,0],"media-float-left":[40,0],"media-inner":[40,0],"media-outer":[40,0],"media-full":[40,0],quiz:[40,0],attachment:[40,0],collage:[40,0],video:[40,0],note:[40,0],table:[40,0],"layout-column":[40,0],"layout-column-background":[32,32],"flip-cards":[40,0],"divider-line":[40,0],"divider-line-with-text":[40,0],"divider-arrow":[40,0],"divider-quotes":[40,0],"divider-diamonds":[40,0],continue:[40,0],snippet:[40,0],code:[40,0],ol:[40,0],ul:[40,0],blockquote:[40,0],pullquote:[40,0]},h3:{text:[24,0],none:[16,0],h1:[24,0],h2:[24,0],h3:[24,0],media:[24,0],"media-float-left":[24,0],"media-inner":[24,0],"media-outer":[24,0],"media-full":[24,0],quiz:[24,0],attachment:[24,0],collage:[24,0],video:[24,0],note:[24,0],table:[24,0],"layout-column":[24,0],"layout-column-background":[32,32],"flip-cards":[24,0],"divider-line":[24,0],"divider-line-with-text":[24,0],"divider-arrow":[24,0],"divider-quotes":[24,0],"divider-diamonds":[24,0],continue:[24,0],snippet:[24,0],code:[24,0],ol:[24,0],ul:[24,0],blockquote:[24,0],pullquote:[24,0]},quiz:{text:[40,40],none:[40,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},attachment:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[8,8],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},snippet:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[8,8],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},code:{text:[16,16],none:[16,16],h1:[16,16],h2:[16,16],h3:[16,16],media:[16,16],"media-float-left":[16,16],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[16,16],attachment:[16,16],collage:[16,16],video:[16,16],note:[16,16],table:[16,16],"layout-column":[16,16],"layout-column-background":[32,32],"flip-cards":[16,16],"divider-line":[16,16],"divider-line-with-text":[16,16],"divider-arrow":[16,16],"divider-quotes":[16,16],"divider-diamonds":[16,16],continue:[16,16],snippet:[16,16],code:[16,16],ol:[16,16],ul:[16,16],blockquote:[16,16],pullquote:[16,16]},collage:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[16,16],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},video:{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[16,16],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-float-left":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-inner":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-outer":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"media-full":{text:[40,40],none:[16,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[16,16],"media-outer":[16,16],"media-full":[16,16],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},"flip-cards":{text:[40,40],none:[40,40],h1:[40,40],h2:[40,40],h3:[40,40],media:[40,40],"media-float-left":[40,40],"media-inner":[40,40],"media-outer":[40,40],"media-full":[40,40],quiz:[40,40],attachment:[40,40],collage:[40,40],video:[40,40],note:[40,40],table:[40,40],"layout-column":[40,40],"layout-column-background":[32,32],"flip-cards":[40,40],"divider-line":[40,40],"divider-line-with-text":[40,40],"divider-arrow":[40,40],"divider-quotes":[40,40],"divider-diamonds":[40,40],continue:[40,40],snippet:[40,40],code:[40,40],ol:[40,40],ul:[40,40],blockquote:[40,40],pullquote:[40,40]},table:{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32]},"layout-column":{text:[32,32],none:[32,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32]},"layout-column-background":{text:[64,64],none:[64,64],h1:[64,64],h2:[64,64],h3:[64,64],media:[64,64],"media-float-left":[64,64],"media-inner":[64,64],"media-outer":[64,64],"media-full":[64,64],quiz:[64,64],attachment:[64,64],collage:[64,64],video:[64,64],note:[64,64],table:[64,64],"layout-column":[64,64],"layout-column-background":[64,64],"flip-cards":[64,64],"divider-line":[64,64],"divider-line-with-text":[64,64],"divider-arrow":[64,64],"divider-quotes":[64,64],"divider-diamonds":[64,64],continue:[64,64],snippet:[64,64],code:[64,64],ol:[64,64],ul:[64,64],blockquote:[64,64],pullquote:[64,64]},note:{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[32,32],ul:[32,32],blockquote:[32,32],pullquote:[32,32]},blockquote:{text:[24,24],none:[16,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},pullquote:{text:[56,56],none:[24,56],h1:[56,56],h2:[56,56],h3:[56,56],media:[56,56],"media-float-left":[56,56],"media-inner":[56,56],"media-outer":[56,56],"media-full":[56,56],quiz:[56,56],attachment:[56,56],collage:[56,56],video:[56,56],note:[56,56],table:[56,56],"layout-column":[56,56],"layout-column-background":[32,32],"flip-cards":[56,56],"divider-line":[56,56],"divider-line-with-text":[56,56],"divider-arrow":[56,56],"divider-quotes":[56,56],"divider-diamonds":[56,56],continue:[56,56],snippet:[56,56],code:[56,56],ol:[56,56],ul:[56,56],blockquote:[56,56],pullquote:[56,56]},"divider-line":{text:[0,0],none:[0,0],h1:[0,0],h2:[0,0],h3:[0,0],media:[0,0],"media-float-left":[0,0],"media-inner":[0,0],"media-outer":[0,0],"media-full":[0,0],quiz:[0,0],attachment:[0,0],collage:[0,0],video:[0,0],note:[0,0],table:[0,0],"layout-column":[0,0],"layout-column-background":[32,32],"flip-cards":[0,0],"divider-line":[0,0],"divider-line-with-text":[0,0],"divider-arrow":[0,0],"divider-quotes":[0,0],"divider-diamonds":[0,0],continue:[0,0],snippet:[0,0],code:[0,0],ol:[0,0],ul:[0,0],blockquote:[0,0],pullquote:[0,0]},"divider-line-with-text":{text:[24,24],none:[16,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},"divider-arrow":{text:[24,24],none:[24,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},"divider-quotes":{text:[32,0],none:[24,0],h1:[32,0],h2:[32,0],h3:[32,0],media:[32,0],"media-float-left":[32,0],"media-inner":[32,0],"media-outer":[32,0],"media-full":[32,0],quiz:[32,0],attachment:[32,0],collage:[32,0],video:[32,0],note:[32,0],table:[32,0],"layout-column":[32,0],"layout-column-background":[32,32],"flip-cards":[32,0],"divider-line":[32,0],"divider-line-with-text":[32,0],"divider-arrow":[32,0],"divider-quotes":[32,0],"divider-diamonds":[32,0],continue:[32,0],snippet:[32,0],code:[32,0],ol:[32,0],ul:[32,0],blockquote:[32,0],pullquote:[32,0]},"divider-diamonds":{text:[24,24],none:[24,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[24,24],ul:[24,24],blockquote:[24,24],pullquote:[24,24]},continue:{text:[64,40],none:[64,40],h1:[64,40],h2:[64,40],h3:[64,40],media:[64,40],"media-float-left":[64,40],"media-inner":[64,40],"media-outer":[64,40],"media-full":[64,40],quiz:[64,40],attachment:[64,40],collage:[64,40],video:[64,40],note:[64,40],table:[64,40],"layout-column":[64,40],"layout-column-background":[32,32],"flip-cards":[64,40],"divider-line":[64,40],"divider-line-with-text":[64,40],"divider-arrow":[64,40],"divider-quotes":[64,40],"divider-diamonds":[64,40],continue:[64,40],snippet:[64,40],code:[64,40],ol:[64,40],ul:[64,40],blockquote:[64,40],pullquote:[64,40]},ol:{text:[32,32],none:[16,32],h1:[32,32],h2:[32,32],h3:[32,32],media:[32,32],"media-float-left":[32,32],"media-inner":[32,32],"media-outer":[32,32],"media-full":[32,32],quiz:[32,32],attachment:[32,32],collage:[32,32],video:[32,32],note:[32,32],table:[32,32],"layout-column":[32,32],"layout-column-background":[32,32],"flip-cards":[32,32],"divider-line":[32,32],"divider-line-with-text":[32,32],"divider-arrow":[32,32],"divider-quotes":[32,32],"divider-diamonds":[32,32],continue:[32,32],snippet:[32,32],code:[32,32],ol:[16,16],ul:[16,16],blockquote:[32,32],pullquote:[32,32]},ul:{text:[24,24],none:[16,24],h1:[24,24],h2:[24,24],h3:[24,24],media:[24,24],"media-float-left":[24,24],"media-inner":[24,24],"media-outer":[24,24],"media-full":[24,24],quiz:[24,24],attachment:[24,24],collage:[24,24],video:[24,24],note:[24,24],table:[24,24],"layout-column":[24,24],"layout-column-background":[32,32],"flip-cards":[24,24],"divider-line":[24,24],"divider-line-with-text":[24,24],"divider-arrow":[24,24],"divider-quotes":[24,24],"divider-diamonds":[24,24],continue:[24,24],snippet:[24,24],code:[24,24],ol:[8,8],ul:[8,8],blockquote:[24,24],pullquote:[24,24]}};function Ll(e,t){return m0[e][t][0]}function $l(e,t){return m0[e][t][1]}function Oo(e){let t=q(e);if(t)return t.viewType;let o=at.toQuizBlock(e);if(o)return at.getBlockType(o);let r=Do.toAttachmentBlock(e);if(r)return Do.getBlockType(r);let n=ae.toCollageBlock(e);if(n)return ae.getBlockType(n);let i=Vt.toNoteBlock(e);if(i)return Vt.getBlockType(i);let s=E.toTableBlock(e);if(s)return E.getBlockType(s);let a=ie.toLayoutBlock(e);if(a)return ie.getBlockType(a);let c=G.toFlipCardsBlock(e);if(c)return G.getBlockType(c);let l=ge.toDividerBlock(e);if(l)return ge.getBlockType(l);let m=Re.toContinueBlock(e);if(m)return Re.getBlockType(m);let u=kt.toVideoBlock(e);if(u)return kt.getBlockType(u);let p=za.toEmbedBlock(e);if(p)return lo.getBlockType(p);let S=tr.toSnippetBlock(e);if(S)return tr.getBlockType(S);let b=Rt.toCodeBlock(e);return b?Rt.getBlockType(b):""}var fp={mediaResource:"x90055__media-resource",image:{withMods:e=>__getCssClass("x90055__image",e)},overlay:"x90055__overlay"};function TE(e,{mediaResource:t,position:o,showStub:r}){let n=V(),[i,s]=j(!1),{crop:a,src:c,width:l,height:m}=(t==null?void 0:t.resource)||{};A(()=>{a&&l&&m&&c&&(s(!0),jh({src:je(c),crop:a,width:l,height:m}).then(S=>{if(n.current){let b=n.current;b.src=URL.createObjectURL(S),s(!1)}}))},[a,m,l,n,s,c]);let u=Q(()=>({"object-position":`${o.x}% ${o.y}%`}),[o]),p=!a&&c?je(c):void 0;return e`
<img
	data-background-image="true"
	save-ref=${n}
	src=${p}
	class=${fp.image.withMods({stub:!p&&r,loading:i})}
	style=${u}
/>
	`}function u0(e,{block:t,showStub:o=!0}){let r=Kl(t),n={"background-color":ca((r==null?void 0:r.overlay)||s0)};return e`
<div 
	class=${fp.mediaResource} 
	contenteditable="false"
>
	${e(TE,{mediaResource:Kl(t),showStub:o,position:a0(t)||i0})}
	<div
		class=${fp.overlay}
		style=${n}
	></div>
</div>`}var d0={blockWrapper:{withMods:e=>__getCssClass("xa4510__block-wrapper",e)},alignmentBlockWrapper:{withMods:e=>__getCssClass("xa4510__alignment-block-wrapper",e)}},wE=.89,p0=e=>At()?e*wE:e,hp=(e,t)=>{var o,r;return p0(e.designSettings&&((r=(o=e.designSettings)==null?void 0:o.padding)==null?void 0:r.top)!==void 0?e.designSettings.padding.top:Ll(Oo(e),t))},gp=(e,t)=>{var o;return p0(e.designSettings&&((o=e.designSettings.padding)==null?void 0:o.bottom)!==void 0?e.designSettings.padding.bottom:$l(Oo(e),t))};function Nl(e,{selectionBinding:t,controlsBinding:o,blockWrapperExtendClassList:r,...n}){let{block:i,blockAfterType:s,continueProps:a,direction:c,paragraphProps:l}=n,m=V(),u=w.isList(i),p=i.type===g.LAYOUT?i.key:null,S=Q(()=>{let y=lo.toAbstractMediaBlock(i),_=q(i),C=s==="ol"||s==="ul";return de(d0.blockWrapper.withMods({"fit-content":ae.isCollageBlock(i),"float-left":!!y&&y.alignment==="float-left","clear-both":!_,"before-lists":C,dir:c,hidden:!!a&&a.isHidden,list:u}),r)},[i,s,c,a,u,r]),b=Q(()=>{var C,T;let y=l&&l.counterReset!==void 0?`li ${l.counterReset}`:"";return{"background-color":ca((T=(C=i.designSettings)==null?void 0:C.background)==null?void 0:T.color),"counter-reset":y}},[i,l]);return e`
<div
	save-ref=${m}
    class=${S}
	style=${b}
    draggable="false"
    data-wrapper-key=${i.key}
	data-context-block-key=${p}
>
	${e.renderIf(u0,()=>Fl(i)&&{block:i})}
	${e(t)}
	${e(o)}
	${e(DE,{...n,wrapperRef:Fl(i)?m:void 0})}
</div>`}function DE(e,t){let{block:o,blockBeforeType:r,blockAfterType:n,sizeWrapperExtendClassList:i}=t,s=V(),a=Q(()=>de(i),[i]),c=Q(()=>{let l={"padding-block-start":`${hp(o,r)}px`,"padding-block-end":`${gp(o,n)}px`};return s&&s.current&&(Te(s.current,"--top-padding-height",l["padding-block-start"]),Te(s.current,"--bottom-padding-height",l["padding-block-end"])),l},[o,n,r,s]);return e`
<div
	class=${a}
	save-ref=${s}
	style=${c}
    draggable="false"
>
	${e(EE,t)}
</div>`}function EE(e,{content:t,columnsDropAreaBinding:o,contextKey:r,...n}){let i=n.block,s=l0(i),a=ie.toLayoutBlock(i),c=a&&a.alignment==="full"?"full-layout":s||"inner";return e`
<div
    class=${d0.alignmentBlockWrapper.withMods({align:c})}
    draggable="false"
>
	${e(t,n)}
	${e(o)}
</div>`}var zl=class extends oe{constructor(t){super({blockName:"insert-indicator"}),this.updateModifier("type",t)}_render(){return this._html`
			<div class=${this._getCssClasses()}></div>`}};function Cp(e,t){let o=bo(e,t-1);return o?Oo(o):"none"}function Sp(e,t){let o=bo(e,t+1);return o?Oo(o):"none"}var yp={},Ql=class{constructor(t,o){this.type=t,this.items=[],this.counterReset=o}},Hl=class extends oe{constructor(t,o){super({blockName:t,direction:o}),this._renderers={},this._readonlyMode=!1,this._renderedBlockIndex=0,this._prevFloatedElementRenderer=null,this.onHyperlinkOver=this._createSignal(),this._relatedGroupData={},this._wrapperRenderFn=Nl}getLockedBlocks(){return[]}setReadonlyMode(t){this._readonlyMode!==t&&(this._readonlyMode=t,this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._sheduleRender())}registerRenderer(t,o){this._renderers[t]=o}_getReadonlyMode(){return this._readonlyMode}_getBlockMap(){}_getParagraphPlaceholder(t){return""}_getParagraphPrompt(t){return""}_getGroupRelatedData(){return this._relatedGroupData}_getListId(t){return t.items.filter(o=>!(o instanceof zl)).reduce((o,r)=>`${o}-${r.key}`,"")}isLock(t){return!1}isHidden(t){return!1}isSelected(t){}_renderBlock(t,o,r){let n=this._getPrevBlockType(this._renderedBlockIndex),i=this._getNextBlockType(this._renderedBlockIndex);this._renderedBlockIndex++;let s=q(t),a=s?{placeholder:this._getParagraphPlaceholder(s),prompt:this._getParagraphPrompt(s),paragraphIndex:o,counterReset:r}:void 0,c=this._renderers[t.type],l=c({block:t,blockBeforeType:n,blockAfterType:i,onHyperlinkOverFn:this.onHyperlinkOver.toFn(),readonlyMode:this._readonlyMode,isLock:this.isLock(t),direction:this._direction,isSelected:this.isSelected(t),paragraphProps:a});if(l instanceof Element)return l;let m=lo.toAbstractMediaBlock(t);return m&&m.alignment==="float-left"&&(this._prevFloatedElementRenderer=l),l.domElement()}bindingBlockRenderer(t,o,r,n){return r in yp||(yp[r]={}),Pe(this._wrapperRenderFn)({...o,content:t},Qo(yp[r],o.block.key,n))}_getPrevBlockType(t){let o=this._getBlockMap();return Cp(o,t)}_getNextBlockType(t){let o=this._getBlockMap();return Sp(o,t)}_processBlock({blocks:t,block:o}){t.push(o)}_getBlockGroups(t,o=0){let r=[],n=null,i=o;return be.forEach(t,s=>{if(w.isList(s)){let a=d(q(s));n&&n.type!==a.viewType&&(r.push(n),n=null);let c=a.viewType==="ol"&&!!a.isOrderedListFirstItem;c&&(i=0),(!n||c)&&(n&&r.push(n),n=new Ql(a.viewType,i)),a.viewType==="ol"&&++i,this._processBlock({blocks:n.items,block:s});return}n&&(r.push(n),n=null),this._processBlock({blocks:r,block:s})}),n&&r.push(n),r}_renderBlockGroup(t,o,r=0){return t.items.map((n,i)=>this._renderBlock(n,i,i===r?t.counterReset:void 0))}_renderBlocks(t,o){this._renderedBlockIndex=0;let r=this._getBlockGroups(t,o),n=[];return r.forEach((i,s)=>i instanceof Ql?n.push(...this._renderBlockGroup(i,s)):n.push(this._renderBlock(i,s))),n}};function f0(e,t){return{blockBeforeType:Cp(e,t),blockAfterType:Sp(e,t)}}function h0(){let e=P(0);return O(({block:t,blockBeforeType:o})=>{o==="none"&&(e.current=0);let r,n=o!=="ol",i=q(t);if(i&&i.viewType==="ol"){let s=!!i.isOrderedListFirstItem;s&&(e.current=0),(n||s)&&(r={counterReset:e.current}),e.current++}return r},[e])}function g0(e,{contentState:t,innerWidth:o=80,getBlockRendererFn:r,...n}){let i=t.blockMap,s=h0();return e`
<div style="--inner-width: ${o}%; --inner-max-width: ${o}%" >
	${e.renderAll(i.order,(a,c)=>{let l=i.blocks[a],m=f0(i,c),p=s({block:l,blockBeforeType:m.blockBeforeType});return ye(a,Nl,{...n,...m,contextKey:a,block:l,paragraphProps:p,content:r(l.type,{...n,...m,paragraphProps:p,block:l,isSelected:!1})})})}
</div>
`}var y0={layoutBlock:{withMods:e=>__getCssClass("x19476__layout-block",e)},col:"x19476__col"};function RE(e,{countCol:t,contentState:o,colKey:r,richTextRenderFn:n,getBlockRendererFn:i,...s}){return e`
<div
	class=${y0.col}
	contenteditable=${!s.readonlyMode}
	data-context-col-key=${r}
>
	${e(n,{...s,contentState:o,innerWidth:100,getBlockRendererFn:i})}
</div>
`}function C0(e,t){let o=t.block,r={"vertical-align":o.verticalBlockAlign,type:ie.getColumnType(o)},n=Q(()=>{let i=hp(o,t.blockBeforeType),s=gp(o,t.blockAfterType);return{"min-height":`calc(${c0(o)} - ${i}px - ${s}px)`}},[o,t.blockAfterType,t.blockBeforeType]);return e`
<div
	class=${y0.layoutBlock.withMods(r)}
	style=${n}
	data-key=${o.key}
>
	${e.renderAll(o.colsOrder,i=>{let s=o.colsMap[i];return ye(i,RE,{...t,countCol:o.colsOrder.length,contentState:s,colKey:i})})}
</div>
`}function S0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1a7.7 7.7 0 0 1 7.7 7.7c0 2.527-1.466 4.578-2.91 6.598-.406.566-.81 1.13-1.178 1.702H8.388c-.369-.572-.772-1.136-1.177-1.702C5.766 13.278 4.3 11.227 4.3 8.7A7.7 7.7 0 0 1 12 1zm3.3 19.8V19H8.7v1.8a2.2 2.2 0 0 0 2.2 2.2h2.2a2.2 2.2 0 0 0 2.2-2.2zM12.725 3.044a1 1 0 0 0-.242 1.985 4 4 0 0 1 3.45 3.242 1 1 0 0 0 1.966-.365 6 6 0 0 0-5.174-4.862z" fill="currentColor"/></svg>
`}function _0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-9.68-4.98a1.62 1.62 0 1 1-3.24 0 1.62 1.62 0 0 1 3.24 0zM9.5 10.8a1 1 0 0 1 1-1h1.8a1 1 0 0 1 1 1v5h1.2v2h-4.4v-2h1.2v-4h-.8a1 1 0 0 1-1-1z" fill="currentColor"/></svg>
`}function k0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM7 11a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2H7z" fill="currentColor"/></svg>
`}function x0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM13 7a1 1 0 1 0-2 0v4H7a1 1 0 1 0 0 2h4v4a1 1 0 1 0 2 0v-4h4a1 1 0 1 0 0-2h-4V7z" fill="currentColor"/></svg>
`}function B0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zM9.998 8.834v-.009a1 1 0 0 1-2-.007c0-.351.117-.726.266-1.048.158-.344.394-.714.713-1.057.649-.7 1.654-1.295 3.021-1.295 2.64 0 4 1.876 4 3.4V9.563a3.24 3.24 0 0 1-2.604 3.176.493.493 0 0 0-.396.483v.576a1 1 0 1 1-2 0v-.576c0-1.188.839-2.211 2.004-2.444a1.24 1.24 0 0 0 .996-1.215V8.818c0-.392-.437-1.4-2-1.4-.734 0-1.23.304-1.555.655a2.104 2.104 0 0 0-.364.537c-.055.119-.073.193-.079.216a.033.033 0 0 1-.002.008zM12 16.02a1.25 1.25 0 1 1 0 2.5 1.25 1.25 0 0 1 0-2.5z" fill="currentColor"/></svg>
`}function b0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M23 12c0 6.075-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1s11 4.925 11 11zm-5.74-2.35a1 1 0 0 0-1.52-1.3l-5.296 6.18-2.737-2.737a1 1 0 0 0-1.414 1.414l3.5 3.5a1 1 0 0 0 1.466-.056l6-7z" fill="currentColor" opacity=".9"/></svg>
`}function v0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 5.32A2.4 2.4 0 0 0 1 7.425v9.151a2.4 2.4 0 0 0 1.25 2.107l8.6 4.69a2.4 2.4 0 0 0 2.299 0l8.6-4.69a2.4 2.4 0 0 0 1.25-2.107v-9.15a2.4 2.4 0 0 0-1.25-2.108l-8.6-4.69a2.4 2.4 0 0 0-2.299 0l-8.6 4.69zm6.857 2.372a1 1 0 0 0-1.414 1.414L10.586 12l-2.893 2.893a1 1 0 1 0 1.414 1.414L12 13.413l2.893 2.893a1 1 0 0 0 1.414-1.414L13.414 12l2.893-2.893a1 1 0 1 0-1.414-1.414L12 10.585 9.107 7.692z" fill="currentColor"/></svg>
`}function T0(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.612 4.62c-1.149-2.031-4.075-2.031-5.224 0L1.53 18.525C.4 20.524 1.844 23 4.142 23h15.716c2.297 0 3.742-2.476 2.612-4.476L14.612 4.62zM12 8.5a1 1 0 0 1 1 1v5a1 1 0 0 1-2 0v-5a1 1 0 0 1 1-1zm1.5 9.8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z" fill="currentColor"/></svg>
`}var fi={noteBlockView:"x794e6__note-block-view",dndLayer:"x794e6__dnd-layer",noteTextWrapper:{withMods:e=>__getCssClass("x794e6__note-text-wrapper",e)},paragraph:"x794e6__paragraph",noteText:"x794e6__note-text",iconWrapper:{withMods:e=>__getCssClass("x794e6__icon-wrapper",e)}};function ME(e){switch(e){case"correct":return f(b0);case"incorrect":return f(v0);case"info":return f(_0);case"minus":return f(k0);case"plus":return f(x0);case"question":return f(B0);case"warning":return f(T0);case"bulb":return f(S0);case"withoutIcon":return null;default:I(e,`Unknown note type: ${e}`)}}function IE(e,{iconBinding:t,iconColor:o}){return e`
<div
	style=${{color:o.color,opacity:o.opacity}}
>
	${e(t)}
</div>`}function AE(e,{backgroundColor:t,draggable:o}){return e`
<div
	draggable=${o}
	class=${fi.dndLayer}
	style=${{background:t.color,opacity:t.opacity}}
></div>`}function Ul(e,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n}){var m;let i=t,s=!n&&!o,a=ME(i.noteType),c=Q(()=>w.create({key:i.key,characters:i.characters}),[i.characters,i.key]),l=de(fi.noteText,"note-text");return e`
<div class=${fi.noteBlockView}>
	${e(AE,{backgroundColor:(m=i.customBackgroundColor)!=null?m:Ni.getBackgroundColorData(i.noteType),draggable:s})}
	<div class=${fi.iconWrapper.withMods({"with-icon":!!a})}>
		${e.renderIf(IE,()=>{var u;return!!a&&{iconBinding:a,iconColor:(u=i.customIconColor)!=null?u:Ni.getIconColorData(i.noteType)}})}
	</div>
	<div
		class=${fi.noteTextWrapper.withMods({"with-icon":!!a})}
		contenteditable="false"
	>
		${e(Gt,{paragraph:c,idPrefix:"note-text",onHyperlinkOverFn:r,readonlyMode:n,isLock:o,paragraphClassName:l,placeholder:k("Roll.Note.Placeholder")},fi.paragraph)}
	</div>
</div>`}var PE={dividerContainer:"x17200__divider-container"};function hi(e,{figure:t}){return e`
<div class=${PE.dividerContainer}>
	${e(t)}
</div>`}var OE=16,VE=56;function FE(e){return e`
<svg width=${OE} height=${VE} fill="currentColor">
	<mask id="path-1-inside-1_915_7477" fill="white">
		<path fill-rule="evenodd" clip-rule="evenodd" d="M9.25149 1.25C9.25149 0.559644 8.69185 0 8.00149 0C7.31114 0 6.75149 0.559644 6.75149 1.25V43.25H1.78966C1.00734 43.25 0.527991 44.1078 0.93801 44.7741L7.14854 54.8661C7.53903 55.5006 8.46138 55.5006 8.85186 54.8661L15.0622 44.7741C15.4722 44.1078 14.9929 43.25 14.2105 43.25H9.25149V1.25Z"/>
	</mask>
	<path fill-rule="evenodd" clip-rule="evenodd" d="M9.25149 1.25C9.25149 0.559644 8.69185 0 8.00149 0C7.31114 0 6.75149 0.559644 6.75149 1.25V43.25H1.78966C1.00734 43.25 0.527991 44.1078 0.93801 44.7741L7.14854 54.8661C7.53903 55.5006 8.46138 55.5006 8.85186 54.8661L15.0622 44.7741C15.4722 44.1078 14.9929 43.25 14.2105 43.25H9.25149V1.25Z"/>
	<path d="M6.75149 43.25V44.25H7.75149V43.25H6.75149ZM0.93801 44.7741L0.0863544 45.2982L0.086355 45.2982L0.93801 44.7741ZM7.14854 54.8661L6.29689 55.3902L7.14854 54.8661ZM8.85186 54.8661L9.70352 55.3901L9.70352 55.3901L8.85186 54.8661ZM15.0622 44.7741L14.2105 44.25V44.25L15.0622 44.7741ZM9.25149 43.25H8.25149V44.25H9.25149V43.25ZM8.00149 1C8.13956 1 8.25149 1.11193 8.25149 1.25H10.2515C10.2515 0.0073592 9.24413 -1 8.00149 -1V1ZM7.75149 1.25C7.75149 1.11193 7.86342 1 8.00149 1V-1C6.75885 -1 5.75149 0.0073592 5.75149 1.25H7.75149ZM7.75149 43.25V1.25H5.75149V43.25H7.75149ZM1.78966 44.25H6.75149V42.25H1.78966V44.25ZM1.78966 44.25L1.78966 44.25V42.25C0.225014 42.25 -0.73368 43.9657 0.0863544 45.2982L1.78966 44.25ZM8.0002 54.342L1.78966 44.25L0.086355 45.2982L6.29689 55.3902L8.0002 54.342ZM8.0002 54.342H8.0002L6.29689 55.3902C7.07786 56.6592 8.92256 56.6592 9.70352 55.3901L8.0002 54.342ZM14.2105 44.25L8.0002 54.342L9.70352 55.3901L15.9139 45.2982L14.2105 44.25ZM14.2105 44.25L14.2105 44.25L15.9139 45.2982C16.7339 43.9656 15.7752 42.25 14.2105 42.25V44.25ZM9.25149 44.25H14.2105V42.25H9.25149V44.25ZM8.25149 1.25V43.25H10.2515V1.25H8.25149Z" mask="url(#path-1-inside-1_915_7477)"/>
</svg>`}function w0(e){return hi(e,{figure:f(FE,{})})}var KE=3,D0=10,E0=6;function LE(e){let t=(D0+E0)*KE-E0;return e`
<svg width=${t} height=${D0} fill="currentColor">
	<polygon points="0 5, 5 10, 10 5, 5 0"/>
	<polygon points="16 5, 21 10, 26 5, 21 0"/>
	<polygon points="32 5, 37 10, 42 5, 37 0"/>
</svg>`}function R0(e){return hi(e,{figure:f(LE,{})})}var Wl=32;function $E(e){return e`
<svg width=${Wl} height=${Wl} fill="currentColor">
	<path d="M8.252 28.704C6.756 28.704 5.532 28.398 4.58 27.786C3.628 27.174 2.846 26.392 2.234 25.44C1.554 24.284 1.078 23.094 0.806 21.87C0.602 20.578 0.5 19.524 0.5 18.708C0.5 15.376 1.35 12.35 3.05 9.63C4.60865 7.13616 6.96757 5.07104 10.1268 3.43463C10.6108 3.18392 11.2007 3.38941 11.4445 3.87694C11.704 4.39597 11.4683 5.02324 10.9526 5.28938C9.247 6.16963 7.7348 7.4125 6.416 9.018C4.92 10.922 4.54672 11.7378 4.30005 13.5C4.05338 15.2622 4.59605 16.362 4.80005 16.974C5.88805 16.09 6.824 15.648 8.252 15.648C10.02 15.648 11.55 16.226 12.842 17.382C14.134 18.538 14.78 20.136 14.78 22.176C14.78 24.08 14.134 25.644 12.842 26.868C11.55 28.092 10.02 28.704 8.252 28.704Z" />
	<path d="M25.252 28.704C23.756 28.704 22.532 28.398 21.58 27.786C20.628 27.174 19.846 26.392 19.234 25.44C18.554 24.284 18.078 23.094 17.806 21.87C17.602 20.578 17.5 19.524 17.5 18.708C17.5 15.376 18.35 12.35 20.05 9.63C21.6087 7.13616 23.9676 5.07104 27.1268 3.43463C27.6108 3.18392 28.2007 3.38941 28.4445 3.87694C28.704 4.39597 28.4683 5.02324 27.9526 5.28938C26.247 6.16963 24.7348 7.4125 23.416 9.018C21.92 10.922 21.5467 11.7378 21.3 13.5C21.0534 15.2622 21.596 16.362 21.8 16.974C22.888 16.09 23.824 15.648 25.252 15.648C27.02 15.648 28.55 16.226 29.842 17.382C31.134 18.538 31.78 20.136 31.78 22.176C31.78 24.08 31.134 25.644 29.842 26.868C28.55 28.092 27.02 28.704 25.252 28.704Z" />
</svg>
`}function NE(e){return e`
<svg width=${Wl} height=${Wl} fill="currentColor">
	<path d="M13.918 3.71393L13.338 7.94794C11.83 7.83194 10.728 8.14127 10.032 8.87593C9.336 9.6106 8.91067 10.5966 8.756 11.8339C8.60133 13.0713 8.56267 14.4053 8.64 15.8359H13.918V28.0739H4V13.5159C4 9.9586 4.88933 7.2906 6.668 5.51193C8.48533 3.73327 10.902 3.13393 13.918 3.71393Z" />
	<path d="M27.918 3.71393L27.338 7.94794C25.83 7.83194 24.728 8.14127 24.032 8.87593C23.336 9.6106 22.9107 10.5966 22.756 11.8339C22.6013 13.0713 22.5627 14.4053 22.64 15.8359H27.918V28.0739H18V13.5159C18 9.9586 18.8893 7.2906 20.668 5.51193C22.4853 3.73327 24.902 3.13393 27.918 3.71393Z" />
</svg>
`}function zE(e){switch(e){case"quote_1":return f($E);case"quote_2":return f(NE);default:throw I(e,`Unknown quotes divider style: ${e}`),new Error}}function M0(e,{style:t}){return hi(e,{figure:zE(t)})}function ql(e,{lineWidth:t=2}){let o=t/2;return e`
<svg width="100%" height=${t}>
	<line x1="0" y1="${o}" x2="100%" y2="${o}" stroke="currentColor" stroke-width=${t} stroke-linecap="round"/>
</svg>`}function Gl(e,{lineWidth:t=2,isReverse:o=!1}){let r=t/2,n=["0","100%"];o&&n.reverse();let[i,s]=n;return e`
<svg width="100%" height=${t}>
	<line x1="${i}" y1="${r}" x2="${s}" y2="${r}" stroke="currentColor" stroke-width=${t} stroke-dasharray="6 6" stroke-linecap="round"/>
</svg>`}function I0(e,{blockKey:t,lineWidth:o=2}){let r=o/2;return e`
<svg width="100%" height=${o}>
	<line x1="0" y1="${r}" x2="100%" y2="${r}" stroke="url(#linear_gradient_${t})" stroke-width=${o} />
	<defs>
		<linearGradient id="linear_gradient_${t}" x1="100%" y1="0" x2="0" y2="0" gradientUnits="userSpaceOnUse">
			<stop stop-color="currentColor" stop-opacity="0"/>
			<stop offset="0.5" stop-color="currentColor"/>
			<stop offset="1" stop-color="currentColor" stop-opacity="0"/>
		</linearGradient>
	</defs>
</svg>`}function A0(e,{blockKey:t,lineWidth:o=2,isReverse:r=!1}){let n=o/2,i=[1,0];r&&i.reverse();let[s,a]=i;return e`
<svg width="100%" height=${o}>
	<line x1="0" y1="${n}" x2="100%" y2="${n}" stroke="url(#linear_gradient_${t}_${r})" stroke-width=${o} />
	<defs>
		<linearGradient id="linear_gradient_${t}_${r}" x1="0" y1="0" x2="100%" y2="0" gradientUnits="userSpaceOnUse">
			<stop stop-color="currentColor" stop-opacity="${s}"/>
			<stop offset="1" stop-color="currentColor" stop-opacity="${a}"/>
		</linearGradient>
	</defs>
</svg>`}var QE={dividerContainer:"xdd8a9__divider-container"},HE={lineContainer:"x79258__line-container"};function UE(e,{blockKey:t,style:o,isReverse:r}){return e`
<div class=${HE.lineContainer}>
	${e.switch(()=>{switch(o){case"solid":return f(ql,{});case"dotted":return f(Gl,{isReverse:r});case"faded":return f(I0,{blockKey:t});default:return I(o,`unknown line style ${o}`),null}})}
</div>
`}function P0(e,{block:t,direction:o}){let r=o==="rtl";return e`
<div class=${QE.dividerContainer}>
	${e(UE,{style:t.style,blockKey:t.key,isReverse:r})}
</div>`}var Yl={dividerContainer:"xc177b__divider-container",textWrapper:{withMods:e=>__getCssClass("xc177b__text-wrapper",e)},paragraphWrapper:"xc177b__paragraph-wrapper",dividerText:"xc177b__divider-text"},WE={lineContainer:"x79258__line-container"};function O0(e,{blockKey:t,style:o,isReverse:r}){return e`
<div class=${WE.lineContainer}>
	${e.switch(()=>{switch(o){case"solid":return f(ql,{});case"dotted":return f(Gl,{isReverse:r});case"faded":return f(A0,{blockKey:t,isReverse:r});default:return I(o,`unknown line style ${o}`),null}})}
</div>
`}function qE(e,{paragraph:t,paragraphStyle:o,dividerColor:r,isLock:n,readonlyMode:i,onHyperlinkOverFn:s}){let a=Q(()=>{let m=r.opacity,u=pe(st.whiteDefault),p=[...pe(r.color),m],[S,b,y]=pn(u,p);return{background:`rgb(${S}, ${b}, ${y})`}},[r]),c=Yl.textWrapper.withMods({style:o}),l=de(Yl.dividerText,"divider-text");return e`
<div class=${c} style=${a}>
	${e(Gt,{paragraph:t,idPrefix:"divider-block",isLock:n,readonlyMode:i,onHyperlinkOverFn:s,paragraphClassName:l},Yl.paragraphWrapper)}
</div>`}function V0(e,{block:t,onHyperlinkOverFn:o,readonlyMode:r,isLock:n,direction:i}){let s=i==="rtl";return e`
<div class=${Yl.dividerContainer}>
	${e(O0,{style:t.style,blockKey:t.key,isReverse:!s})}
	${e(qE,{paragraph:t.paragraph,paragraphStyle:t.paragraphStyle,dividerColor:t.dividerColor,isLock:n,readonlyMode:r,onHyperlinkOverFn:o})}
	${e(O0,{style:t.style,blockKey:t.key,isReverse:s})}
</div>`}var F0={dividerContent:"xaca90__divider-content",draggableBackground:"xaca90__draggable-background"};function GE(e){let t=pe(e.color),o=e.opacity;return{color:`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${o})`}}function K0(e,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,direction:i}){let s=Q(()=>GE(t.dividerColor),[t.dividerColor]);return e`
<div
	class=${F0.dividerContent}
	style=${s}
>
	${e.switch(()=>{switch(t.dividerType){case"line":return f(P0,{block:t,direction:i});case"line-with-text":return f(V0,{block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,direction:i});case"arrow":return f(w0,{});case"diamonds":return f(R0,{});case"quotes":return f(M0,{style:t.style})}})}
	<div class=${F0.draggableBackground} draggable="true"></div>
</div>`}var YE={dividerBlock:{withMods:e=>__getCssClass("x024e7__divider-block",e)},menuButton:"x024e7__menu-button",selectionFrame:"x024e7__selection-frame"};function jl(e,{block:t,onHyperlinkOverFn:o,direction:r}){let n=t;return e`
<figure
	data-key=${n.key}
	class=${YE.dividerBlock.withMods({lock:!1})}
	contenteditable="false"
>
	${e(K0,{block:n,readonlyMode:!0,isLock:!1,onHyperlinkOverFn:o,direction:r})}
</figure>
`}function L0(e){return new URL(e).host.toLowerCase()}var yr={snippetContent:"x12087__snippet-content",text:"x12087__text",heading:"x12087__heading",description:"x12087__description",refContainer:"x12087__ref-container",favicon:"x12087__favicon",url:"x12087__url",image:"x12087__image"};function jE(e,{description:t}){return e`
<p class=${yr.description}>
	${t}
</p>`}function XE(e,{iconSrc:t}){return e`
<img class=${yr.favicon} src=${je(t)}/>
`}function ZE(e,{imageSrc:t}){return e`
<img class=${yr.image} src=${je(t)}/>
`}function $0(e,{block:t}){return e`
<div class=${yr.snippetContent}>
	<div class=${yr.text}>
		<p class=${yr.heading}>
			${t.title}
		</p>
		${e.renderIf(jE,()=>!!t.description&&{description:t.description})}
		<div class=${yr.refContainer}>
			${e.renderIf(XE,()=>!!t.iconSrc&&{iconSrc:t.iconSrc})}
			<p class=${yr.url}>${L0(t.url)}</p>
		</div>
	</div>
	${e.renderIf(ZE,()=>!!t.imageSrc&&{imageSrc:t.imageSrc})}
</div>`}var JE={snippetBlock:"xf8725__snippet-block"};function Xl(e,{block:t}){let o=t;return e`
<figure
	data-key=${t.key}
	class=${JE.snippetBlock}
	contenteditable="false"
>
	<a href="${o.url}" target="_blank">
		${e($0,{block:o})}
	</a>
</figure>
`}function N0(e,{src:t,posterSrc:o}){function r(i){di(i)}let n=o?t:`${t}#t=0.001`;return e`
<video
	src=${je(n)}
	poster=${o&&je(o)}
	preload="metadata"
	controls
	controlsList="nodownload"
	oninput=${r}
></video>`}var _p={videoContainer:"x7e967__video-container",video:"x7e967__video",videoPlaceholder:"x7e967__video-placeholder"};function z0(e,{content:t,width:o,height:r,isDraggable:n=!1}){let i=o>=r?r/o*100:100;return e`
<div
	draggable=${n}
	class=${_p.videoContainer}
>
	${e(t,_p.video)}
	<div class=${_p.videoPlaceholder} style=${{"padding-bottom":`${i}%`}}></div>
</div>`}var Q0={paragraphWrapper:"xd6d8b__paragraph-wrapper",videoText:"xd6d8b__video-text"};function H0(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n}){let i=V();A(()=>{i.current&&(i.current.style.display=t.paragraph.characters.length?"block":"")},[t.paragraph.characters.length,i]);let s=de(Q0.videoText,"video-text");return e`
<div
	save-ref=${i}
>
	${e(Gt,{paragraph:t.paragraph,idPrefix:"video-block",isLock:o,readonlyMode:r,onHyperlinkOverFn:n,placeholder:k("Roll.Editor.MediaCaptionDefaultText"),paragraphClassName:s},Q0.paragraphWrapper)}
</div>`}var kp={videoBlockView:{withMods:e=>__getCssClass("xa1dd9__video-block-view",e)},videoContainer:"xa1dd9__video-container",textContainer:"xa1dd9__text-container"};function Zl(e,{block:t,isLock:o,readonlyMode:r,onHyperlinkOverFn:n,content:i,isSelected:s,isActive:a=!0,isLoading:c=!1,isDraggable:l=!1}){let m=t;return e`
<div
	class=${kp.videoBlockView.withMods({active:a,loading:c,selected:s})}
>
	${e(z0,{content:i||f(N0,{src:m.src,posterSrc:m.posterSrc}),width:m.width,height:m.height,isDraggable:l},kp.videoContainer)}
	${e(H0,{block:m,isLock:o,readonlyMode:r,onHyperlinkOverFn:n},kp.textContainer)}
</div>`}function U0(e,t){let o=O((r,n)=>{switch(r){case eo.DIVIDER:return f(jl,n);case eo.EMBED:return f(Vl,n);case eo.NOTE:return f(Ul,n);case eo.VIDEO:return f(Zl,n);case eo.COLLAGE:return f(Ol,n);case eo.PARAGRAPH:return f(_l,n);case eo.SNIPPET:return f(Xl,n);case eo.CODE:return f(wl,n);default:throw Error(`Unsupported layout block ${r}`)}},[]);return Ae(e,f(C0,{...t,getBlockRendererFn:o,richTextRenderFn:g0,readonlyMode:!0}))}var Jl=class extends Hl{constructor(t,o,r,n){super(t,r),this._blockMap=o,this._autotestData=n}updateBlockMap(t){this._blockMap!==t&&(this._blockMap=t,this._sheduleRender())}isLock(t){return!0}isSelected(t){return!1}_getBlockMap(){return this._blockMap}_renderContent(){}_render(){return this._html`
			<div class=${this._getCssClasses()} data-at=${ne(this._autotestData)}>
				${this._renderContent()}
			</div>`}};var W0="continue-block-group",eR=`${W0}_hidden`,em=class{constructor(t,o,r){this.continueButtonKey=t,this.blockMap=Fe(o,n=>n.key),this.listItemsCounter=r}},tm=class extends Jl{constructor(t,o,r=ot()){super("player-rich-text-editor",t.blockMap,r,"player-rich-text-editor"),this._state=t,this._continueKey=o,this._passedContinueButtonKeys=[],this._invalidatePassedContinueButtonKeys()}updateState(t,o){this._state==t&&this._continueKey==o||(this._state=t,this._continueKey=o,this.updateBlockMap(this._state.blockMap),this._invalidatePassedContinueButtonKeys(),this._sheduleRender())}_invalidatePassedContinueButtonKeys(){if(!this._continueKey)return;let t=[],o=this._getBlockMap();for(let r of o.order)if(Re.toContinueBlock(o.blocks[r])&&t.push(r),r===this._continueKey)break;this._passedContinueButtonKeys=t}isHidden(t){let o=Re.toContinueBlock(t);return o?this._passedContinueButtonKeys.includes(o.key):!1}_getContinueGroupId(t){return t.blockMap.order.reduce((o,r)=>`${o}-${r}`,"")}_getContinueGroups(){let t=this._getBlockMap(),o=[],r=[],n=0;if(be.forEach(t,i=>{w.isOrderedList(i)&&(n=!!d(q(i)).isOrderedListFirstItem?0:n,++n),r.push(i);let s=Re.toContinueBlock(i);if(s){let a=new em(s.key,r,n);o.push(a),r=[]}}),r.length){let i=new em("none",r,n);o.push(i)}return o}_renderContinueGroups(){let t=this._passedContinueButtonKeys.indexOf(this._continueKey),o=0;return this._getContinueGroups().map((r,n)=>{let i=super._renderBlocks(r.blockMap,o),s=J(this._getGroupRelatedData(),this._getContinueGroupId(r)),a=n>t+1,c=de(W0,a?eR:null);return o=r.listItemsCounter,s`<div class=${c}>${i}</div>`})}_renderContent(){return this._renderContinueGroups()}};var F=(e,t=o=>o)=>tR(e,t);function tR(e,t){let o=ii(),r=fe(t(e.get())),n=fe(t);return A(()=>e.subscribe(i=>{let s=n.current(i);Object.is(s,r.current)||o()}),[r,n,e,o]),r.current}function Jr(e){return e==="standalone"}var oR=600,q0=20,rR=56,en=vt({});function G0(e,t,o){if(!e)return;let r=e.scrollTop,n=!1,i=new He;return no({duration:oR,timingFn:ho,reducer:{animate:s=>{e.scrollTop=r+t*s},complete:()=>{o&&o(),n=!0},changedProperties:[]},abortSignal:i}),()=>{n||i.dispatch()}}function Y0(e,t){let{states:o}=U(),r=F(o.currentSlide),n=F(o.insertType);A(()=>{let i=e.current,s=t.current,a=i.getBoundingClientRect(),c=s.getBoundingClientRect();if(c.top<a.top){let l=Jr(n)?c.top-a.top:c.top-q0-rR;return G0(i,l)}},[e,t,r,n])}function j0(e,t,o){let r=Ie(en),{states:n}=U(),i=F(n.insertType);A(()=>{let s=r.current,c=e.current.getBoundingClientRect();if(c.bottom>window.innerHeight&&t){let l=c.bottom-window.innerHeight,m=Jr(i)?l:l+q0;return G0(s,m,o)}},[r,e,t,o,i])}var gi=vt({current:null});function om(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.52 2.729a1 1 0 1 0-1.944-.47l-.84 3.466a1 1 0 0 0 .622 1.171L7.4 8.036a1 1 0 0 0 .701-1.873l-.85-.319A5.75 5.75 0 1 1 4.5 10.75a1 1 0 1 0-2 0 7.75 7.75 0 1 0 3.674-6.591l.346-1.43z" fill="currentColor"/></svg>
`}function rm(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.296 12.924 8.9 9.014a.787.787 0 0 0-1.094-.092.908.908 0 0 0-.214 1.151l2.586 4.553a1.293 1.293 0 0 0 1.927.374l.05-.041a1.442 1.442 0 0 0 .143-2.035zM22.691 4.51l-.023-.023a2.4 2.4 0 0 0-3.38 0l-.777.771a11.439 11.439 0 0 1 2.899 3.916l1.28-1.27.016-.015a2.39 2.39 0 0 0-.015-3.38zM15.13 2.4a2.4 2.4 0 0 0-2.4-2.4H9.055a2.4 2.4 0 0 0-2.4 2.4v.799a11.565 11.565 0 0 1 4.238-.799c1.497 0 2.927.283 4.24.799L15.13 2.4zM19 14a8 8 0 1 1-16 0 8 8 0 0 1 16 0zm2 0c0 5.523-4.477 10-10 10S1 19.523 1 14 5.477 4 11 4s10 4.477 10 10z" fill="currentColor"/></svg>
`}var nR={button:"x68699__button"};function Yt(e,{text:t,onClick:o,disabled:r=!1}){return e(Ce,{style:"primary",structure:"text",text:t,onClick:o,size:"xLarge",state:r?"disabled":"default"},nR.button)}var iR={button:"x68699__button"};function nm(e,{text:t,icon:o,onClick:r}){return e(Ce,{style:"secondary",structure:"iconAndText",icon:o,text:t,size:"xLarge",onClick:r},iR.button)}var xp={popup:"x765f3__popup",icon:"x765f3__icon",description:"x765f3__description"};function X0(e){let{states:t,actions:o}=U(),r=F(t.playerSettings),n=F(t.quiz),i=F(t.usedAttempts);return e`
<div class=${xp.popup}>
	${e(rm,{},xp.icon)}
	<p class=${xp.description}>
		${k("Quiz.Player.QuizEndTimePopup.Description")}
	</p>
	${e.switch(()=>{var s;return(s=n.results)!=null&&s.visible?f(Yt,{text:k("Quiz.Player.QuizEndTimePopup.ResultsButtonLabel"),onClick:()=>o.gotoSlide({type:"results"})}):Na(i,r.attempts)?f(nm,{text:k("Quiz.Player.Results.RestartQuiz"),icon:f(om),onClick:o.restartQuiz}):null})}
</div>`}function Z0(e){let{states:t}=U(),o=F(t.quizEndTimePopupOpened),r=Ie(gi);ui({html:e,side:"center",createModal:()=>o?f(X0,{}):null,layer:r.current||void 0,modalOverlayType:"light"})}var Bp={container:"xae06a__container",icon:"xae06a__icon",text:"xae06a__text"};function J0(e,{text:t,icon:o}){return e`
<div class=${Bp.container}>
	${e(o,Bp.icon)}
	<span class=${Bp.text}>${t}</span>
</div>`}var sR=3e3;function e1({html:e,show:t,text:o,icon:r,onHide:n,layer:i}){A(()=>{if(t){let s=setTimeout(n,sR);return()=>clearTimeout(s)}},[t,n]),ui({html:e,side:"center",createModal:()=>t?f(J0,{text:o,icon:r}):null,modalOverlayType:"light",layer:i})}function t1(e){let t=Math.floor(e/6e4),o=Math.floor(e%6e4/1e3);return o===60&&(o=0,t+=1),{minutes:t,seconds:o}}function aR(e,t){let o="minutesAndSeconds";return e==0&&(o="seconds"),t==0&&(o="minutes"),o}function im(e,t){let{minutes:o,seconds:r}=t1(e),n="",i=aR(o,r);switch(i){case"minutesAndSeconds":n=k(t.minutesAndSeconds,{minutes:o,seconds:r});break;case"minutes":n=k(t.minutes,{minutes:o});break;case"seconds":n=k(t.seconds,{seconds:r});break;default:I(i,`Unknown format type: ${i}`)}return n}function o1(e){let{states:t,actions:o}=U(),{timeLimit:r}=F(t.playerSettings),n=F(t.quizStartInfoMessageOpened),i=o.startEvaluationWithLimit,s=Ie(gi),a=im(r,{minutes:io("Quiz.Player.QuizStartInfoMessage.Description.WithoutSeconds"),seconds:io("Quiz.Player.QuizStartInfoMessage.Description.WithoutMinutes"),minutesAndSeconds:io("Quiz.Player.QuizStartInfoMessage.Description")});e1({html:e,show:n,text:a,icon:f(rm),onHide:()=>i(),layer:s.current||void 0})}var cR={embed:"x28f4a__embed"},lR=560,mR=315,uR=320;function dR(e){let t=new RegExp(/^http(?:s?):\/\/(?:www\.)?youtube\.[a-z]{2,3}\/embed\/[\w\-_]*$/i);return!!e.match(t)}function r1(e,t){let o=V();return A(()=>{let r=t.width?`${t.width}px`:"100%",n=t.height?`${t.height}px`:"100%";dR(t.src)&&(r=`${lR}px`,n=`${mR}px`),rt(o.current,{"--width":r,"--height":n});let i=o.current.getBoundingClientRect(),s=uR/i.width;rt(o.current,{"--mobile-width":`${i.width*s}px`,"--mobile-height":`${i.height*s}px`})},[o,t.width,t.height,t.src]),e`
<iframe
	save-ref=${o}
	class=${cR.embed}
	src=${t.src}
	allowfullscreen
>
</iframe>`}var n1={container:"x1f3eb__container",img:"x1f3eb__img"},pR=300;function i1(e,{attachment:t,baseUrl:o}){let r=V(),n=Pl(e,{style:"light"}),i=o?o+t.src:t.src,s={...t,src:i},[a]=lr(r);return e`
<div save-ref=${r} class=${n1.container}>
	${e(hr,{image:s,withSize:!0,withZoom:!0,onClick:()=>n(je(i),s),outContainerRef:r,containerLimit:a?{width:a,height:pR}:void 0,className:n1.img})}
</div>
	`}function sm(e,t){return e?e.type==="i"?f(i1,{attachment:e,baseUrl:t}):f(r1,e):null}var fR={tooltipLink:"x1059a__tooltip-link"};function hR(e){let t={},o=[];return re.hasStyle(e,"bold")&&(t["font-weight"]="bold"),re.hasStyle(e,"italic")&&(t["font-style"]="italic"),re.hasStyle(e,"underline")&&o.push("underline"),re.hasStyle(e,"strikethrough")&&o.push("line-through"),o.length&&(t["text-decoration"]=o.join(" ")),t}function gR(e,{alignment:t,style:o,text:r}){return t==="superscript"?e`<sup style=${o}>${r}</sup>`:e`<sub style=${o}>${r}</sub>`}function s1(e,{style:t,text:o,alignment:r}){return r?gR(e,{alignment:r,text:o,style:t}):e`<span style=${t}>${o}</span>`}function yR(e,{style:t,text:o,url:r,urlTooltipEnabled:n,alignment:i}){let s=V();qt({html:e,elementRef:s,text:{html:`<a href=${r} class=${fR.tooltipLink} target="_blank">${r}</a>`},size:"small",show:n,side:"bottom",stayOnHover:!0});let a=f(s1,{alignment:i,text:o,style:t});return e`<a href='${r}' save-ref=${s} target=_blank>${e(a)}</a>`}function CR(e,t,o){let r=hR(e.styles),n=ve.getAlignment(e.styles.style),i=e.styles.url,s=e.text;e.isLast&&s.endsWith(`
`)&&(s+=bt.ZERO_WIDTH_SPACE);let a=t.generate(`chunk_${e.text}${i?"_url":"_text"}`);return i?ye(a,yR,{style:r,text:s,url:i,urlTooltipEnabled:o,alignment:n}):ye(a,s1,{style:r,text:s,alignment:n})}function SR(e,t,o){t.length||t.push({text:bt.ZERO_WIDTH_SPACE,styles:re.create(),isLast:!0});let r=new ti;return e.renderAll(t,n=>CR(n,r,o))}function a1(e,{paragraph:t,placeholder:o="",className:r,autotestData:n,urlTooltipEnabled:i}){let s=w.getTextRuns(t),a=s.length?"":o,c=r&&a?r.split(" ").map(l=>`${l} ${l}_empty`).join(" "):r;return e`<p
	class=${c}
	data-key=${t.key}
	data-placeholder=${a}
	data-at=${ne(n)}
>${SR(e,s,i)}</p>`}var Cr={content:"x91b27__content",h1:"x91b27__h1",h2:"x91b27__h2",h3:"x91b27__h3",text:"x91b27__text",defaultParagraph:"x91b27__default-paragraph"};var gBe={content:Cr.content,h1:Cr.h1,h2:Cr.h2,h3:Cr.h3,text:Cr.text,ul:Cr.text,ol:Cr.text},c1=Cr.defaultParagraph;function ke(e,t){return a1(e,{...t,className:c1,urlTooltipEnabled:!1})}var _s={intro:{withMods:e=>__getCssClass("x81fd0__intro",e)},title:"x81fd0__title",description:"x81fd0__description",button:"x81fd0__button",attachment:"x81fd0__attachment"};function l1(e,{showTopPanel:t}){let{states:o,actions:r}=U(),n=r.startQuiz,{intro:i}=F(o.quiz),s=F(o.baseUrl),a=F(o.insertType);if(!i)throw Error("'intro' is not defined");let c=i.attachment,[l]=be.getBlocksArray(i.title.blockMap),[m]=be.getBlocksArray(i.description.blockMap),u=l,p=m;return e`
<div
	class=${_s.intro.withMods({attach:!!c,type:a,indent:!t})}
>
	${e(sm(c,s),{className:_s.attachment})}
	${e.renderIf(ke,()=>!!u.characters.length&&{paragraph:u},_s.title)}
	${e.renderIf(ke,()=>!!p.characters.length&&{paragraph:p},_s.description)}
	${e(Yt,{text:k("Quiz.Player.Intro.StartQuiz"),onClick:n},_s.button)}
</div>`}var _R={button:"x12949__button",continueButton:"x12949__continue-button",fadeIn:"x12949__fade-in"};function m1(e,{disabled:t,onClick:o}){let{actions:r}=U(),n=r.gotoNextSlide;return e`
<div class=${_R.continueButton}>
	${e(Yt,{text:k("Quiz.Player.Question.Continue"),onClick:()=>{n(),o()},disabled:t})}
</div>`}var kR={buttons:"xb3572__buttons"};function am(e){let{states:t,actions:o}=U(),{attempts:r}=F(t.playerSettings),n=F(t.usedAttempts),i=F(t.insertType),s=o.closeQuiz,a=o.restartQuiz;return e`
<div class=${kR.buttons}>
	${e.renderIf(Yt,()=>Jr(i)&&{text:k("Quiz.Player.Results.FinishQuiz"),onClick:s})}
	${e.renderIf(nm,()=>Na(n,r)&&{text:k("Quiz.Player.Results.RestartQuiz"),icon:f(om),onClick:a})}
</div>`}var xR={button:"x12949__button",continueButton:"x12949__continue-button",fadeIn:"x12949__fade-in"};function u1(e){return e`
<div class=${xR.continueButton}>
	${e(am,{})}
</div>`}var BR={button:"x12949__button",continueButton:"x12949__continue-button",fadeIn:"x12949__fade-in"};function d1(e){let{actions:t}=U(),o=t.gotoNextSlide;return e`
<div class=${BR.continueButton}>
	${e(Yt,{text:k("Quiz.Player.Question.GoToResults"),onClick:o})}
</div>`}var bR={button:"x12949__button",continueButton:"x12949__continue-button",fadeIn:"x12949__fade-in"};function p1(e,{disabled:t,onClick:o}){let{actions:r}=U(),n=r.submitQuestion;return e`
<div class=${bR.button}>
	${e(Yt,{text:k("Quiz.Player.Question.Submit"),onClick:()=>{n(),o&&o()},disabled:t})}
</div>`}var bp={description:"x6cef6__description",label:"x6cef6__label",text:"x6cef6__text"};function vR(e,t){let o=t.indexOf(e),r=t.length;return k("Quiz.Player.Question.Number.Label",{current:o+1,total:r})}function f1(e,{question:t,questionsViewOrder:o}){let[r]=be.getBlocksArray(t.description.blockMap),n=r;return e`
<div class=${bp.description}>
	<p class=${bp.label}>${vR(t.id,o)}</p>
	${e.renderIf(ke,()=>!!n.characters.length&&{paragraph:n},bp.text)}
</div>`}function h1(e){return e`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="18.75" stroke="currentColor" stroke-width="2.5"/><path d="m15 15 10 10m-10 0 10-10" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function g1(e){return e`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="20" cy="20" r="18.75" stroke="currentColor" stroke-width="2.5"/><path d="M13 21.667 17.397 26l9.353-11" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function y1(e,t){return H(e.type,{correctIncorrect:t?be.getBlocksArray(e.correct.blockMap):be.getBlocksArray(e.incorrect.blockMap),answered:be.getBlocksArray(e.answered.blockMap)})}var cm={feedback:{withMods:e=>__getCssClass("x1c839__feedback",e)},fadeIn:"x1c839__fade-in",icon:"x1c839__icon",title:"x1c839__title",text:"x1c839__text"};function C1(e,{question:t,correct:o}){let r=o?f(g1):f(h1),n=o?k("Quiz.Player.Question.Feedback.Correct"):k("Quiz.Player.Question.Feedback.Incorrect"),[i]=y1(t.feedback,o);return e`
<div class=${cm.feedback.withMods({"with-separator":t.type!=="ti",type:o?"correct":"incorrect"})}>
	<div class=${cm.icon}>${e(r)}</div>
	<div class=${cm.title}>${n}</div>
	${e(ke,{paragraph:i},cm.text)}
</div>`}var S1={wrapper:{withMods:e=>__getCssClass("x61132__wrapper",e)},input:{withMods:e=>__getCssClass("x61132__input",e)}};function _1(e,{id:t,checked:o,onCheckedRequest:r,disabled:n=!1,size:i,autotestData:s}){let a=mr();X(()=>{a.current.checked=o},[a,o]);function c(l){!l.defaultPrevented&&!o&&(l.preventDefault(),r())}return e`
<div
	class=${S1.wrapper.withMods({disabled:!!n,size:i})}
	onclick=${n?void 0:c}
>
	<input
		save-ref=${a}
		class=${S1.input.withMods({size:i})}
		id=${t}
		type="radio"
		disabled=${n}
		onclick=${c}
		data-at=${ne(s)}
	>
</div>`}function lm(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m7 7 10 10M7 17 17 7" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function mm(e){return e`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 14.274 8.796 19 20 6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}var TR={icon:{withMods:e=>__getCssClass("x77c6d__icon",e)}};function Sr(e,{correct:t,position:o="absolute"}){let{states:r}=U(),n=F(r.direction),i=t?f(mm):f(lm);return e`
<div
	class=${TR.icon.withMods({dir:n,type:t?"correct":"incorrect",position:o})}
>
	${e(i)}
</div>
`}var vp={choice:{withMods:e=>__getCssClass("xd7738__choice",e)},control:"xd7738__control",text:"xd7738__text"};function k1(e,{type:t,choice:o,selected:r,questionId:n,submitted:i,showCorrectAnswers:s}){let{actions:a}=U(),c=a.toggleChoiceSelection,l=t==="mc"?f(_1,{size:"large",checked:r,disabled:i,onCheckedRequest:()=>!i&&c({questionId:n,choiceId:o.id})}):f(ak,{size:"large",checked:r,disabled:i,onCheckedRequest:()=>!i&&c({questionId:n,choiceId:o.id})}),[m]=be.getBlocksArray(o.text.blockMap);function u(p){!p.defaultPrevented&&!i&&c({questionId:n,choiceId:o.id})}return e`
<div
	class=${vp.choice.withMods({selected:r,submitted:i})}
	onclick=${u}
>
	${e(l,vp.control)}
	${e(ke,{paragraph:m},vp.text)}
	${e.renderIf(Sr,()=>s&&(r||o.correct)&&{correct:o.correct})}
</div>`}var wR={content:{withMods:e=>__getCssClass("x84c5d__content",e)}};function x1(e,{question:t,questionState:o,choicesViewOrder:r,showCorrectAnswers:n}){return e`
<div class=${wR.content.withMods({withAnswers:n})}>
	${e.renderAll(r,i=>{let s=t.content.blocks[i];return ye(i,k1,{type:t.type,choice:s,selected:o.choices[i],questionId:t.id,submitted:o.submitted,showCorrectAnswers:n})})}
</div>`}function Vo(e){let t=Oe(e.content.distractors,o=>o);return se(e.content.matches,o=>na(t,o.right)),t}function um(e,t){return Object.keys(e).find(o=>e[o]===t)||null}function ks(e,t){return Object.values(e.content.matches.blocks).find(o=>o.left.id===t)||null}var yi=vt({leftPartsRefs:{current:{}}});function dm(e){return`url("data:image/svg+xml,${e.replace(/"/g,"'").replace(/\s{2,}/g," ").replace(/[\r\n%#()<>?[\\\]^`{|}]/g,encodeURIComponent)}")`}function DR(e,t){return`M 0 8
c 0 0 0 -8 8 -8
h ${e}
c 0 0 8 0 8 8
v ${t}
c 0 0 0 2 -2 2
h -4.8
a 6 11 0 1 0 0 10
h 4.8
c 0 0 2 0 2 2
v ${t}
c 0 0 0 8 -8 8
h -${e}
c 0 0 -8 0 -8 -8
z`.replace(/\n/g,"")}function ER(e,t){return`M 1 8
c 0 0 0 -7 7 -7
h ${e}
c 0 0 7 0 7 7
v ${t}
c 0 0 0 2 -2 2
h -3
a 7 12 0 1 0 0 12
h 3
c 0 0 2 0 2 2
v ${t}
c 0 0 0 7 -7 7
h -${e}
c 0 0 -7 0 -7 -7
z`.replace(/\n/g,"")}function RR(e){return`
<svg xmlns="http://www.w3.org/2000/svg" fill="none">
	<path
        stroke="black"
        stroke-width="2"
        stroke-dasharray="5"
        stroke-dashoffset="3"
        stroke-linecap="square"
        d="${e}" />
</svg>`.replace(/\n/g,"")}function MR(e,t,o){return`
M 18 8
c 0 0 0 -8 8 -8
h ${e}
c 0 0 8 0 8 8
v ${t}
c 0 0 0 8 -8 8
h -${e}
c 0 0 -8 0 -8 -8
v -${o}
c 0 0 0 -2 -2 -2
h -3
a 7 12 0 1 1 0 -12
h 3
c 0 0 2 0 2 -2
v -${o}
z`.replace(/\n/g,"")}function IR(e,t,o){return`
M 19 8
c 0 0 0 -7 7 -7
h ${e}
c 0 0 7 0 7 7
v ${t}
c 0 0 0 7 -7 7
h -${e}
c 0 0 -7 0 -7 -7
v -${o}
c 0 0 0 -2 -2 -2
h -4.8
a 6 11 0 1 1 0 -10
h 4.8
c 0 0 2 0 2 -2
v -${o}
z`.replace(/\n/g,"")}function B1(e,t){let o=t-16,r=(o-16)/2;return{verticalLine:o,verticalLineToUnion:r}}function b1(e,t){let o=e-16,{verticalLineToUnion:r}=B1(e,t),n=DR(o,r+1),i=ER(o,r),s=`path("${n}")`,a=`path(evenodd, "${n} ${i}")`,c=RR(n);return{premiseFillPath:s,premiseOutlinePath:a,premiseOutlineIntersectedSvg:c}}function v1(e,t){let o=e-18-16,{verticalLine:r,verticalLineToUnion:n}=B1(e,t),i=MR(o,r,n),s=IR(o,r,n+1);return{responseFillPath:`path("${i}")`,responseOutlinePath:`path(evenodd, "${i} ${s}")`}}var AR={positionNumber:"x52ae3__position-number"};function pm(e,{positionNumber:t}){let o=t===null?"x":t+1;return e`
<div class=${AR.positionNumber}>
	${o}.
</div>
`}var Tp=vt({});function T1(e,t){let[o,r]=j(()=>({})),n=O((a,c)=>{r(l=>({...l,[a]:c}))},[]),i=O(a=>{r(c=>{let l={...c};return delete l[a],l})},[]),s=Q(()=>({setPartHeight:n,removePartHeight:i}),[i,n]);e.setContext(Tp,s),A(()=>{let a=Object.values(o).reduce((c,l)=>Math.max(c,l),0);Te(t.current,"--matching-items-height",`${a}px`)},[t,o])}function fm(e,t,o=!1){let{setPartHeight:r,removePartHeight:n}=Ie(Tp),i=O(()=>{if(o)return;let s=t.current.offsetHeight;r(e,s)},[o,e,t,r]);Ct({target:t,onResize:i}),A(()=>{if(!o)return i(),()=>n(e)},[o,e,i,n])}var Ci={container:{withMods:e=>__getCssClass("x9e9ab__container",e)},background:"x9e9ab__background",fill:"x9e9ab__fill",outline:"x9e9ab__outline",content:"x9e9ab__content",text:"x9e9ab__text"};function w1(e,{index:t,matchingPartLeft:o,submitted:r,correct:n,intersected:i,showCorrectAnswers:s}){let a=V(),c=V(),{leftPartsRefs:l}=Ie(yi),{states:m}=U(),u=F(m.direction),p=d($e(o.text.blockMap)),S=t;return PR(a),fm(o.id,c),A(()=>{l.current[o.id]=a},[l,o.id,a]),e`
<div
	class=${Ci.container.withMods({intersected:i,submitted:r,incorrect:!(n&&s),dir:u})}
	save-ref=${a}
>
	<div class=${Ci.background}>
		<div class=${Ci.fill}></div>
		<div class=${Ci.outline}></div>
	</div>
	<div class=${Ci.content} save-ref=${c}>
		${e.renderIf(pm,()=>s&&{positionNumber:S})}
		${e(ke,{paragraph:p},Ci.text)}
	</div>
</div>`}function PR(e){let t=O(()=>{let o=e.current.getBoundingClientRect(),{premiseFillPath:r,premiseOutlinePath:n,premiseOutlineIntersectedSvg:i}=b1(o.width,o.height);rt(e.current,{"--clip-premise-fill":r,"--clip-premise-outline":n,"--mask-premise-outline-intersected":dm(i)})},[e]);Ct({target:e,onResize:t}),A(()=>{t()},[t])}var tn={container:{withMods:e=>__getCssClass("xf21a5__container",e)},background:"xf21a5__background",fill:"xf21a5__fill",outline:"xf21a5__outline",content:"xf21a5__content",text:"xf21a5__text",rotateLtrAnimation:"xf21a5__rotate-ltr-animation",rotateBackgroundRtlAnimation:"xf21a5__rotate-background-rtl-animation",rotateContentRtlAnimation:"xf21a5__rotate-content-rtl-animation",dragIcon:"xf21a5__drag-icon"};function wp(e,{index:t,matchingPartRight:o,submitted:r,state:n,correctIndex:i,connected:s,startDrag:a,showCorrectAnswers:c}){let l=V(),m=V(),u=t===i,{states:p}=U(),S=F(p.direction);Y(l,"pointerdown",_=>{_.button===Il.left&&n!=="dragged"&&!r&&a(o.id,_,l)});let b=r?i:t,y=d($e(o.text.blockMap));return VR(l),fm(o.id,m,n==="dragged"),e`
<div
	class=${tn.container.withMods({state:n,submitted:r,incorrect:!(u&&c),connected:s,dir:S})}
	save-ref=${l}
>
	<div class=${tn.background}>
		<div class=${tn.fill}></div>
		<div class=${tn.outline}></div>
	</div>
	<div class=${tn.content} save-ref=${m}>
		${e.renderIf(pm,()=>c&&{positionNumber:b})}
		${e(ke,{paragraph:y},tn.text)}
		${e(OR,{})}
	</div>
</div>
`}function OR(e){return e`
<div class=${tn.dragIcon}>
	${e(ci,{})}
</div>`}function VR(e){let t=O(()=>{let o=e.current.getBoundingClientRect(),{responseFillPath:r,responseOutlinePath:n}=v1(o.width,o.height);rt(e.current,{"--clip-response-fill":r,"--clip-response-outline":n})},[e]);Ct({target:e,onResize:t}),A(()=>{t()},[t])}var D1=15;function R1({draggedItemRef:e,listRef:t,onBeforeDragEnd:o,boundingContainerRef:r,scrollController:n}){let{leftPartsRefs:i}=Ie(yi),s=P(window),[a,c]=j(()=>null),l=P(!1),m=P(0);return Y(s,"pointermove",a?b=>{if(!l.current||!a)return;let _=t.current.getBoundingClientRect(),C=e.current,T=C.getBoundingClientRect(),h=r.current.getBoundingClientRect(),x=b.clientX-a.itemRelativeXOffset,B=_t(b.clientY-a.itemRelativeYOffset,h.top,h.bottom-T.height),L=x-_.left,$=B-_.top;C.style.top=`${$}px`,C.style.left=`${L}px`;let z=E1(i.current,T),ue=a.listOffset+$;ue<n.getScrollTop()&&m.current>$?n.scrollBy(0,-D1):ue+T.height>n.getScrollTop()+n.getClientHeight()&&m.current<$&&n.scrollBy(0,+D1),m.current=$,c(Z=>({...d(Z),intersectedLeftPartId:z}))}:null),Y(s,"pointerup",a?()=>{o(),c(null),l.current=!1}:null),{startDrag:O((b,y,_)=>{y.preventDefault();let T=_.current.getBoundingClientRect(),h=t.current,x=h.getBoundingClientRect(),B=y.clientX-T.x,L=y.clientY-T.y,$=T.x-x.x,z=T.y-x.y,ue=E1(i.current,T);c({draggedRightPartId:b,intersectedLeftPartId:ue,itemRelativeXOffset:B,itemRelativeYOffset:L,startOffsetX:$,startOffsetY:z,listOffset:n.getRelativeElementOffset(h).y}),l.current=!0},[i,t,n]),intersectedLeftPartId:a?a.intersectedLeftPartId:null,draggedRightPartId:a?a.draggedRightPartId:null,startOffsetX:a?a.startOffsetX:null,startOffsetY:a?a.startOffsetY:null}}function E1(e,t){let o=null,r=0;return Object.keys(e).forEach(n=>{let i=e[n];if(!i)return;let s=i.current.getBoundingClientRect(),a=Wh(t,s);!a||a<r||(r=a,o=n)}),o}var on={content:"x55753__content",resultsContainer:"x55753__results-container",partsContainer:"x55753__parts-container",itemWrapper:{withMods:e=>__getCssClass("x55753__item-wrapper",e)},draggedItem:"x55753__dragged-item",resultIcon:"x55753__result-icon"};function I1(e,t){return NR({html:e,question:t.question}),e`
<div>
	${e(FR,t)}
</div>`}function FR(e,{question:t,questionState:o,showCorrectAnswers:r}){let n=P(),i=P(),s=P(),{leftPartsOrder:a,rightPartsOrder:c,matchedPairs:l}=o,{actions:m}=U(),u=m.connectMatch,p=m.disconnectMatch,S=Q(()=>Vo(t),[t]),b=z=>S.blocks[z]||null,y=Q(()=>$R(t,a),[a,t]),_=z=>!!Object.values(l).find(ue=>ue===z);T1(e,i);let C=Ie(en),T=ri(C),{draggedRightPartId:h,intersectedLeftPartId:x,startDrag:B,startOffsetX:L,startOffsetY:$}=R1({draggedItemRef:n,listRef:s,boundingContainerRef:i,scrollController:T,onBeforeDragEnd:()=>{if(!h)return;let z=um(o.matchedPairs,h);z&&p({questionId:t.id,leftIdToDisconnect:z}),x&&u({questionId:t.id,matchToConnect:{leftId:x,rightId:h}})}});return e`
<div class=${on.content} save-ref=${i}>
	<div class=${on.partsContainer}>
		${e.renderAll(a,(z,ue)=>{let Z=d(ks(t,z)),Je=l[Z.left.id],jt=!!Je&&y[Je]===ue;return ye(z,M1,{binding:f(w1,{index:ue,matchingPartLeft:Z.left,submitted:o.submitted,correct:jt,intersected:x===z,showCorrectAnswers:r}),connected:!!l[z],side:"left"})})}
	</div>
	<div class=${on.partsContainer} save-ref=${s}>
		${e.renderAll(c,(z,ue)=>{let Z=_(z);return ye(z,M1,{binding:f(wp,{index:ue,matchingPartRight:d(b(z)),submitted:o.submitted,state:z===h?"hidden":"normal",correctIndex:y[z],connected:Z,startDrag:B,showCorrectAnswers:r}),connected:Z,side:"right"})})}
		${e.renderIf(LR,()=>!!h&&!!br(L)&&!!br($)&&{itemRef:n,binding:f(wp,{index:0,correctIndex:0,submitted:!1,connected:!1,state:"dragged",matchingPartRight:d(b(h)),startDrag:B,showCorrectAnswers:r}),startOffsetX:L,startOffsetY:$})}
	</div>
	${e.renderIf(KR,()=>r&&{question:t,questionState:o,rightPartsCorrectIndexesMap:y})}
</div>`}function KR(e,{question:t,questionState:o,rightPartsCorrectIndexesMap:r}){return e`
<div class=${on.resultsContainer}>
	${e.renderAll(o.leftPartsOrder,(n,i)=>{let s=d(ks(t,n)),a=o.matchedPairs[s.left.id],c=!!a&&r[a]===i;return ye(n,Sr,{correct:c,position:"fixed"},on.resultIcon)})}
</div>`}function M1(e,{binding:t,side:o,connected:r}){let{states:n}=U(),i=F(n.direction);return e`
<div class=${on.itemWrapper.withMods({connected:r,side:o,dir:i})}>
	${e(t)}
</div>`}function LR(e,{itemRef:t,binding:o,startOffsetX:r,startOffsetY:n}){return X(()=>{t.current.style.left=`${r}px`,t.current.style.top=`${n}px`},[t,r,n]),e`
<div
	class=${on.draggedItem}
	save-ref=${t}
>
	${e(o)}
</div>`}function $R(e,t){let o={};Vo(e).order.forEach(i=>{o[i]=null});let n={};return se(e.content.matches,i=>{n[i.left.id]=i}),t.forEach((i,s)=>{let a=n[i];o[a.right.id]=s}),o}function NR({question:e,html:t}){let o=P(zR(e)),r=Q(()=>({leftPartsRefs:o}),[]);t.setContext(yi,r)}function zR(e){let t={};return se(e.content.matches,o=>{t[o.left.id]=null}),t}function A1(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m5.5 7.5 5 5 5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function P1(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 17a7 7 0 1 0 0-14 7 7 0 0 0 0 14zm9-7a9 9 0 1 1-18 0 9 9 0 0 1 18 0zm-7.65-3.15a1.35 1.35 0 1 1-2.7 0 1.35 1.35 0 0 1 2.7 0zM9 9.15a.85.85 0 0 0 0 1.7h.65v1.8h-1v1.7h3.7v-1.7h-1V10a.85.85 0 0 0-.85-.85H9z" fill="currentColor"/></svg>
`}var hm={footer:"xf954b__footer",extra:"xf954b__extra",buttons:"xf954b__buttons",gap:"xf954b__gap"};function O1(e,{buttons:t,extra:o}){return e`
<div class=${hm.footer}>
	${e(o,hm.extra)}
	<div class=${hm.gap}></div>
	${e(N_,{buttons:t},hm.buttons)}
</div>`}var gm={header:"x0fd16__header",titleContainer:"x0fd16__title-container",title:"x0fd16__title",close:"x0fd16__close"};function V1(e,{title:t,onClose:o}){return e`
<div class=${gm.header}>
	<div class=${gm.titleContainer}>
        ${e.switch(()=>typeof t=="string"?f(yo,{text:t},gm.title):t)}
	</div>
	${e(Ce,{style:"secondary",structure:"icon",icon:f(go),size:"medium",onClick:o,autotestData:"close-bottom-sheet",radius:"circle"},gm.close)}
</div>
`}var F1={container:"x90a06__container",content:"x90a06__content"};function ym(e,t){let{content:o,header:r,footer:n}=t;return e`
<div class=${F1.container}>
	${e.renderIf(V1,()=>r)}
	${e(o,F1.content)}
	${e.renderIf(O1,()=>n)}
</div>`}var xs={content:"xc215b__content",answerBlock:"xc215b__answer-block",title:{withMods:e=>__getCssClass("xc215b__title",e)},text:"xc215b__text"};function L1(e,{matchId:t,questionId:o,onClose:r}){let{states:n}=U(),i=F(n.quiz),a=F(n.matchingQuestionsState)[o],c=i.questions.blocks[o],l=c.content.matches.blocks[t],m=$e(l.left.text.blockMap),u=$e(l.right.text.blockMap),p=Q(()=>{let S=Vo(c),b=d(a.matchedPairs[l.left.id]);return $e(S.blocks[b].text.blockMap)},[l.left.id,c,a.matchedPairs]);return ym(e,{header:{onClose:r,title:f(ke,{paragraph:m},xs.text)},content:f(QR,{userAnswer:p,correctAnswer:u})})}function QR(e,{correctAnswer:t,userAnswer:o}){return e`
<div class=${xs.content}>
	${e(K1,{title:k("Quiz.Player.Question.YourAnswer"),correct:!1,answer:o})}
	${e(K1,{title:k("Quiz.Player.Question.CorrectAnswer"),correct:!0,answer:t})}
</div>`}function K1(e,{answer:t,correct:o,title:r}){return e`
<div class=${xs.answerBlock}>
	<span
		class=${xs.title.withMods({correct:o})}
	>
		${r}
	</span>
	${e(ke,{paragraph:t},xs.text)}
</div>`}function $1(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6" y="6" width="8" height="8" rx="4" fill="currentColor"/></svg>
`}var Bs={list:"x2b429__list",listItem:"x2b429__list-item",indicator:"x2b429__indicator",text:"x2b429__text"};function N1(e,{onClose:t,matchId:o,questionId:r}){let{states:n}=U(),a=F(n.quiz).questions.blocks[r].content.matches.blocks[o],c=d($e(a.left.text.blockMap));return ym(e,{header:{onClose:t,title:f(ke,{paragraph:c},Bs.text)},content:f(HR,{onClose:t,questionId:r,match:a})})}function HR(e,{onClose:t,questionId:o,match:r}){let{actions:n,states:i}=U(),s=F(i.quiz),a=F(i.matchingQuestionsState),c=n.connectMatch,l=n.disconnectMatch,m=s.questions.blocks[o],u=a[o],p=new Set(Object.values(u.matchedPairs)),S=Q(()=>Vo(m),[m]),b=O(y=>{t();let _=um(u.matchedPairs,y);_&&l({questionId:o,leftIdToDisconnect:_}),c({questionId:o,matchToConnect:{leftId:r.left.id,rightId:y}})},[c,l,r.left.id,t,o,u.matchedPairs]);return e`
<div class=${Bs.list}>
	${e.renderAll(u.rightPartsOrder,y=>{let _=p.has(y),C=S.blocks[y],T=d($e(C.text.blockMap));return ye(y,UR,{paragraph:T,selected:_,onClick:()=>b(y)})})}
</div>`}function UR(e,{paragraph:t,onClick:o,selected:r}){return e`
<div class=${Bs.listItem} onclick=${o}>
	${e(ke,{paragraph:t},Bs.text)}
	${e.renderIf($1,()=>r,Bs.indicator)}
</div>`}var Fo={container:"xf0adf__container",matching:{withMods:e=>__getCssClass("xf0adf__matching",e)},header:"xf0adf__header",responseContainer:"xf0adf__response-container",divider:"xf0adf__divider",placeholder:"xf0adf__placeholder",icon:"xf0adf__icon",text:"xf0adf__text"};function WR(e){return e`
<svg class=${Fo.divider} xmlns="http://www.w3.org/2000/svg">
	<line x1="0" y1="1" x2="100%" y2="0" stroke="currentColor" stroke-width=${1} stroke-dasharray="6 3" stroke-linecap="square"/>
</svg>
`}function qR({selected:e,responseSelected:t,submitted:o,correct:r,showCorrectAnswers:n}){return o?n?r?"correct":"incorrect":"answered":e||t?"selected":"default"}function GR(e){return e`
<span class=${Fo.placeholder}>
	${k("Quiz.Player.Question.Matching.ChooseYourAnswer")}
</span>`}function YR(e){return e?d($e(e.text.blockMap)):null}function z1(e,{questionId:t,matchData:o,rightPartData:r,submitted:n,showCorrectAnswers:i}){let[s,a]=j(!1),c=d($e(o.left.text.blockMap)),l=YR(r),m=!!n&&!!r&&o.right.id===r.id,u=O(()=>a(!1),[]),{close:p,open:S}=Cs({html:e,side:"bottom",component:L1,closeOnOverlayClick:!0}),{close:b,open:y}=Cs({html:e,side:"bottom",component:N1,onBeforeClose:u,closeOnOverlayClick:!0}),_=O(()=>{if(n){!m&&i&&S({matchId:o.id,questionId:t,onClose:p});return}a(!0),y({onClose:b,matchId:o.id,questionId:t})},[p,b,m,o.id,S,y,t,i,n]),C=qR({selected:s,responseSelected:!!l,submitted:n,correct:m,showCorrectAnswers:i});return e`
<div class=${Fo.container}>
	<div
		class=${Fo.matching.withMods({state:C})}
		onclick=${_}
	>
		<div class=${Fo.header}>
			${e(ke,{paragraph:c},Fo.text)}
		</div>
		<div class=${Fo.responseContainer}>
			${e(WR,{})}
			${e.switch(()=>l?f(ke,{paragraph:l},Fo.text):f(GR))}
			<div class=${Fo.icon}>
				${e.switch(()=>i&&C==="incorrect"?f(P1):n?null:f(A1))}
			</div>
		</div>
	</div>
	${e.renderIf(Sr,()=>i&&{correct:m,position:"fixed"})}
</div>`}var jR={content:"x36a71__content"};function Q1(e,{question:t,questionState:o,showCorrectAnswers:r}){let n=o.submitted,i=Q(()=>Vo(t),[t]),s=O(a=>{let c=t.content.matches.blocks[a],l=o.matchedPairs[c.left.id];return l&&i.blocks[l]||null},[i,t.content.matches.blocks,o.matchedPairs]);return e`
<div class="${jR.content}">
	${e.renderAll(o.leftPartsOrder,a=>{let c=d(ks(t,a));return ye(c.id,z1,{questionId:t.id,matchData:c,rightPartData:s(c.id),submitted:n,showCorrectAnswers:r})})}

</div>`}var XR=600;function H1(e,{question:t,questionState:o,showCorrectAnswers:r}){let n=P(),i=ZR(n);return e`
<div save-ref=${n}>
	${e.switch(()=>i?f(Q1,{question:t,questionState:o,showCorrectAnswers:r}):f(I1,{question:t,questionState:o,showCorrectAnswers:r}))}
</div>`}function ZR(e){let[t,o]=j(!1);return Ct({target:e,onResize:({width:r})=>{let n=r<=XR;n!==t&&o(n)}}),t}function U1(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.667 9.167V2m0 7.167L3 7.5m1.667 1.667L6.334 7.5M4.667 2 3 3.667M4.667 2l1.666 1.667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M15.962 17.917H9.504a.833.833 0 0 1-.58-.235l-3.822-3.698c-.569-.551-.488-1.488.216-1.851.487-.252 1.003-.466 1.349-.466.828 0 1.657.549 2.121.92.145.115.379.012.379-.173V4.667a1.667 1.667 0 1 1 3.333 0V8l3.543 1.288a2.5 2.5 0 0 1 1.611 2.765l-.87 5.169a.833.833 0 0 1-.822.695z" stroke="currentColor" stroke-width="2"/></svg>
`}var JR={icon:{withMods:e=>__getCssClass("x05606__icon",e)}};function W1(e,{correct:t}){let{states:o}=U(),r=F(o.direction),n=t?f(mm):f(lm);return e`
<div
	class=${JR.icon.withMods({dir:r,type:t?"correct":"incorrect"})}
>
	${e(n)}
</div>
`}var bs={container:{withMods:e=>__getCssClass("x7fac1__container",e)},item:{withMods:e=>__getCssClass("x7fac1__item",e)},text:"x7fac1__text",index:{withMods:e=>__getCssClass("x7fac1__index",e)},rotateLtrAnimation:"x7fac1__rotate-ltr-animation",rotateRtlAnimation:"x7fac1__rotate-rtl-animation",dragIcon:{withMods:e=>__getCssClass("x7fac1__drag-icon",e)}};function eM({color:e,dasharray:t,borderRadius:o}){return`
<svg xmlns="http://www.w3.org/2000/svg" fill="none">
	<rect
		width="100%"
		height="100%"
		fill="none"
		rx="${o}"
		ry="${o}"
		stroke="${e}"
		stroke-width="2"
		stroke-dasharray="${t.join(" ")}"
		stroke-linecap="square"
	></rect>
</svg>
`}function q1(e,{index:t,sequence:o,correctIndex:r,state:n,submitted:i,showCorrectAnswers:s}){let{states:a}=U(),c=F(a.direction),l=t===r,m=rk(),u=V(),p=V();Y(u,"pointerdown",C=>{let T=C.pointerType==="mouse",h=C.composedPath().includes(p.current);!T&&!h||C.button===Il.left&&n!=="dragged"&&!i&&m(o.id,C)});let[S]=be.getBlocksArray(o.text.blockMap),b=s?r+1:t+1,y=n==="dragged",_=n==="hidden";return A(()=>{if(y)u.current.style.backgroundImage="";else{let C=_?wt().borderAccentDefault:wt().borderDefault,T=_?[5]:[];u.current.style.backgroundImage=dm(eM({color:C,dasharray:T,borderRadius:10}))}},[y,_,u]),e`
<div
	class=${bs.container.withMods({submitted:i,dir:c})}
>
	<div class=${bs.index.withMods({dragged:y})}>${b}.</div>
	<div
		class=${bs.item.withMods({dragged:y,dragging:_,submitted:i,withBackground:s?!l:i})}
		save-ref=${u}
	>
		${e(ke,{paragraph:S},bs.text)}
		${e.renderIf(W1,()=>s&&{correct:l})}
		<div
			save-ref=${p}
			class=${bs.dragIcon.withMods({dragged:n==="dragged",disabled:i})}
		>
			${e(f(ci))}
		</div>
	</div>
</div>`}var G1=8,vs={content:{withMods:e=>__getCssClass("xfc723__content",e)},answersList:"xfc723__answers-list",hint:"xfc723__hint",hintIcon:"xfc723__hint-icon",hintText:"xfc723__hint-text"};function Y1(e,{question:t,questionState:o,showCorrectAnswers:r}){let n=V(),{actions:i}=U(),s=i.changeSequenceOrder;X(()=>{Te(n.current,"--gap",`${G1}px`)},[n]);let a=Ie(en),c=ri(a);return e`
<div
	save-ref=${n}
	class=${vs.content.withMods({withAnswers:r})}
>
	<div class=${vs.hint}>
		${e(U1,{},vs.hintIcon)}
		<p class=${vs.hintText}>${k("Quiz.Player.Sequence.Hint")}</p>
	</div>
	${e(ik,{items:o.order,getItemId:l=>l,getItemBinding:(l,m,u)=>ye(l,q1,{index:m,sequence:t.content.blocks[l],correctIndex:t.content.order.indexOf(l),state:u,submitted:o.submitted,showCorrectAnswers:r}),onItemsChange:l=>{s({newOrder:l,questionId:t.id})},scrollController:c,gap:G1},vs.answersList)}
</div>`}function j1(e,t,o=!1){let r=P({ref:e,select:t});A(()=>{let{ref:n,select:i}=r.current;if(i){n.current.focus({preventScroll:o});let s=n.current.value,a=i=="all"?0:s.length;n.current.setSelectionRange(a,s.length,"backward"),n.current.scrollLeft=0}},[o])}var Ts={textField:{withMods:e=>__getCssClass("x825db__text-field",e)},input:{withMods:e=>__getCssClass("x825db__input",e)},suffix:"x825db__suffix",eyeWrapper:"x825db__eye-wrapper",counter:"x825db__counter"};function tM(e,{value:t,onChange:o,onInput:r,onFocus:n,onBlur:i,onEnter:s,placeholder:a,state:c="normal",maxLength:l,selectionOnConnect:m,validation:u,type:p,inputType:S,size:b="medium",displayType:y,readOnly:_,autocomplete:C,preventScrollOnFocus:T,autotestData:h,onDisplayedValueChanged:x}){let B=mr(),L=P(!0),$=P(t),z=fe(u),ue=O(()=>{if(!z.current||!z.current.onValidStateChange)return;let Je=z.current.validate(B.current.value);Je!=L.current&&(L.current=Je,z.current.onValidStateChange(Je,B.current.value))},[B,z]);X(()=>{(B.current.value!==t||!t)&&(B.current.value=t,x(t),ue())},[B,t,ue,x]),A(()=>{u&&u.restoreOnSubmitInvalid==="value"&&!u.validate(t)&&console.error("ERROR: value is not valid")},[t,u]),Y(B,"blur",()=>{if(u&&(u.onSubmitInvalid||u.restoreOnSubmitInvalid)&&!u.validate(B.current.value))switch(u.onSubmitInvalid&&u.onSubmitInvalid(B.current.value),u.restoreOnSubmitInvalid){case"value":B.current.value=$.current||"",x(B.current.value);break;case"focus":B.current.focus(),B.current.setSelectionRange(0,B.current.value.length);break}else $.current=B.current.value,o(B.current.value)}),Y(B,"input",()=>{r&&r(B.current.value),u&&u.onValidStateChange&&ue(),x(B.current.value)}),Y(B,"focus",()=>n&&n()),Y(B,"blur",()=>i&&i()),gr(B,So.ENTER,()=>{s&&s(),B.current.blur()}),j1(B,m,T);let Z=Ts.input.withMods({size:b,type:y,password:p==="password"});return e`
<input
	type=${S}
	class=${Z}
	placeholder=${a}
	disabled=${c=="disabled"}
	maxlength=${l}
	readonly=${_}
	save-ref=${B}
	autocomplete=${C}
	data-at=${ne(h)}
>`}function oM(e,{suffix:t}){return e`
<div class=${Ts.suffix}>
	${t}
</div>
`}function rM(e,{showPassword:t,setShowPassword:o}){let r=P();Y(r,"click",()=>o(!t));let n=t?f(lk,{}):f(ck,{});return e`
<div
	save-ref=${r}
	class=${Ts.eyeWrapper}
>
	${e(n)}
</div>`}function X1(e,t){let{displayType:o,state:r}=t,[n,i]=j(!1),[s,a]=j(t.value.length),c=O(l=>a(l.length),[]);return e`
<div class=${Ts.textField.withMods({type:o,focused:n,error:r=="error",disabled:r=="disabled"})}>
	${e(tM,{...t,onDisplayedValueChanged:c,inputType:t.type==="password"&&!t.showPassword?"password":"text",onFocus:()=>{t.onFocus&&t.onFocus(),i(!0)},onBlur:()=>{t.onBlur&&t.onBlur(),i(!1)}})}
	${e.renderIf(rM,()=>t.type==="password"&&{showPassword:t.showPassword,setShowPassword:t.setShowPassword})}
	${e.renderIf(oM,()=>t.displayType==="suffix"&&{suffix:t.suffix})}
	${e.renderIf(mk,()=>t.maxLength!==void 0&&t.displayType!=="suffix"&&{maxCount:t.maxLength,count:s},Ts.counter)}
</div>`}function Z1(e,t){return X1(e,{...t,displayType:"light"})}var ws={typeIn:"x08b26__type-in",field:{withMods:e=>__getCssClass("x08b26__field",e)},textField:"x08b26__text-field",correct:"x08b26__correct",fadeIn:"x08b26__fade-in",answers:"x08b26__answers"};function nM(e,{question:t}){let o=so(t.content.answers).map(r=>r.text).join(", ");return e`
<div class=${ws.correct}>
	${qf(k("Quiz.Player.TypeIn.CorrectAnswers"))}
	<span class=${ws.answers}>${o}</span>
</div>`}function J1(e,{question:t,questionState:o,showCorrectAnswers:r}){let{actions:n}=U(),i=n.setTypeInAnswer,s=o.submitted?"disabled":"normal";return e`
<div class=${ws.typeIn}>
	<div class=${ws.field.withMods({withAnswers:r})}>
		${e(Z1,{type:"text",size:"xLarge",value:o.answer,onInput:a=>i({id:t.id,answer:a}),onChange:()=>{},selectionOnConnect:mn()?void 0:"end",state:s,preventScrollOnFocus:!0},ws.textField)}
		${e.renderIf(Sr,()=>r&&{correct:o.correct})}
	</div>
	${e.renderIf(nM,()=>r&&{question:t})}
</div>`}function ex({question:e,showCorrectAnswers:t,choicesQuestionsState:o,choicesViewOrderMap:r,typeInQuestionsState:n,sequenceQuestionsState:i,matchingQuestionsState:s}){switch(e.type){case"ti":return f(J1,{question:e,questionState:n[e.id],showCorrectAnswers:t});case"sq":return f(Y1,{question:e,questionState:i[e.id],showCorrectAnswers:t});case"mc":case"mr":return f(x1,{question:e,questionState:o[e.id],choicesViewOrder:r[e.id],showCorrectAnswers:t});case"mt":return f(H1,{question:e,questionState:s[e.id],showCorrectAnswers:t});default:I(e)}return null}var Ds={question:"xd4ba6__question",description:"xd4ba6__description",attachment:"xd4ba6__attachment",content:"xd4ba6__content",footer:"xd4ba6__footer"};function iM(e){switch(e.type){case"ti":return!!e.answer;case"mc":case"mr":return Object.values(e.choices).some(t=>t);case"sq":return!0;case"mt":return e.leftPartsOrder.every(t=>e.matchedPairs[t]!==null);default:I(e)}return!1}function tx(e,{question:t,questionState:o,isResultsVisible:r}){let{states:n}=U(),{showCorrectAnswersEnabled:i,showFeedbackEnabled:s}=F(n.playerSettings),a=F(n.sessionState),c=F(n.quizCompleted),l=F(n.typeInQuestionsState),m=F(n.choicesQuestionsState),u=F(n.sequenceQuestionsState),p=F(n.matchingQuestionsState),S=F(n.choicesViewOrderMap),b=F(n.questionsViewOrder),y=F(n.baseUrl),_=i&&o.submitted,C=s&&o.submitted,T=a==="inProgress",h=V(),[x,B]=Xn(!1),L=O(()=>B(!0,100),[B]),$=O(()=>B(!1,0),[B]);return j0(h,x,$),e`
<div class=${Ds.question}>
	${e(f1,{question:t,questionsViewOrder:b},Ds.description)}
	${e(sm(t.attachment,y),{className:Ds.attachment})}
	${e(ex({question:t,showCorrectAnswers:_,choicesQuestionsState:m,choicesViewOrderMap:S,typeInQuestionsState:l,sequenceQuestionsState:u,matchingQuestionsState:p}),Ds.content)}
	<div
		class=${Ds.footer}
		save-ref=${h}
	>
		${e.renderIf(C1,()=>C&&{question:t,correct:o.correct})}
		${e.switch(()=>c?r?f(d1):f(u1):_||C?f(m1,{disabled:!T,onClick:$}):f(p1,{disabled:!(iM(o)&&T),onClick:i||s?L:void 0}))}
	</div>
</div>`}var ox=Math.acos(.6666666666666667)*2,rn=2*Math.PI*120-ox*120,Dp=7,Ep={x:124,y:124},Cm=100;function rx(e){return{strokeDashArray:rn,strokeDashOffset:rn*(1+e/Cm)}}function nx(e){return{strokeDashArray:rn,strokeDashOffset:rn*(1+e/Cm)-Dp}}function ix(e){return{strokeDashArray:rn,strokeDashOffset:rn*(e/Cm)+Dp}}var sM={graph:"x08ea2__graph"};function sx(e,{passingScore:t,quizPassed:o,score:r}){let n=wt(),i=o?n.actionPrimaryDefault:n.iconSubdued,s=n.backgroundBlue,a=rx(r),c=nx(t),l=ix(t);return e`
<svg
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
	class=${sM.graph}
>
	<circle
		fill="white"
		r="119"
		cx="${Ep.x}"
		cy="${Ep.y}"
	></circle>
	<path
		d="M213.318 203.792C232.395 182.582 244 154.54 244 123.791C244 57.6322 190.274 4 124 4C57.7258 4 4 57.6322 4 123.791C4 154.64 15.6814 182.766 34.8694 204"
		stroke=${s} stroke-width="8" stroke-linecap="round" stroke-linejoin="round"
		stroke-dasharray="${c.strokeDashArray}"
		stroke-dashoffset="${c.strokeDashOffset}"
	/>
	<path
		d="M213.318 203.792C232.395 182.582 244 154.54 244 123.791C244 57.6322 190.274 4 124 4C57.7258 4 4 57.6322 4 123.791C4 154.64 15.6814 182.766 34.8694 204"
		stroke=${s} stroke-width="8" stroke-linecap="round" stroke-linejoin="round"
		stroke-dasharray="${l.strokeDashArray}"
		stroke-dashoffset="${l.strokeDashOffset}"
	/>
	<path
		style=${`display: ${r>0?"initial":"none"}`}
		d="M213.318 203.792C232.395 182.582 244 154.54 244 123.791C244 57.6322 190.274 4 124 4C57.7258 4 4 57.6322 4 123.791C4 154.64 15.6814 182.766 34.8694 204"
		stroke=${i} stroke-width="8" stroke-linecap="round" stroke-linejoin="round"
		stroke-dasharray="${a.strokeDashArray}"
		stroke-dashoffset="${a.strokeDashOffset}"
	/>
</svg>`}var Rp={passingScoreContainer:"x125f4__passing-score-container",scoreDescription:"x125f4__score-description",scoreLabel:"x125f4__score-label"};function ax(e,{passingScore:t}){return e`
<div class=${Rp.passingScoreContainer}>
	<div class=${Rp.scoreDescription}>
		${k("Quiz.Player.Results.Graph.PassingScoreDescription")}
	</div>
	<div class=${Rp.scoreLabel}>
		${t}%
	</div>
</div>`}function cx(e){return e`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m8 8 24 24M8 32 32 8" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}function lx(e){return e`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 23.274 14.393 32 34 8" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}var Mp={textInfo:{withMods:e=>__getCssClass("x2bd3f__text-info",e)},icon:"x2bd3f__icon",score:"x2bd3f__score"};function mx(e,{quizPassed:t,score:o}){let{states:r}=U(),n=F(r.direction),i=t?f(lx):f(cx);return e`
<div class=${Mp.textInfo.withMods({dir:n,result:t?"success":"failed"})}>
	${e(i,Mp.icon)}
	<span class=${Mp.score}>
		${o}%
	</span>
</div>`}var aM={container:{withMods:e=>__getCssClass("x94c2d__container",e)}};function ux(e){let{states:t}=U(),{passingScore:o}=F(t.playerSettings),r=F(t.score),n=F(t.quizPassed);return e`
<div class=${aM.container.withMods({"top-offset":o>40&&o<60?"large":"normal",mobile:mn()})}>
	${e(sx,{passingScore:o,quizPassed:n,score:r})}
	${e(mx,{quizPassed:n,score:r})}
	${e(ax,{passingScore:o})}
</div>`}var Ip={results:{withMods:e=>__getCssClass("x3626b__results",e)},title:"x3626b__title",message:"x3626b__message"};function cM(e,t){return e.displayType==="hideResults"?e.completed:t?e.passed:e.failed}function dx(e){let{states:t}=U(),{results:o}=F(t.quiz);if(!o)throw Error("'results' is not defined");let r=F(t.quizPassed),n=cM(o,r),i=n.visibility==="titleAndMessage"||n.visibility==="titleOnly"?be.getBlocksArray(n.title.blockMap)[0]:null,s=n.visibility==="titleAndMessage"||n.visibility==="messageOnly"?be.getBlocksArray(n.message.blockMap)[0]:null,a=o.displayType==="showResults";return e`
<div
	class=${Ip.results.withMods({diagram:a})}
>
	${e.renderIf(ux,()=>a)}
	${e.renderIf(ke,()=>i&&{paragraph:i},Ip.title)}
	${e.renderIf(ke,()=>s&&{paragraph:s},Ip.message)}
	${e(am,{})}
</div>`}function px(e,{showTopPanel:t}){let{states:o}=U(),r=F(o.quiz),n=F(o.currentSlide),i=F(o.typeInQuestionsState),s=F(o.choicesQuestionsState),a=F(o.sequenceQuestionsState),c=F(o.matchingQuestionsState),l={...i,...s,...a,...c};return e`
<div>
	${e((()=>{var u;switch(n.type){case"intro":return r.intro?f(l1,{showTopPanel:t}):null;case"results":return r.results?f(dx):null;case"question":{let p=n.questionId,S=r.questions.blocks[p];return S?f(tx,{question:S,questionState:l[p],isResultsVisible:!!((u=r.results)!=null&&u.visible)}):(R.error(`Unknown current slide ${n}`),null)}default:I(n)}})())}
</div>`}var lM={content:{withMods:e=>__getCssClass("x5c827__content",e)}};function fx(e,{showWatermark:t,showTopPanel:o,contentRef:r}){return o1(e),Z0(e),e`
<div class=${lM.content.withMods({"with-watermark":t})}>
	${e(px,{showTopPanel:o},{ref:r})}
</div>`}var mM={badge:{withMods:e=>__getCssClass("x7dfe9__badge",e)}},uM={badge:{withMods:e=>__getCssClass("x12206__badge",e)},icon:"x12206__icon",text:"x12206__text"},dM={badge:{withMods:e=>__getCssClass("xef43e__badge",e)},icon:"xef43e__icon",text:"xef43e__text"},pM={badge:{withMods:e=>__getCssClass("x3aaac__badge",e)},icon:"x3aaac__icon",text:"x3aaac__text"};function hx(e,{type:t,size:o,style:r,text:n,icon:i,autotestData:s,direction:a}){let c=H(r,{primary:uM,secondary:dM,complementary:pM}),l=de(mM.badge.withMods({size:o}),c.badge.withMods({type:t,size:o}));return e`
<div
	class=${l}
	data-at=${ne(s)}
	dir=${a}
>
	${e(i,c.icon)}
	${e(yo,{text:n},c.text)}
</div>`}function gx(e){X_({...e,tooltipProps:{contentType:"text",text:e.text,type:e.type,size:e.size}})}function yx(e){let t=V();return gx({html:e,anchorRef:t,text:k("Learn.ProctoringBadge.Tooltip"),side:"bottom"}),Ae(e,f(hx,{style:"primary",type:"neutral",size:"default",text:k("Learn.ProctoringBadge.Label"),autotestData:"proctoring-badge"}),t)}var fM={timer:"xd5412__timer"};function Cx(e){let{states:t}=U(),o=F(t.timerLeftTime),r=im(o,{minutes:io("Quiz.Player.Timer.WithoutSeconds"),seconds:io("Quiz.Player.Timer.WithoutMinutes"),minutesAndSeconds:io("Quiz.Player.Timer")});return e`
<div class=${fM.timer}>
	${r}
</div>`}var Es={topPanel:{withMods:e=>__getCssClass("xf45c4__top-panel",e)},title:"xf45c4__title",timer:"xf45c4__timer",closeButton:"xf45c4__close-button",watermark:"xf45c4__watermark",proctoring:"xf45c4__proctoring"};function Sx(e,{previewMode:t,title:o,timeLimitEnabled:r,proctoringInProgress:n}){let{actions:i,states:s}=U(),a=F(s.insertType),c=F(s.direction),l=V(),m=al(l);return qt({html:e,elementRef:l,text:o,show:m}),e`
<div class=${Es.topPanel.withMods({dir:c,type:a})}>
	${e(yo,{text:o},{className:Es.title,ref:l})}
	${e.renderIf(yx,()=>n,Es.proctoring)}
	${e.renderIf(Cx,()=>r,Es.timer)}
	${e.renderIf(Ce,()=>!t&&{style:"ghost",structure:"icon",icon:f(go),onClick:i.closeQuiz},Es.closeButton)}
</div>`}var hM={quizPlayer:{withMods:e=>__getCssClass("x87959__quiz-player",e)}};function _x(e,t){return oS(e,{subscriptionProduct:t.subscriptionProduct,watermarkUrl:t.watermarkUrl,showWatermark:t.showWatermark,quiz:t.quiz,settings:t.settings,direction:t.direction,persistedState:t.persistedState,initApi:t.initApi,title:t.title,baseUrl:t.baseUrl,insertType:t.insertType||"standalone"}),e`
<div>
	${e(gM,t)}
</div>`}function gM(e,{title:t,previewMode:o,proctoringInProgress:r,scrollableContainerRef:n}){let{states:i}=U(),s=F(i.subscriptionProduct),a=F(i.watermarkUrl),c=F(i.showWatermark),l=F(i.timeLimitEnabled),m=F(i.insertType),u=Jr(m),p=c&&!!s&&!!a,S=l||u,b=V(),y=V(),_=V(),C=n!=null?n:y,T=!u&&S?b:_;return e.setContext(en,C),Y0(C,T),e`
<div
	class=${hM.quizPlayer.withMods({type:m})}
	save-ref=${b}
>
	${e.renderIf(Kc,()=>p&&{subscriptionProduct:s,watermarkUrl:a})}
	${e.renderIf(Sx,()=>S&&{previewMode:o,title:t,proctoringInProgress:r,timeLimitEnabled:l})}
	${e(fx,{showWatermark:p,showTopPanel:S,contentRef:_},{ref:y})}
</div>`}var Ap={quizBlock:"x70bba__quiz-block",quizPlayer:"x70bba__quiz-player",infoMessagesLayout:"x70bba__info-messages-layout"},yM={title:"",baseUrl:"",previewMode:!0,proctoringInProgress:!1,subscriptionProduct:null,watermarkUrl:"",showWatermark:!1};function kx(e){let t={sessionState:e.sessionState,attempts:e.attempts,currentSlide:e.currentSlide,typeInQuestionsState:e.typeInQuestionsState,choicesQuestionsState:e.choicesQuestionsState,sequenceQuestionsState:e.sequenceQuestionsState,matchingQuestionsState:e.matchingQuestionsState,questionsViewOrder:e.questionsViewOrder,choicesViewOrderMap:e.choicesViewOrderMap,timeSpent:e.timeSpent,timerStartTime:e.timerStartTime,timerStopTime:e.timerStopTime,bestAttempt:e.bestAttempt};return Wc(t)}function xx(e,t){let o=P(),r=t.block,n=d(t.quizProps),i=n.quizState,s=r.longreadQuizId,a=n.setQuizApi,[c,l]=j(()=>kx(i));A(()=>{l(u=>{let p=kx(i);return Object.assign(u,p)})},[i]);let m=O(u=>{let p=r.settings.main.isGraded;a({quizBlockKey:r.key,quizId:s,isGraded:p,api:u})},[r.settings.main.isGraded,r.key,s,a]);return e.setContext(gi,o),e`
	<div
		class=${Ap.quizBlock}
		data-key=${r.key}
	>
		${e(_x,{...yM,quiz:r.state,settings:r.settings.main,direction:t.direction,persistedState:c,initApi:m,insertType:"builtIn",scrollableContainerRef:n.scrollableContainerRef},Ap.quizPlayer)}
		<div save-ref=${o} class=${Ap.infoMessagesLayout}></div>
	</div>`}var Pp=0,Bx=1024,bx=Bx*1024,CM=bx*1024;function vx(e){return Math.round(e*10)/10}function SM(e){return Math.max(Pp,Math.round(e/Bx))}function _M(e){return Math.max(Pp,vx(e/bx))}function kM(e){return Math.max(Pp,vx(e/CM))}function Tx(e){let t=kM(e);if(t>1)return k("Common.FileSize.ToGb",{volume:t});let o=_M(e);return o>1?k("Common.FileSize.ToMb",{volume:o}):k("Common.FileSize.ToKb",{volume:SM(e)})}function wx(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.841 31.182V19.068h1.803c.61 0 1.106.495 1.106 1.106v9.902c0 .61-.495 1.106-1.106 1.106H30.84zM14.25 17.68v15.166L28.773 34.5V15.75L14.25 17.68z" fill="#4169B4"/><path d="m23.61 27.043 1.118-6.117h1.705l-1.842 8.597H22.87l-1.352-5.751-1.351 5.75h-1.723l-1.842-8.596h1.705l1.124 6.105 1.369-6.105h1.448l1.363 6.117z" fill="#fff"/></svg>
`}function Dx(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M14.658 26.355v2.895h-2.056v-8.531h3.404c.652 0 1.228.12 1.728.363.504.238.893.58 1.166 1.025.278.442.416.944.416 1.506 0 .832-.299 1.498-.896 1.998-.594.496-1.41.744-2.45.744h-1.312zm0-1.587h1.348c.398 0 .701-.1.908-.3.21-.198.316-.48.316-.843 0-.398-.107-.717-.322-.955-.215-.238-.508-.36-.879-.363h-1.37v2.46zM21.018 29.25v-8.531h2.748c.754 0 1.432.172 2.033.515a3.56 3.56 0 0 1 1.406 1.448c.34.62.512 1.318.516 2.091v.393c0 .781-.166 1.482-.498 2.104a3.619 3.619 0 0 1-1.395 1.453 3.956 3.956 0 0 1-2.003.527h-2.807zm2.056-6.943v5.361h.715c.59 0 1.043-.209 1.36-.627.316-.422.474-1.047.474-1.875v-.37c0-.823-.158-1.444-.474-1.862-.317-.418-.778-.627-1.383-.627h-.691zM34.749 25.852h-3.317v3.398h-2.056v-8.531h5.707v1.588h-3.65v1.963h3.316v1.582z" fill="#E05D36"/></svg>
`}function Ex(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#D1684D"/><path d="M20.49 26.523v3.102h-1.746V20.82h3.305c.636 0 1.194.12 1.675.363a2.6 2.6 0 0 1 1.118 1.034c.26.443.39.95.39 1.518 0 .862-.286 1.544-.856 2.044-.566.496-1.352.744-2.357.744h-1.53zm0-1.47h1.559c.461 0 .812-.113 1.053-.339.244-.226.366-.548.366-.967 0-.432-.122-.78-.366-1.046-.245-.267-.582-.404-1.013-.412h-1.6v2.764z" fill="#fff"/></svg>
`}function Rx(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/></svg>
`}function Mx(e){return e`
<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M39 45.375H9A2.375 2.375 0 0 1 6.625 43V5A2.375 2.375 0 0 1 9 2.625h21.28c.647 0 1.267.264 1.715.731l8.72 9.093c.423.442.66 1.031.66 1.644V43A2.375 2.375 0 0 1 39 45.375z" fill="#fff" stroke="#D0D0D1" stroke-width="1.25"/><path d="M30.5 31.25V19h1.75a1.5 1.5 0 0 1 1.5 1.5v9.25a1.5 1.5 0 0 1-1.5 1.5H30.5zM14.25 17.68v15.166L28.875 34.5V15.75L14.25 17.68z" fill="#468B5B"/><path d="m21.563 23.855 1.588-3.035h2.007l-2.467 4.366 2.531 4.439h-2.03l-1.63-3.084-1.629 3.084h-2.03l2.53-4.439-2.466-4.366h2.007l1.588 3.035z" fill="#fff"/></svg>
`}function Ix(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m6.293 10.707 3 3a1 1 0 0 0 1.414 0l3-3a1 1 0 0 0-1.414-1.414L11 10.586V3a1 1 0 1 0-2 0v7.586L7.707 9.293a1 1 0 0 0-1.414 1.414zM5 15a1 1 0 1 0-2 0v1a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-1a1 1 0 1 0-2 0v1H5v-1z" fill="currentColor"/></svg>
`}function Sm(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.654 5.02a6 6 0 0 1 8.6 2.08l-.432-.173a1 1 0 0 0-.744 1.857l2.625 1.052a1 1 0 0 0 1.3-.556l1.052-2.626A1 1 0 0 0 17.2 5.91l-.134.335a8 8 0 0 0-14.533.889 1 1 0 1 0 1.867.716 6 6 0 0 1 2.255-2.83zm6.693 10.07a6 6 0 0 1-8.583-2.05l.335.162a1 1 0 0 0 .873-1.8l-2.545-1.235a1 1 0 0 0-1.336.463L.856 13.175a1 1 0 1 0 1.8.873l.181-.375a8 8 0 0 0 14.632-.696 1 1 0 1 0-1.868-.717 6 6 0 0 1-2.255 2.83z" fill="currentColor"/></svg>
`}var Ko={attachmentFigure:"x99dbb__attachment-figure",attachmentSubblock:{withMods:e=>__getCssClass("x99dbb__attachment-subblock",e)},attachmentBlock:{withMods:e=>__getCssClass("x99dbb__attachment-block",e)},dndIcon:"x99dbb__dnd-icon",attachmentIcon:"x99dbb__attachment-icon",attachmentInfo:"x99dbb__attachment-info",attachmentName:"x99dbb__attachment-name",attachmentSize:"x99dbb__attachment-size",attachmentButtons:"x99dbb__attachment-buttons",placeholder:"x99dbb__placeholder"};function xM(e,{disabled:t,onReplace:o,onDownload:r}){return e`
<div class=${Ko.attachmentButtons}>
	${e.renderIf(li,()=>o&&{component:f(Ce,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:f(Sm),size:"small",onClick:o}),tooltipText:k("Roll.Editor.AttachmentBlock.UpdateButtonTooltip")})}
	${e(li,{component:f(Ce,{state:t?"disabled":"default",style:"linkSecondary",structure:"icon",icon:f(Ix),size:"small",onClick:r}),tooltipText:k("Roll.Editor.AttachmentBlock.DownloadButtonTooltip")})}
</div>`}function BM(e,{extension:t}){return e`
<div class=${Ko.attachmentIcon}>
	${e.switch(()=>{switch(t){case"doc":case"docx":return f(wx,{});case"ppt":case"pptx":return f(Ex,{});case"xls":case"xlsx":return f(Mx,{});case"pdf":return f(Dx,{});default:return f(Rx,{})}})}
</div>`}function bM(e){return e`
<img class=${Ko.placeholder} aria-hidden=true src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" />`}function Ax(e,{key:t,fileName:o,fileSize:r,fileExtension:n,isLoading:i,isPlayer:s,disabled:a,onReplace:c,onDownload:l}){let m=P();return Y(m,"click",()=>{s&&l()}),e`
<div
	class=${Ko.attachmentBlock.withMods({clickable:s,lock:!!a})}
	save-ref=${m}
	draggable=true
>
	${e.switch(()=>i?f(z_,{size:"medium"},Ko.attachmentIcon):f(BM,{extension:n}))}
	<div class=${Ko.attachmentSubblock.withMods({uploading:i})}>
		<div class=${Ko.attachmentInfo}>
			${e(yo,{text:o},Ko.attachmentName)}
			<div class=${Ko.attachmentSize}>${Tx(r)}</div>
		</div>
		${e(xM,{disabled:!!a,onReplace:c,onDownload:s?()=>{}:l})}
		${e.renderIf(bM,()=>!s&&!i)}
	</div>
</div>`}var vM={blockWrapper:{withMods:e=>__getCssClass("xa4510__block-wrapper",e)},alignmentBlockWrapper:{withMods:e=>__getCssClass("xa4510__alignment-block-wrapper",e)}},Px="size-wrapper",TM=.89,wM={},_r=class extends oe{constructor({block:t,blockBeforeType:o,blockAfterType:r,blockRenderer:n,isHidden:i=!1,direction:s}){super({relatedData:wM,direction:s}),this._block=t,this._isHidden=i,this._blockBeforeType=o,this._blockAfterType=r,this._currentBlockType=Oo(this._block),this._blockRenderer=n,this.setOnDomElementReCreatedCallback(()=>{})}blockRenderer(){return this._blockRenderer}setBlockRenderer(t){this._blockRenderer!==t&&(this._blockRenderer=t,this._sheduleRender())}setBlock(t){this._block!==t&&(this._block=t,this._currentBlockType=Oo(this._block),this._blockRenderer.setBlock(t),this._sheduleRender())}setHidden(t){this._isHidden!==t&&(this._isHidden=t,this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._blockRenderer.setDirection(t))}setBlockBeforeType(t){this._blockBeforeType!==t&&(this._blockBeforeType=t,this._sheduleRender())}setBlockAfterType(t){this._blockAfterType!==t&&(this._blockAfterType=t,this._sheduleRender())}_calculatePadding(t){return At()?t*TM:t}_getBlockPaddingTop(){var t;return this._calculatePadding(this._block.designSettings&&((t=this._block.designSettings.padding)!=null&&t.top)?this._block.designSettings.padding.top:Ll(this._currentBlockType,this._blockBeforeType))}_getBlockPaddingBottom(){var t;return this._calculatePadding(this._block.designSettings&&((t=this._block.designSettings.padding)!=null&&t.bottom)?this._block.designSettings.padding.bottom:$l(this._currentBlockType,this._blockAfterType))}_getBlockWrapperCssStyles(){var r,n;let t={"background-color":"","padding-block-start":"","padding-block-end":""},o=(n=(r=this._block.designSettings)==null?void 0:r.background)==null?void 0:n.color;if(o&&o.color){let i=pe(o.color),s=o.opacity;t["background-color"]=`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${s})`}return t}_getSizeWrapperCssStyles(){let t={"padding-block-start":"","padding-block-end":""};if(t["padding-block-start"]=`${this._getBlockPaddingTop()}px`,t["padding-block-end"]=`${this._getBlockPaddingBottom()}px`,this._wasRendered()){let o=this.domElement().querySelector(`.${Px}`);o&&(Te(o,"--top-padding-height",t["padding-block-start"]),Te(o,"--bottom-padding-height",t["padding-block-end"]))}return t}_getRenderId(){let t=q(this._block);return t?`:block-${this._block.key}-${this._block.type}-${t.viewType}`:`:block-${this._block.key}-${this._block.type}`}_getClassName(){let t=lo.toAbstractMediaBlock(this._block),o=q(this._block);return vM.blockWrapper.withMods({"fit-content":ae.isCollageBlock(this._block),"float-left":!!t&&t.alignment==="float-left","clear-both":!o,"before-lists":this._blockAfterType==="ol"||this._blockAfterType==="ul",dir:this._direction,hidden:this._isHidden,list:w.isList(this._block)})}_getSizeWrapperClassName(){return Px}_render(){return this._renderFunctionEx(this._getRenderId())`
<div
	class=${this._getClassName()}
	style=${this._getBlockWrapperCssStyles()}
	draggable="false"
	data-wrapper-key=${this._block.key}
>
	<div
		class=${this._getSizeWrapperClassName()}
		style=${this._getSizeWrapperCssStyles()}
	>
		<div>
			${this._blockRenderer.domElement()}
		</div>
	</div>
</div>
`}};var DM={attachmentFigure:"x99dbb__attachment-figure",attachmentSubblock:{withMods:e=>__getCssClass("x99dbb__attachment-subblock",e)},attachmentBlock:{withMods:e=>__getCssClass("x99dbb__attachment-block",e)},dndIcon:"x99dbb__dnd-icon",attachmentIcon:"x99dbb__attachment-icon",attachmentInfo:"x99dbb__attachment-info",attachmentName:"x99dbb__attachment-name",attachmentSize:"x99dbb__attachment-size",attachmentButtons:"x99dbb__attachment-buttons",placeholder:"x99dbb__placeholder"},EM="attachment-block",Op={},RM={},Vp=class extends oe{constructor({block:t}){super({blockName:EM}),this._block=t,this._attachmentElement=null}setBlock(t){this._block!==t&&(this._attachmentElement=null,this._block=t,this._sheduleRender())}_render(){let{key:t,src:o,fileName:r}=this._block,n=Qo(RM,`:attachment-block-${t}`),i=!0;return n`
<figure class=${de(this._getCssClasses(),DM.attachmentFigure)}>
	${n(Ax,{...this._block,isPlayer:i,onDownload:()=>{let s=document.createElement("a");s.setAttribute("href",je(d(o))),s.setAttribute("download",r),s.click()}})}
</figure>`}};function Ox({block:e,blockBeforeType:t,blockAfterType:o,direction:r}){let n;return Op[e.key]?(n=Op[e.key],n.setBlock(e),n.setDirection(r)):(n=new _r({block:e,blockBeforeType:t,blockAfterType:o,direction:r,blockRenderer:new Vp({block:e})}),Op[e.key]=n),n}function Vx(){let e=d(window.getSelection());return e.type==="None"?null:e.rangeCount>0?d(e.getRangeAt(0)):null}var Fp={};function Si(e){return Fp[e]||(Fp[e]={}),Fp[e]}var MM=.76;function Fx(e,t,o){let r=[...pe(e),t],n=pe(st.whiteDefault),i=pn(n,r),[,,s]=wu(i[0],i[1],i[2]);return s<=o?"light":"dark"}function IM({setStyle:e,background:t,lightnessLimitValue:o}){let r=new FastAverageColor,n=je(t.imageSrc);r.getColorAsync(n).then(i=>{i.error||e(Fx(i.hexa,1,o))}),r.destroy()}function Lo({background:e,lightnessLimitValue:t=MM,setStyle:o}){if(!e){o("dark");return}e.type==="color"?o(Fx(e.color,e.opacity,t)):e.type==="image"&&IM({background:e,lightnessLimitValue:t,setStyle:o})}function _i(e){return e?e.type==="color"?{type:"color",color:e.color,opacity:e.opacity}:{type:"image",imageSrc:e.image.src}:null}function Rs(e){return e?{type:"image",imageSrc:e.src}:null}var AM=10,nIe=AM*1024*1024,PM=["png","jpg","jpeg","gif"];function Kx(){return PM.slice()}var OM={input:"x33b88__input"};function _m(e,{browseRef:t,onChange:o,accept:r,multiple:n,autotestId:i}){let s=mr();X(()=>{t.current=()=>s.current.click()},[t,s]);function a(){let l=s.current,m=l.files?[...l.files]:[];l.value="",o(m)}function c(l){l.stopPropagation()}return e`
<input
	save-ref=${s}
	class=${OM.input}
	type='file'
	accept=${r==null?void 0:r.join(", ")}
	multiple=${n}
	onchange=${a}
	onclick=${c}
	data-at=${ne(i)}
>`}function Lx(){return P(()=>{})}function km(e){return{browseRef:Lx(),accept:Kx().map(o=>`.${o}`),onChange:o=>{o.length&&e(o[0])}}}function $x(e){return e`
<svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="39" cy="55" r="6" fill="currentColor"/><path d="M13 82h5v15h3v-7h3v10h-6v11h-5V96H7V84h3v9h3V82z" fill="#fff"/><path d="M13 82h5v15h3v-7h3v10h-6v11h-5V96H7V84h3v9h3V82z" fill="currentColor" fill-opacity=".6"/><path d="m95 61 42 50H53l42-50z" fill="#fff"/><path d="m95 61 42 50H53l42-50z" fill="currentColor" fill-opacity=".68"/><path d="m57 75 30 36H27l30-36z" fill="#fff"/><path d="m57 75 30 36H27l30-36z" fill="currentColor" fill-opacity=".24"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.419 111.001h-2.577c6.816-2.376 11.236-8.42 15.233-14.827.6-.962 1.192-1.933 1.78-2.899 1.785-2.93 3.545-5.82 5.452-8.29 1.842-2.386 3.853-4.424 6.21-5.762l.652.781c-2.259 1.242-4.222 3.198-6.07 5.592-1.87 2.422-3.589 5.243-5.366 8.16v.001c-.594.975-1.194 1.961-1.81 2.947-3.559 5.704-7.585 11.363-13.504 14.297zm11.531 0h-1.586c1.146-.872 2.199-1.881 3.184-2.988 2.575-2.896 4.66-6.433 6.707-9.908l.064-.107c2.054-3.487 4.084-6.918 6.524-9.438 1.396-1.441 2.937-2.596 4.704-3.301l.678.812c-1.742.628-3.262 1.738-4.663 3.185-2.341 2.417-4.312 5.736-6.382 9.25l-.087.148c-2.03 3.445-4.157 7.054-6.798 10.023a24.943 24.943 0 0 1-2.345 2.324zm10.222 0h-1.44a17.107 17.107 0 0 0 1.818-1.933c1.554-1.902 3.014-4.285 4.55-6.792l.599-.974c1.749-2.842 3.614-5.77 5.806-8.176a21.594 21.594 0 0 1 2.576-2.427l.64.768c-.87.684-1.692 1.47-2.477 2.332-2.12 2.328-3.943 5.181-5.694 8.027l-.592.965-.001.002-.004.006c-1.53 2.497-3.028 4.943-4.629 6.902-.375.458-.758.894-1.152 1.3zm8.87 0h-1.586c2.453-1.905 4.676-4.281 6.515-6.795 1.852-2.531 3.297-5.178 4.185-7.581.09-.247.176-.49.255-.73l.748.897-.065.18c-.925 2.502-2.418 5.23-4.316 7.824-1.632 2.231-3.576 4.379-5.735 6.205zm9.686 0h-1.21l.116-.171c1.739-2.56 3.703-5.166 6.777-7.735l.64.768c-2.834 2.369-4.692 4.767-6.323 7.138zm7.01 0h-1.614a46.061 46.061 0 0 1 4.3-3.09l.646.775a47.918 47.918 0 0 0-3.332 2.315z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M34.419 111.001h-2.577c6.816-2.376 11.236-8.42 15.233-14.827.6-.962 1.192-1.933 1.78-2.899 1.785-2.93 3.545-5.82 5.452-8.29 1.842-2.386 3.853-4.424 6.21-5.762l.652.781c-2.259 1.242-4.222 3.198-6.07 5.592-1.87 2.422-3.589 5.243-5.366 8.16v.001c-.594.975-1.194 1.961-1.81 2.947-3.559 5.704-7.585 11.363-13.504 14.297zm11.531 0h-1.586c1.146-.872 2.199-1.881 3.184-2.988 2.575-2.896 4.66-6.433 6.707-9.908l.064-.107c2.054-3.487 4.084-6.918 6.524-9.438 1.396-1.441 2.937-2.596 4.704-3.301l.678.812c-1.742.628-3.262 1.738-4.663 3.185-2.341 2.417-4.312 5.736-6.382 9.25l-.087.148c-2.03 3.445-4.157 7.054-6.798 10.023a24.943 24.943 0 0 1-2.345 2.324zm10.222 0h-1.44a17.107 17.107 0 0 0 1.818-1.933c1.554-1.902 3.014-4.285 4.55-6.792l.599-.974c1.749-2.842 3.614-5.77 5.806-8.176a21.594 21.594 0 0 1 2.576-2.427l.64.768c-.87.684-1.692 1.47-2.477 2.332-2.12 2.328-3.943 5.181-5.694 8.027l-.592.965-.001.002-.004.006c-1.53 2.497-3.028 4.943-4.629 6.902-.375.458-.758.894-1.152 1.3zm8.87 0h-1.586c2.453-1.905 4.676-4.281 6.515-6.795 1.852-2.531 3.297-5.178 4.185-7.581.09-.247.176-.49.255-.73l.748.897-.065.18c-.925 2.502-2.418 5.23-4.316 7.824-1.632 2.231-3.576 4.379-5.735 6.205zm9.686 0h-1.21l.116-.171c1.739-2.56 3.703-5.166 6.777-7.735l.64.768c-2.834 2.369-4.692 4.767-6.323 7.138zm7.01 0h-1.614a46.061 46.061 0 0 1 4.3-3.09l.646.775a47.918 47.918 0 0 0-3.332 2.315z" fill="currentColor" fill-opacity=".5"/><path d="M145 87h4v13h2v-6.5h3v9.5h-5v8h-4V99h-5V89h3v7h2v-9z" fill="#fff"/><path d="M145 87h4v13h2v-6.5h3v9.5h-5v8h-4V99h-5V89h3v7h2v-9z" fill="currentColor" fill-opacity=".6"/></svg>
`}function Nx(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16 0a1 1 0 0 1 1 1v2h2a1 1 0 1 1 0 2h-2v2a1 1 0 1 1-2 0V5h-2a1 1 0 1 1 0-2h2V1a1 1 0 0 1 1-1zM3.5 5A1.5 1.5 0 0 0 2 6.5v8A1.5 1.5 0 0 0 3.5 16h10a1.5 1.5 0 0 0 1.5-1.5V11a1 1 0 1 1 2 0v3.5a3.5 3.5 0 0 1-3.5 3.5h-10A3.5 3.5 0 0 1 0 14.5v-8A3.5 3.5 0 0 1 3.5 3H9a1 1 0 1 1 0 2H3.5zm0 4.25a1.25 1.25 0 1 0 2.5 0 1.25 1.25 0 0 0-2.5 0zm8.945.863a1 1 0 0 0-1.307-.092L8.5 12l-1.178-.587a1 1 0 0 0-.96.037L3.5 13.166V14.5h10v-3.332l-1.055-1.055z" fill="currentColor"/></svg>
`}var nn={text:{ratioX:1,ratioY:1},image:{ratioX:1,ratioY:1},imageWithText:{ratioX:1.7,ratioY:1}};function zx(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M6 2a1 1 0 0 0-2 0v2H2a1 1 0 0 0 0 2h2v8a2 2 0 0 0 2 2h8v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H6V2zm3 2a1 1 0 0 0 0 2h5v5a1 1 0 1 0 2 0V6a2 2 0 0 0-2-2H9z" fill="currentColor"/></svg>
`}function Qx(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.212 1 .485.875 1.37 2.474a1 1 0 1 1-1.748.97l-.228-.412a2.5 2.5 0 1 0 3.5-1.582 1 1 0 0 1 .874-1.799 4.5 4.5 0 1 1-6.317 2.905l-.315.175a1 1 0 0 1-.97-1.75l2.474-1.37.875-.486zM2 6.5A1.5 1.5 0 0 1 3.5 5H7a1 1 0 0 0 0-2H3.5A3.5 3.5 0 0 0 0 6.5v8A3.5 3.5 0 0 0 3.5 18h10a3.5 3.5 0 0 0 3.5-3.5V13a1 1 0 0 0-2 0v1.5a1.5 1.5 0 0 1-1.5 1.5h-10A1.5 1.5 0 0 1 2 14.5v-8zm10.445 3.613a1 1 0 0 0-1.307-.092L8.5 12l-1.178-.587a1 1 0 0 0-.96.037L3.5 13.166V14.5h10v-3.332l-1.055-1.055zM4.75 10.5a1.25 1.25 0 1 1 0-2.5 1.25 1.25 0 0 1 0 2.5z" fill="currentColor"/></svg>
`}function Hx(e){return e`
<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1H8zM6 4H3a1 1 0 0 0 0 2v10a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V6a1 1 0 1 0 0-2h-3a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3zm9 12V6H5v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1zm-7-1a1 1 0 0 1-1-1V9a1 1 0 0 1 2 0v5a1 1 0 0 1-1 1zm3-1a1 1 0 1 0 2 0V9a1 1 0 1 0-2 0v5z" fill="currentColor"/></svg>
`}var VM={imageTemp:"x11b01__image-temp"};function sn(e,{image:t,imageRatio:o,isTemporary:r}){let n=Q(()=>({...t,crop:t.crop?t.crop:Gh(t.width,t.height,o.ratioX,o.ratioY)}),[t,o]),i=V();return A(()=>{r&&i.current.classList.toggle(VM.imageTemp)},[i,r]),Ae(e,f(hr,{image:n}),i)}var ki={image:"x003b0__image",imageToolbar:"x003b0__image-toolbar",divider:"x003b0__divider",imageContainer:"x003b0__image-container",overlay:"x003b0__overlay"};function FM(e,{image:t,imageRatio:o}){let r=V();return X(()=>{t.overlay&&t.overlay.color!==pt?(r.current.style.background=t.overlay.color,r.current.style.opacity=`${t.overlay.opacity}`):(r.current.style.background="",r.current.style.opacity="")},[t.overlay,r]),e`
<div class=${ki.imageContainer}>
	${e(sn,{image:t,imageRatio:o})}
	<div
		class=${ki.overlay}
		save-ref=${r}
	>
	</div>
</div>
`}function KM(e,{onReplaceImage:t,onDeleteImage:o,onCropImage:r}){return e`
<div class=${ki.imageToolbar}>
	${e(Ce,{style:"ghostInversed",structure:"icon",icon:f(Qx),onClick:t,tooltip:k("Common.Editor.ImageControls.MediaToolbar.Replace")})}
	<div class=${ki.divider}></div>
	${e(Ce,{style:"ghostInversed",structure:"icon",icon:f(zx),onClick:r,tooltip:k("Common.Editor.CropImage.TooltipText")})}
	<div class=${ki.divider}></div>
	${e(Ce,{style:"ghostInversed",structure:"icon",icon:f(Hx),onClick:o,tooltip:k("Common.Editor.DeleteImage.TooltipText")})}
</div>`}function Ux(e,{imageData:t,imageRatio:o,readonlyMode:r,onUploadImage:n,onDeleteImage:i,onCropImage:s,onOpenFileDialog:a}){let c=km(n),l=O(()=>{c.browseRef.current(),a()},[c.browseRef,a]);function m(u){di(u)}return e`
<div class=${ki.image} oninput=${m}>
	${e.renderIf(_m,()=>!r&&c)}
	${e(FM,{image:t,imageRatio:o})}
	${e.renderIf(KM,()=>!r&&{onReplaceImage:l,onDeleteImage:i,onCropImage:s})}
</div>`}var xi={content:"x8d2e7__content",imageWithDownload:"x8d2e7__image-with-download",imageWithStub:"x8d2e7__image-with-stub",downloadStub:"x8d2e7__download-stub",downloadStubText:"x8d2e7__download-stub-text",stubIcon:"x8d2e7__stub-icon"};function LM(e,{onUploadImage:t,onOpenFileDialog:o}){let r=km(t),n=O(()=>{r.browseRef.current(),o()},[r.browseRef,o]);function i(s){di(s)}return e`
<div
	class=${xi.imageWithDownload}
	oninput=${i}
>
	${e(_m,r)}
	<div
		class=${xi.downloadStub}
		onclick=${n}
	>
		${e(Nx,{})}
		<span class=${xi.downloadStubText}>${k("Roll.Editor.FlipCardsBlock.AddImage.Placeholder")}</span>
	</div>
</div>
	`}function $M(e){return e`
<div class=${xi.imageWithStub}>
	${e($x,{},xi.stubIcon)}
</div>
`}function Wx(e,{image:t,imageRatio:o,blobData:r,readonlyMode:n,onUploadImage:i,onOpenFileDialog:s,onDeleteImage:a,onCropImage:c}){return e`
<div class=${xi.content}>
	${e.switch(()=>r?f(sn,{image:r,imageRatio:o,isTemporary:!0}):t?f(Ux,{imageData:t,imageRatio:o,readonlyMode:n,onDeleteImage:a,onUploadImage:i,onOpenFileDialog:s,onCropImage:c}):n?f($M):f(LM,{onUploadImage:i,onOpenFileDialog:s}))}
</div>`}var Bi=class extends Tt{constructor({cardKey:t,sideType:o,readonlyMode:r,contentType:n}){super(),this._sideType=o,this._readonlyMode=r,this._cardKey=t,this._commonSignalData={cardKey:this._cardKey,sideType:this._sideType},this._image=null,this._contentType=n,this.onUploadImageSignal=this._createSignal(),this.onFileDialogOpenSignal=this._createSignal(),this.onCropImageSignal=this._createSignal(),this.onRemoveImageSignal=this._createSignal(),this._imageBlobData=null}imageBlobData(){return this._imageBlobData}setImageBlobData(t){this._imageBlobData=t}renderImageContent(t,o){return this._image=t,Pe(Wx)({image:t,imageRatio:nn[this._contentType],blobData:this._imageBlobData,readonlyMode:this._readonlyMode,onUploadImage:this._onUploadImage.bind(this),onOpenFileDialog:this.onFileDialogOpenSignal.toFn(),onDeleteImage:this._onDeleteImage.bind(this),onCropImage:this._onCropImage.bind(this)},o)}_onDeleteImage(){this.onRemoveImageSignal.dispatch(this._commonSignalData)}_onCropImage(){this._image&&this.onCropImageSignal.dispatch({...this._commonSignalData,imageData:this._image,contentType:this._contentType})}_onUploadImage(t){this.onUploadImageSignal.dispatch({...this._commonSignalData,file:t})}};var NM={dndIcon:"xea8c5__dnd-icon"};function qx(e,{className:t,onClick:o,onMouseOver:r,onMouseOut:n}){return e`
<div
	class=${de(NM.dndIcon,t)}
	draggable="true"
	contenteditable="false"
	onclick=${()=>o&&o()}
	onmouseover=${()=>r&&r()}
	onmouseout=${()=>n&&n()}
>
	${e(f(ci))}
</div>`}var zM={dndButton:"xba6a5__dnd-button"};function Gx(e,{controlBackgroundData:t}){let o=V(),r=O(n=>{let i=wt(),s=H(n,{dark:i.textAccentDefault,light:i.textOncolorDefault});Te(o.current,"--color",s)},[o]);return A(()=>{Lo({background:t,setStyle:r})},[r,t]),Ae(e,f(qx,{className:zM.dndButton}),o)}var Kp={},kr=class extends oe{constructor({flipCardsBlockKey:t,cardData:o,sideData:r,sideType:n,onHyperlinkOverFn:i,readonlyMode:s,canDrag:a,isLock:c,relatedData:l}){super({blockName:"flip-card-side",relatedData:l}),this._flipCardsBlockKey=t,this._cardData=o,this._sideType=n,this._sideData=r,this._canDrag=a,this._onHyperlinkOverFn=i,this._readonlyMode=s,this._isLock=c,this._flipHint=this._renderFlipHint(),this._lastDndControlBackgroundData=null,this.updateModifier("mobile",mn())}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._sheduleRender())}setSideData(t){this._sideData!==t&&(this._sideData=t,this._invalidateFlipHintStyle(),this._sheduleRender())}setCanDrag(t){t!==this._canDrag&&(this._canDrag=t,this._sheduleRender())}_getFlipHintBackgroundData(){throw new Error("_getFlipHintBackgroundData not implemented")}_getDndControlBackgroundData(){throw new Error("_getDndControlBackgroundData not implemented")}_renderCardContent(){}_generateRenderId(t){return`:${t}-${this._cardData.key}-${this._sideType}-${this._sideData.type}`}_renderFlipHint(){return J(Kp,this._generateRenderId("flip-card-flip-button"))`
<div
	class='card-flip-hint'
	onconnected=${()=>this._invalidateFlipHintStyle()}
>
	${Pe(Sm)({},this._renderFunctionEx(this._generateRenderId("flip-card-flip-button-icon")))}
</div>
		`}_renderDndControl(){let t=this._getDndControlBackgroundData();return(!this._lastDndControlBackgroundData||!Jm(t,this._lastDndControlBackgroundData))&&(this._lastDndControlBackgroundData=t),J(Kp,this._generateRenderId("flip-card-dnd"))`
<div
	class='card-dnd-control'
	draggable="true"
>
	${Pe(Gx)({controlBackgroundData:this._lastDndControlBackgroundData},this._renderFunctionEx(this._generateRenderId("flip-card-dnd-button")))}
</div>
		`}_invalidateFlipHintStyle(){if(!this._flipHint)return;let t=o=>{let r=wt(),n=H(o,{dark:{background:r.overlayHovered,color:r.iconPlaceholder},light:{background:r.overlayModalsDefault,color:r.iconOncolorSecondary}});Te(this._flipHint,"--color",n.color),Te(this._flipHint,"--background",n.background)};Lo({background:this._getFlipHintBackgroundData(),setStyle:t})}_render(){return J(Kp,this._generateRenderId("flip-card-side"))`
<div class=${this._getCssClasses()}>
	${this._renderCardContent()}
	${this._readonlyMode||!this._canDrag?null:this._renderDndControl()}
	${this._readonlyMode?this._renderFlipHint():null}
</div>
		`}};var QM={},Ms=class extends kr{constructor({cardData:t,sideData:o,sideType:r,onHyperlinkOverFn:n,readonlyMode:i,isLock:s,relatedData:a,flipCardsBlockKey:c,canDrag:l}){super({flipCardsBlockKey:c,cardData:t,sideData:o,sideType:r,onHyperlinkOverFn:n,readonlyMode:i,isLock:s,relatedData:a,canDrag:l}),this._sideWithImageHelper=new Bi({readonlyMode:i,cardKey:t.key,sideType:r,contentType:"image"})}onUploadImageSignal(){return this._sideWithImageHelper.onUploadImageSignal}onCropImageSignal(){return this._sideWithImageHelper.onCropImageSignal}onRemoveImageSignal(){return this._sideWithImageHelper.onRemoveImageSignal}onFileDialogOpenSignal(){return this._sideWithImageHelper.onFileDialogOpenSignal}setImageBlobData(t){this._sideWithImageHelper.setImageBlobData(t),this._sheduleRender()}setSideData(t){this._sideWithImageHelper.setImageBlobData(null),super.setSideData(t)}_getFlipHintBackgroundData(){return Rs(this._sideData.image)}_getDndControlBackgroundData(){return Rs(this._sideData.image)}_renderCardContent(){return J(QM,`:flip-card-side-content-${this._cardData.key}-${this._sideType}-${this._sideData.type}`)`
<div class='image-side-content'>
	${this._sideWithImageHelper.renderImageContent(this._sideData.image,this._renderFunctionEx(`:flip-card-side-content-image-${this._cardData.key}-${this._sideType}-${this._sideData.type}`))}
</div>
		`}};function xm(e){let t=Ht(e);return t?t.characters.length:0}function Bm(e,t,o){let r={"font-size":"","caret-color":"","line-height":""};if(xm(e)!==0)return r;let n=t==null?void 0:t.style;if(n){let i=ve.getFontSize(n);if(i&&i!=="auto"&&(r["font-size"]=`${i}px`,r["line-height"]=o(i)),!zf()){let s=ve.getFontColor(n);s&&(r["caret-color"]=s)}}return r}var bm=class extends Co{constructor({paragraph:t,bemInfo:o,blockBeforeType:r,idPrefix:n,placeholder:i,prompt:s,paragraphIndex:a,flipCardSideRef:c}){super({paragraph:t,bemInfo:o,blockBeforeType:r,idPrefix:n,placeholder:i,prompt:s,paragraphIndex:a}),this._flipCardSideElement=c}getFontSize(t){if(t!=="auto")return t;let o=this._flipCardSideElement.current;if(!o)return 0;let{width:r}=o.getBoundingClientRect();return r>=420?24:r>=260?20:r>=200?18:16}};var HM={},bi=class extends Tt{constructor({cardKey:t,flipCardsBlockKey:o,sideType:r,contentType:n,onHyperlinkOverFn:i,isLock:s,readonlyMode:a}){super(),this._cardKey=t,this._flipCardsBlockKey=o,this._sideType=r,this._contentType=n,this._onHyperlinkOverFn=i,this._readonlyMode=a,this._isLock=s,this.onSheduleRenderSignal=this._createSignal(),this._cardRef={current:null},this._cardResizeObserver=new ResizeObserver(()=>this._invalidateSideRenderer()),this._paragraphResizeObserver=new ResizeObserver(()=>this._invalidateSideRenderer())}setLockMode(t){this._isLock!==t&&(this._isLock=t)}cardRef(){return this._cardRef}renderParagraphWrapper(t,o,r,n){return J(HM,`:flip-card-side-content-paragraph-${this._cardKey}-${this._sideType}-${this._contentType}`)`
			<div
				contenteditable=${!this._readonlyMode&&!this._isLock}
				class=${this._getParagraphWrapperClasses(o)}
				onscroll=${this._invalidateSideRenderer.bind(this)}
				data-flip-cards-key=${this._flipCardsBlockKey}
				data-card-key=${this._cardKey}
				data-side=${this._sideType}
				data-name="flip-card-text-field"
			>
				${this._renderParagraph(t,o,r,n)}
			</div>
		`}getBackgroundStyles(t){if(t.type!=="color"||t.color===pt)return null;let[o,r,n]=pe(t.color),i=t.opacity;return`background: rgba(${o}, ${r}, ${n}, ${i})`}getParagraphStyles(t){return t.type==="image"?{}:Bm(t.text,Pa(t),oi)}getControlBackgroundData(t){return _i(t)}onConnected(t){this._cardResizeObserver.observe(t);let o=d(t.querySelector(".flip-card-paragraph"));this._paragraphResizeObserver.observe(o)}onDisconnected(){this._cardResizeObserver.disconnect(),this._paragraphResizeObserver.disconnect()}_setPlaceholderColor(t,o){if(!t)return;let r=n=>{let i=wt(),s=H(n,{dark:i.textSubdued,light:i.textOncolorSecondary});Te(t,"--placeholder-color",s)};Lo({background:_i(o),setStyle:r})}_renderParagraph(t,o,r,n){let i=q(t);if(!i)throw new Error;let s=pr(new bm({paragraph:i,placeholder:k("Roll.Editor.FlipCardsBlock.Card.TextPlaceholder"),idPrefix:"flip-card-paragraph",flipCardSideRef:this._cardRef}),this._onHyperlinkOverFn,this._readonlyMode,this._isLock);return s.classList.add("flip-card-paragraph"),this._setPlaceholderColor(s,r),rt(s,n),s}_getParagraphWrapperClasses(t){let o=new Ot("card-paragraph-wrapper"),r=`${o.className()}`;return r+=` ${o.getModifierWithValueClassName("vertical-align",t)}`,r}_invalidateSideRenderer(){this.onSheduleRenderSignal.dispatch()}};var UM={},Is=class extends kr{constructor({cardData:t,sideData:o,sideType:r,onHyperlinkOverFn:n,readonlyMode:i,isLock:s,relatedData:a,flipCardsBlockKey:c,canDrag:l}){super({flipCardsBlockKey:c,cardData:t,sideData:o,sideType:r,onHyperlinkOverFn:n,readonlyMode:i,isLock:s,relatedData:a,canDrag:l}),this._sideWithImageHelper=new Bi({readonlyMode:i,cardKey:t.key,sideType:r,contentType:"imageWithText"}),this._sideWithTextHelper=new bi({readonlyMode:i,onHyperlinkOverFn:n,sideType:r,contentType:"imageWithText",cardKey:this._cardData.key,flipCardsBlockKey:c,isLock:s}),this._addSignal(this._sideWithTextHelper.onSheduleRenderSignal,()=>this._sheduleRender())}onUploadImageSignal(){return this._sideWithImageHelper.onUploadImageSignal}onCropImageSignal(){return this._sideWithImageHelper.onCropImageSignal}onRemoveImageSignal(){return this._sideWithImageHelper.onRemoveImageSignal}onFileDialogOpenSignal(){return this._sideWithImageHelper.onFileDialogOpenSignal}setImageBlobData(t){this._sideWithImageHelper.setImageBlobData(t),this._sheduleRender()}setSideData(t){this._sideWithImageHelper.setImageBlobData(null),super.setSideData(t)}setLockMode(t){this._sideWithTextHelper.setLockMode(t),super.setLockMode(t)}_getFlipHintBackgroundData(){return this._sideWithTextHelper.getControlBackgroundData(this._sideData.background)}_getDndControlBackgroundData(){return Rs(this._sideData.image)}_onConnected(){let t=this.domElement();this._sideWithTextHelper.onConnected(t)}_onDisconnected(){this._sideWithTextHelper.onDisconnected()}_renderCardContent(){let t=this._sideData.text;return J(UM,`:flip-card-side-content-${this._cardData.key}-${this._sideType}-${this._sideData.type}`)`
<div
	class='image-with-text-side-content'
	save-ref=${this._sideWithTextHelper.cardRef()}
	onconnected=${this._onConnected.bind(this)}
	ondisconnected=${this._onDisconnected.bind(this)}
>
	<div class='image-wrapper'>
		${this._sideWithImageHelper.renderImageContent(this._sideData.image,this._renderFunctionEx(`:flip-card-side-content-image-${this._cardData.key}-${this._sideType}-${this._sideData.type}`))}
	</div>
	<div
		class='text-wrapper'
		style=${this._sideWithTextHelper.getBackgroundStyles(this._sideData.background)}
	>
		${this._sideWithTextHelper.renderParagraphWrapper(t,this._sideData.verticalTextAlign,this._sideData.background,this._sideWithTextHelper.getParagraphStyles(this._sideData))}
	</div>
</div>
		`}};var WM={},vm=class extends oe{constructor(t,o,r){super({blockName:"text-side-background-image"}),this._cardKey=t,this._sideType=o,this._backgroundImageBlobData=null,this._imageBackground=r.type==="image"?r:null}setBackgroundImageBlobData(t){this._backgroundImageBlobData=t,this._sheduleRender()}setBackgroundImageData(t){this._imageBackground=t,this._sheduleRender()}hasImageOnBackground(){return!!this._imageBackground||!!this._backgroundImageBlobData}_getBackgroundImageOverlayStyles(){var s;let t=(s=this._imageBackground)==null?void 0:s.overlay;if(!t||t.color===pt)return null;let[o,r,n]=pe(t.color),i=t.opacity;return`background: rgba(${o}, ${r}, ${n}, ${i})`}_renderBlobBackgroundImage(){if(!this._backgroundImageBlobData)return null;let t={image:this._backgroundImageBlobData,imageRatio:{ratioX:nn.text.ratioX,ratioY:nn.text.ratioY},isTemporary:!0};return Pe(sn)(t)}_renderBackgroundImage(){if(this._backgroundImageBlobData)return this._renderBlobBackgroundImage();if(!this._imageBackground)return null;let t={image:this._imageBackground.image,imageRatio:{ratioX:nn.text.ratioX,ratioY:nn.text.ratioY}};return Pe(sn)(t,this._renderFunctionEx(`:flip-card-side-image-${this._cardKey}-${this._sideType}`))}_render(){return J(WM,`:flip-card-side-background-image-${this._cardKey}-${this._sideType}`)`
<div class="text-side-background-image">
	${this._renderBackgroundImage()}
	<div
		class="text-side-background-image-overlay"
		style=${this._getBackgroundImageOverlayStyles()}
	>
	</div>
</div>
		`}};var qM={},As=class extends kr{constructor({cardData:t,sideData:o,sideType:r,onHyperlinkOverFn:n,readonlyMode:i,relatedData:s,flipCardsBlockKey:a,isLock:c,canDrag:l}){super({flipCardsBlockKey:a,cardData:t,sideData:o,sideType:r,onHyperlinkOverFn:n,readonlyMode:i,relatedData:s,isLock:c,canDrag:l}),this._backgroundImage=new vm(t.key,r,o.background),this._sideWithTextHelper=new bi({readonlyMode:i,onHyperlinkOverFn:n,sideType:r,contentType:"text",cardKey:this._cardData.key,flipCardsBlockKey:a,isLock:c}),this._addSignal(this._sideWithTextHelper.onSheduleRenderSignal,()=>this._sheduleRender())}_getFlipHintBackgroundData(){return this._sideWithTextHelper.getControlBackgroundData(this._sideData.background)}_getDndControlBackgroundData(){return this._sideWithTextHelper.getControlBackgroundData(this._sideData.background)}setLockMode(t){this._sideWithTextHelper.setLockMode(t),super.setLockMode(t)}setBackgroundImageBlobData(t){this._backgroundImage.setBackgroundImageBlobData(t),this._sheduleRender()}setSideData(t){t.background.type==="image"?this._backgroundImage.setBackgroundImageData(t.background):this._backgroundImage.setBackgroundImageData(null),this._backgroundImage.setBackgroundImageBlobData(null),super.setSideData(t)}_getBackgroundStyles(){let t=this._sideData.background;if(t.type!=="color"||this._backgroundImage.hasImageOnBackground()||t.color===pt)return null;let[r,n,i]=pe(t.color),s=t.opacity;return`background: rgba(${r}, ${n}, ${i}, ${s})`}_onConnected(){let t=this.domElement();this._sideWithTextHelper.onConnected(t)}_onDisconnected(){this._sideWithTextHelper.onDisconnected()}_renderCardContent(){let t=this._sideData.text;return J(qM,`:flip-card-side-content-${this._cardData.key}-${this._sideType}-${this._sideData.type}`)`
<div
	class='text-side-content'
	save-ref=${this._sideWithTextHelper.cardRef()}
	onconnected=${this._onConnected.bind(this)}
	ondisconnected=${this._onDisconnected.bind(this)}
	style=${this._getBackgroundStyles()}
>
	${this._backgroundImage.domElement()}
	${this._sideWithTextHelper.renderParagraphWrapper(t,this._sideData.verticalTextAlign,this._sideData.background,this._sideWithTextHelper.getParagraphStyles(this._sideData))}
</div>
		`}};var Yx=12,GM={},$o=new WeakMap,Tm=class extends oe{constructor({flipCardsBlockKey:t,cardData:o,onHyperlinkOverFn:r,canDrag:n,readonlyMode:i,isLock:s,relatedData:a}){super({blockName:"flip-card",relatedData:a}),this._flipCardsBlockKey=t,this._cardData=o,this._readonlyMode=i,this._isLock=s,this._canDrag=n,this._onHyperlinkOverFn=r,this._activeSideType="front",this.onClickSignal=this._createSignal(),this.onMouseEnterSignal=this._createSignal(),this.onMouseLeaveSignal=this._createSignal(),this.onUploadImageSignal=this._createSignal(),this.onCropImageSignal=this._createSignal(),this.onRemoveImageSignal=this._createSignal(),this.onFileDialogOpenSignal=this._createSignal(),this._frontSideRenderer=this._getSideRenderer("front"),this._backSideRenderer=this._getSideRenderer("back"),this.updateModifier("active-side",this._activeSideType),this.updateModifier("readonly",this._readonlyMode)}key(){return this._cardData.key}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._frontSideRenderer.setLockMode(t),this._backSideRenderer.setLockMode(t))}setCardData(t){t!==this._cardData&&(this._cardData=t,this._invalidateSidesRenderer(),this._sheduleRender())}setCanDrag(t){t!==this._canDrag&&(this._canDrag=t,this._invalidateSidesRenderer(),this._sheduleRender())}activeSide(){return this._activeSideType}setActiveSide(t){this._activeSideType!==t&&(this._activeSideType=t,this.updateModifier("active-side",t))}setImageBlobOnActiveSide(t){let o=this._getActiveSideRenderer();(o instanceof Ms||o instanceof Is)&&o.setImageBlobData(t)}setBackgroundImageBlobOnActiveSide(t){let o=this._getActiveSideRenderer();o instanceof As&&o.setBackgroundImageBlobData(t)}_getActiveSideRenderer(){return H(this._activeSideType,{front:this._frontSideRenderer,back:this._backSideRenderer})}_invalidateSidesRenderer(){this._frontSideRenderer=this._getSideRenderer("front"),this._backSideRenderer=this._getSideRenderer("back")}_addSideRendererClassname(t,o){let r=H(o,{front:"front-side",back:"back-side"});t.addBemInfo(r)}_createImageSideRenderer(t,o){let r=Si(`FlipCardSideRenderer-${this._cardData.key}-${t}-${o.type}`);if($o.has(r)){let i=d($o.get(r));return i.setSideData(o),i.setCanDrag(this._canDrag),i}let n=new Ms({flipCardsBlockKey:this._flipCardsBlockKey,cardData:this._cardData,sideType:t,sideData:o,isLock:this._isLock,readonlyMode:this._readonlyMode,onHyperlinkOverFn:this._onHyperlinkOverFn,relatedData:r,canDrag:this._canDrag});return this._addSideRendererClassname(n,t),$o.set(r,n),this._readonlyMode||this._invalidateImageChangeDispatcher(n),n}_createTextSideRenderer(t,o){let r=Si(`FlipCardSideRenderer-${this._cardData.key}-${t}-text`);if($o.has(r)){let i=d($o.get(r));return i.setSideData(o),i.setCanDrag(this._canDrag),i}let n=new As({flipCardsBlockKey:this._flipCardsBlockKey,cardData:this._cardData,sideType:t,sideData:o,readonlyMode:this._readonlyMode,isLock:this._isLock,onHyperlinkOverFn:this._onHyperlinkOverFn,relatedData:r,canDrag:this._canDrag});return this._addSideRendererClassname(n,t),$o.set(r,n),n}_createImageWithTextSideRenderer(t,o){let r=Si(`FlipCardSideRenderer-${this._cardData.key}-${t}-${o.type}`);if($o.has(r)){let i=d($o.get(r));return i.setSideData(o),i.setCanDrag(this._canDrag),i}let n=new Is({flipCardsBlockKey:this._flipCardsBlockKey,cardData:this._cardData,sideType:t,sideData:o,readonlyMode:this._readonlyMode,isLock:this._isLock,onHyperlinkOverFn:this._onHyperlinkOverFn,relatedData:r,canDrag:this._canDrag});return this._addSideRendererClassname(n,t),$o.set(r,n),this._readonlyMode||this._invalidateImageChangeDispatcher(n),n}_getSideRenderer(t){let o=this._getCardSideData(t);return H(o.type,{image:()=>this._createImageSideRenderer(t,o),text:()=>this._createTextSideRenderer(t,o),imageWithText:()=>this._createImageWithTextSideRenderer(t,o)})()}_getCardSideData(t){return H(t,{front:this._cardData.frontSide,back:this._cardData.backSide})}_invalidateImageChangeDispatcher(t){this._addSignal(t.onUploadImageSignal(),this.onUploadImageSignal.toFn()),this._addSignal(t.onFileDialogOpenSignal(),this.onFileDialogOpenSignal.toFn()),this._addSignal(t.onCropImageSignal(),this.onCropImageSignal.toFn()),this._addSignal(t.onRemoveImageSignal(),this.onRemoveImageSignal.toFn())}_onCardClick(t){let o=t.target&&this._checkClickAtLink(t.target);!t.defaultPrevented&&!o&&this.onClickSignal.dispatch(this._cardData.key)}_checkClickAtLink(t){return d(t.parentElement).tagName===Po.A}_onMouseEnter(){this.onMouseEnterSignal.dispatch(this._cardData.key)}_onMouseLeave(){this.onMouseLeaveSignal.dispatch(this._cardData.key)}_render(){let t=this._cardData;return J(GM,`:flip-card-${t.key}`)`
<div
	class=${this._getCssClasses()}
	onclick=${this._onCardClick.bind(this)}
	onmouseenter=${this._onMouseEnter.bind(this)}
	onmouseleave=${this._onMouseLeave.bind(this)}
	data-card-key=${t.key}
>
	<div class='card-flip-container'>
		${this._frontSideRenderer.domElement()}
		${this._backSideRenderer.domElement()}
	</div>
</div>`}};var Lp={},jx=180,YM=468,jM=.93,XM=599,ZM="rgba(41, 133, 224, 0.5)";var JM={inner:{defaultScreen:{gap:24,horizontalPadding:0},smallScreen:{gap:20,horizontalPadding:0}},outer:{defaultScreen:{gap:24,horizontalPadding:56},smallScreen:{gap:20,horizontalPadding:20}},"full-width":{defaultScreen:{gap:24,horizontalPadding:56},smallScreen:{gap:20,horizontalPadding:20}}},$p=new WeakMap,wm=class extends oe{constructor({block:t,readonlyMode:o,isLock:r,onHyperlinkOverFn:n,direction:i}){super({blockName:"flip-cards-list",direction:i}),this._block=t,this._readonlyMode=o,this._isLock=r,this._onHyperlinkOverFn=n,this._activeSide="front",this._cardsRenderers=[],this._resizeObserver=new ResizeObserver(()=>this._invalidateCardsGrid()),this.onUploadCardImageSignal=this._createSignal(),this.onFileDialogOpenSignal=this._createSignal(),this.onPasteFromBufferCardImageSignal=this._createSignal(),this.onAddExternalCardImageSignal=this._createSignal(),this.onCropCardImageSignal=this._createSignal(),this.onRemoveCardImageSignal=this._createSignal(),this.onCardClickSignal=this._createSignal(),this.onCardMouseEnterSignal=this._createSignal(),this.onCardMouseLeaveSignal=this._createSignal(),this.onSelectBlockSignal=this._createSignal(),this._showAddingAnimation=!1,this._transitionStart=!1,this._insertionPointInfo=null,this._placeholderRef={current:null},this._contentWidthChangedSignal=this._createSignal(),this._cardsInRowCount=this._block.maxCardsInRow,this._invalidateCardsRenderers(),sg(t.key,this._activeSide)}setBlock(t){var o,r,n,i;this._block!==t&&(((o=this._block.designSettings)==null?void 0:o.background)!==((r=t.designSettings)==null?void 0:r.background)&&this._invalidateInsertionPointColor((i=(n=t.designSettings)==null?void 0:n.background)==null?void 0:i.color),this._block=t,this._invalidateCardsRenderers(),this._invalidateCardsGrid(),this._sheduleRender())}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._cardsRenderers.forEach(o=>o.setLockMode(t)))}getCardRendererByKey(t){return this._cardsRenderers.find(o=>o.key()===t)||null}setCardsActiveSide(t){this._activeSide=t,this._cardsRenderers.forEach(o=>o.setActiveSide(t))}insertionPointInfo(){return this._insertionPointInfo}clearInsertionPointInfo(){this._insertionPointInfo&&(this._insertionPointInfo=null,this._resetCardsShift(),this._sheduleRender())}setInsertionPointInfo(t){(!this._insertionPointInfo||!cn(this._insertionPointInfo,t))&&(this._insertionPointInfo=t,this._updateCardsShiftByInsertionPoint(),this._sheduleRender())}setAddingAnimationShow(t){this._showAddingAnimation!==t&&(this._showAddingAnimation=t,this._invalidatePlaceholder(),this._invalidateCardsGrid())}contentWidthChangedSignal(){return this._contentWidthChangedSignal}_invalidatePlaceholder(){let t=this._placeholderRef.current;t&&(this._showAddingAnimation?this._showPlaceholderWithAnimation(t):this._playHideAddingAnimation(t))}_playShowAddingAnimation(t){tt(()=>{t.style.setProperty("transform","scale(1)")})}_invalidatePlaceholderVisibility(){tt(()=>{this._transitionStart||this._hidePlaceholder()})}_playHideAddingAnimation(t){getComputedStyle(t).display==="block"&&tt(()=>{t.style.setProperty("transform","scale(0)"),this._invalidatePlaceholderVisibility()})}_invalidateCardsRenderers(){let t=[];se(this._block.cardsBlockMap,o=>{let r=this._createFlipCard(o);t.push(r)}),this._cardsRenderers=t}_createFlipCard(t){let o=t.key,r=Zt(this._block.cardsBlockMap)>1,n=Si(`FlipCardRenderer${o}`);if($p.has(n)){let s=d($p.get(n));return s.setCardData(t),s.setCanDrag(r),s}let i=new Tm({flipCardsBlockKey:this._block.key,cardData:t,onHyperlinkOverFn:this._onHyperlinkOverFn,readonlyMode:this._readonlyMode,isLock:this._isLock,relatedData:n,canDrag:r});return i.setActiveSide(this._activeSide),$p.set(n,i),this._invalidateMouseEventDispatcher(i),this._readonlyMode||this._invalidateImageChangedDispatcher(i),i}_getGridParams(t){let{defaultScreen:o,smallScreen:r}=JM[this._block.cardsLayout];return t>XM?o:r}_invalidateCardsGrid(){let t=G.getFlipCardsCount(this._block);this._showAddingAnimation&&(t+=1);let o=Math.min(this._block.maxCardsInRow,t),r=this.domElement(),n=r.closest(`div[data-wrapper-key="${this._block.key}"]`),{gap:i,horizontalPadding:s}=this._getGridParams(n.offsetWidth),a=s*2,c=Math.floor((r.offsetWidth+i-a)/(jx+i)),l=Math.min(o,c);this._cardsInRowCount=l,r.style.setProperty("grid-template-columns",`repeat(${l}, minmax(${jx}px, ${YM}px))`),r.style.setProperty("padding-inline",`${s}px`),r.style.setProperty("gap",`${i}px`),tt(()=>this._invalidateContentWidthChanged())}_invalidateContentWidthChanged(){let t=this._getCardsContainerGap(),o=this._cardsInRowCount,r=Tn.getFirstCard(this._block),n=d(this.getCardRendererByKey(r.key)),i=o*n.domElement().offsetWidth+(o-1)*t;this._contentWidthChangedSignal.dispatch(this._insertionPointInfo?i+Yx*2:i)}_setCardsShift(t,o){t.forEach(r=>r&&r.updateModifier("shift",o))}_resetCardsShift(){this._setCardsShift(this._cardsRenderers,null),this._invalidateContentWidthChanged()}_updateCardsShiftByInsertionPoint(){if(this._resetCardsShift(),!this._insertionPointInfo)return;let{insertBefore:t,insertionElementKey:o}=this._insertionPointInfo,r=this._block.cardsBlockMap.order,n=r.indexOf(o),i=this._getCardIndexInRow(n),s=n-i,a=n+(this._cardsInRowCount-i),c=t?n:n+1,l=r.slice(s,c),m=r.slice(c,a),u=(p,S)=>{let b=p.map(this.getCardRendererByKey.bind(this));this._setCardsShift(b,S)};u(l,"left"),u(m,"right"),this._invalidateContentWidthChanged()}_invalidateMouseEventDispatcher(t){this._addSignal(t.onClickSignal,this.onCardClickSignal.toFn()),this._addSignal(t.onMouseEnterSignal,this.onCardMouseEnterSignal.toFn()),this._addSignal(t.onMouseLeaveSignal,this.onCardMouseLeaveSignal.toFn())}_invalidateImageChangedDispatcher(t){this._addSignal(t.onUploadImageSignal,this.onUploadCardImageSignal.toFn()),this._addSignal(t.onFileDialogOpenSignal,this.onFileDialogOpenSignal.toFn()),this._addSignal(t.onCropImageSignal,this.onCropCardImageSignal.toFn()),this._addSignal(t.onRemoveImageSignal,this.onRemoveCardImageSignal.toFn())}_onConnected(){var t,o;this._resizeObserver.observe(document.body),this._invalidateInsertionPointColor((o=(t=this._block.designSettings)==null?void 0:t.background)==null?void 0:o.color)}_onDisconnected(){this._resizeObserver.unobserve(document.body),this._showAddingAnimation=!1,this._hidePlaceholder()}_invalidatePlaceholderColor(){var n,i;let t=this._placeholderRef.current;if(!t)return;let o=s=>{let a=wt(),c=H(s,{dark:a.borderDefault,light:a.borderOncolorDefault});Te(t,"--placeholder-color",c)},r=(i=(n=this._block.designSettings)==null?void 0:n.background)==null?void 0:i.color;Lo({background:_i(r?{type:"color",...r}:null),lightnessLimitValue:jM,setStyle:o})}_invalidateInsertionPointColor(t){if(!this._wasRendered())return;let o=this.domElement(),r=n=>{let i=wt(),s=H(n,{dark:ZM,light:i.iconOncolorDefault});Te(o,"--insertion-target-color",s)};Lo({background:_i(t?{type:"color",...t}:null),setStyle:r})}_showPlaceholderWithAnimation(t){this._invalidatePlaceholderColor(),t.style.setProperty("display","block"),this._playShowAddingAnimation(t)}_hidePlaceholder(){let t=this._placeholderRef.current;t&&t.style.setProperty("display","none")}_onPlaceholderTransitionEnd(){this._transitionStart=!1,this._showAddingAnimation||this._hidePlaceholder()}_onMousedown(t){t.target===this.domElement()&&(t.preventDefault(),this.onSelectBlockSignal.dispatch())}_getInsertionPointStyles(){var S;let t={};if(!this._insertionPointInfo)return t;let{insertBefore:o,insertionElementKey:r}=this._insertionPointInfo,n=(S=this.getCardRendererByKey(r))==null?void 0:S.domElement();if(!n)return t;let i=n.offsetHeight,s=n.offsetWidth,a=n.offsetTop,c=n.offsetLeft;t.height=`${i}px`,t.top=`${a}px`;let l=this._getCardsContainerGap(),m=parseFloat(d(window.getComputedStyle(n).marginInlineStart)),u=l/2,p=c-m;return this._direction==="rtl"&&(p=this.domElement().offsetWidth-c-s-m),o?t["inset-inline-start"]=`${p-u}px`:t["inset-inline-start"]=`${p+s+u}px`,t}_getCardIndexInRow(t){return t%this._cardsInRowCount}_getCardsContainerGap(){let t=this.domElement(),o=d(window.getComputedStyle(t));return o.gap?parseFloat(o.gap):0}_renderInsertionPoint(){return!this._wasRendered()||!this._insertionPointInfo?null:J(Lp,`:insertion-point-${this._block.key}`)`
<div
	class="insertion-target"
	style=${this._getInsertionPointStyles()}
>
</div>
		`}_renderNewCardPlaceholder(){return J(Lp,`:new-card-placeholder-${this._block.key}`)`
<div
	class="new-card-placeholder"
	style="display: none"
	save-ref=${this._placeholderRef}
	ontransitionstart=${()=>{this._transitionStart=!0}}
	ontransitionend=${this._onPlaceholderTransitionEnd.bind(this)}
></div>`}_render(){let t=this._block;return J(Lp,`:flip-cards-list-${t.key}`)`
			<div
				class=${this._getCssClasses()}
				onconnected=${this._onConnected.bind(this)}
				ondisconnected=${this._onDisconnected.bind(this)}
				onmousedown=${this._onMousedown.bind(this)}
			>
				${this._cardsRenderers.map(o=>o.domElement())}
				${this._renderNewCardPlaceholder()}
				${this._renderInsertionPoint()}
			</div>`}};var Dm=class extends oe{constructor({block:t,onHyperlinkOverFn:o,readonlyMode:r,isLock:n,direction:i}){super({blockName:"flip-cards-block",direction:i}),this._block=t,this._cardsListRenderer=new wm({block:t,onHyperlinkOverFn:o,readonlyMode:r,isLock:n,direction:i}),this.cardsCountChangedSignal=this._createSignal(),this.cardsLayoutChangedSignal=this._createSignal(),this.maxCardsInRowChangedSignal=this._createSignal(),this._invalidateModifiers()}setDirection(t){this._cardsListRenderer.setDirection(t),super.setDirection(t)}setBlock(t){this._block!==t&&(Zt(t.cardsBlockMap)!==Zt(this._block.cardsBlockMap)&&this.cardsCountChangedSignal.dispatch(),t.cardsLayout!==this._block.cardsLayout&&this.cardsLayoutChangedSignal.dispatch(),t.maxCardsInRow!==this._block.maxCardsInRow&&this.maxCardsInRowChangedSignal.dispatch(),this._block=t,this._invalidateModifiers(),this._cardsListRenderer.setBlock(t),this._sheduleRender())}_invalidateModifiers(){this.updateModifier("align",this._block.cardsLayout)}};var Np={},eI={},zp=class extends Dm{constructor({block:t,onHyperlinkOverFn:o,direction:r}){super({block:t,onHyperlinkOverFn:o,readonlyMode:!0,isLock:!1,direction:r}),this._addSignal(this._cardsListRenderer.onCardClickSignal,n=>{let i=Vx();if(i&&i.startOffset!==i.endOffset)return;let s=this._cardsListRenderer.getCardRendererByKey(n);if(s){let a=s.activeSide()==="front"?"back":"front";s.setActiveSide(a)}})}_render(){let t=this._block;return J(eI,`:flip-cards-block-${t.key}`)`
<figure
	class=${this._getCssClasses()}
	contenteditable="false"
	draggable="false"
>
	${this._cardsListRenderer.domElement()}
</figure>`}};function Xx({block:e,blockBeforeType:t,blockAfterType:o,onHyperlinkOverFn:r,direction:n=ot()}){let i;return Np[e.key]?(i=Np[e.key],i.setBlock(e),i.setDirection(n)):(i=new _r({block:e,blockBeforeType:t,blockAfterType:o,direction:n,blockRenderer:new zp({block:e,onHyperlinkOverFn:r,direction:n})}),Np[e.key]=i),i}var vi=class e{static _getAllTablesFromSelection(t,o){return ln(K.getAllBlocksFromSelection(t,o).map(r=>E.toTableBlock(r)))}static _changeCellColor(t,o,r){let n={name:"backgroundColor",color:o};if(E.addCellMeta(t,n),o!==pt){let i={name:"backgroundOpacity",opacity:r};E.addCellMeta(t,i)}}static _applyForEachCell(t,o){for(let r of t.rowsOrder)for(let n of t.colsOrder){let i=E.getCell(t,r,n);o(i)}}static _applyForEachRowCell(t,o,r){t.colsOrder.forEach(n=>{let i=E.getCell(t,o,n);r(i)})}static _applyForEachColumnCell(t,o,r){t.rowsOrder.forEach(n=>{let i=E.getCell(t,n,o);r(i)})}static _getCellParagraphStyles(t,o,r){let n=E.getCell(t,o,r),i=q(n.content);if(!(i!=null&&i.characters.length)){let s=Ue(n.meta,"charactersMeta");return(s==null?void 0:s.name)==="charactersMeta"?s.data.style:[]}return i.characters[0].meta.style}static _getCellTextAlignment(t,o,r){let n=E.getCell(t,o,r),i=d(q(n.content));return{vertical:n.verticalTextAlign,horizontal:i.textAlign}}static _getCellKey(t,o,r){return E.getCell(t,o,r).key}static getFirstRowKey(t){return t.rowsOrder[0]}static getLastRowKey(t){return t.rowsOrder[t.rowsOrder.length-1]}static getPreviousRowKey(t,o){let r=t.rowsOrder.indexOf(o);return r===0?null:t.rowsOrder[r-1]}static getNextRowKey(t,o){let r=t.rowsOrder.indexOf(o);return r===t.rowsOrder.length-1?null:t.rowsOrder[r+1]}static getFirstColumnKey(t){return t.colsOrder[0]}static getLastColumnKey(t){return t.colsOrder[t.colsOrder.length-1]}static getPreviousColumnKey(t,o){let r=t.colsOrder.indexOf(o);return r===0?null:t.colsOrder[r-1]}static getNextColumnKey(t,o){let r=t.colsOrder.indexOf(o);return r===t.colsOrder.length-1?null:t.colsOrder[r+1]}static getCellTextLength(t,o,r){let n=E.getCell(t,o,r);return xm(n.content)}static getCellBelow(t,o,r){let n=e.getNextRowKey(t,o);return n?E.getCell(t,n,r):null}static getCellAbove(t,o,r){let n=e.getPreviousRowKey(t,o);return n?E.getCell(t,n,r):null}static getTableTextStyles(t){let o=e.getFirstRowKey(t),r=e.getFirstColumnKey(t);return e._getCellParagraphStyles(t,o,r)}static getTableTextAlignment(t){let o=e.getFirstRowKey(t),r=e.getFirstColumnKey(t);return e._getCellTextAlignment(t,o,r)}static getTableRowTextAlignment(t,o){let r=e.getFirstColumnKey(t);return e._getCellTextAlignment(t,o,r)}static getTableRowTextStyles(t,o){let r=e.getFirstColumnKey(t);return e._getCellParagraphStyles(t,o,r)}static getTableColumnTextAlignment(t,o){let r=e.getFirstRowKey(t);return e._getCellTextAlignment(t,r,o)}static getTableColumnTextStyles(t,o){let r=e.getFirstRowKey(t);return e._getCellParagraphStyles(t,r,o)}static updateTableAlign(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o]));return n.alignment=r,{selection:D.createTableBlockSelection(o)}}static addLastTableRow(t,o){let r=d(E.toTableBlock(t.blockMap.blocks[o]));return E.addLastRow(r),{selection:D.createTableBlockSelection(o)}}static addTableRowBefore(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=E.addRowBefore(n,r),s=e.getFirstColumnKey(n),a=e._getCellKey(n,i,s);return{selection:{...D.createTableBlockSelection(o),customSelection:Ge.createCellSelection({rowKey:i,colKey:s,cellKey:a})}}}static addTableRowAfter(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=E.addRowAfter(n,r),s=e.getFirstColumnKey(n),a=e._getCellKey(n,i,s);return{selection:{...D.createTableBlockSelection(o),customSelection:Ge.createCellSelection({rowKey:i,colKey:s,cellKey:a})}}}static removeTableRow(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=e.getNextRowKey(n,r);return E.removeRow(n,r),n.rowsOrder.length?(i||(i=e.getLastRowKey(n)),{selection:D.createTableRowSelection(o,i)}):(vo(t.blockMap,o),{selection:null})}static addLastTableColumn(t,o){let r=d(E.toTableBlock(t.blockMap.blocks[o]));return E.addLastColumn(r),{selection:D.createTableBlockSelection(o)}}static addTableColumnBefore(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=E.addColumnBefore(n,r),s=e.getFirstRowKey(n),a=e._getCellKey(n,s,i);return{selection:{...D.createTableBlockSelection(o),customSelection:Ge.createCellSelection({rowKey:s,colKey:i,cellKey:a})}}}static addTableColumnAfter(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=E.addColumnAfter(n,r),s=e.getFirstRowKey(n),a=e._getCellKey(n,s,i);return{selection:{...D.createTableBlockSelection(o),customSelection:Ge.createCellSelection({rowKey:s,colKey:i,cellKey:a})}}}static moveRowUp(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o]));return E.moveRowUp(n,r),{selection:D.createTableRowSelection(o,r)}}static moveRowDown(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o]));return E.moveRowDown(n,r),{selection:D.createTableRowSelection(o,r)}}static moveColumnLeft(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o]));return E.moveColumnLeft(n,r),{selection:D.createTableColumnSelection(o,r)}}static moveColumnRight(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o]));return E.moveColumnRight(n,r),{selection:D.createTableColumnSelection(o,r)}}static pinHeaderColumn(t,o){let r=d(E.toTableBlock(t.blockMap.blocks[o]));return E.addTableMeta(r,{name:"isHeaderColumnPinned"}),{selection:D.createTableColumnSelection(o,e.getFirstColumnKey(r))}}static unpinHeaderColumn(t,o){let r=d(E.toTableBlock(t.blockMap.blocks[o]));return E.removeTableMeta(r,"isHeaderColumnPinned"),{selection:D.createTableColumnSelection(o,e.getFirstColumnKey(r))}}static changeTableRowColor(t,o,r,{color:n,opacity:i}){let s=d(E.toTableBlock(t.blockMap.blocks[o]));return e._applyForEachRowCell(s,r,a=>{e._changeCellColor(a,n,i)}),{selection:{...D.createTableBlockSelection(o),customSelection:Ge.createRowSelection({rowKey:r})}}}static changeTableColumnColor(t,o,r,{color:n,opacity:i}){let s=d(E.toTableBlock(t.blockMap.blocks[o]));return e._applyForEachColumnCell(s,r,a=>{e._changeCellColor(a,n,i)}),{selection:{...D.createTableBlockSelection(o),customSelection:Ge.createColumnSelection({columnKey:r})}}}static duplicateColumn(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=E.duplicateColumn(n,r);return{selection:D.createTableColumnSelection(o,i)}}static duplicateRow(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=E.duplicateRow(n,r);return{selection:D.createTableRowSelection(o,i)}}static removeTableColumn(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o])),i=e.getNextColumnKey(n,r);return E.removeColumn(n,r),n.colsOrder.length?(i||(i=e.getLastColumnKey(n)),{selection:D.createTableColumnSelection(o,i)}):(vo(t.blockMap,o),{selection:null})}static changeTableColor(t,o,{color:r,opacity:n}){return e._getAllTablesFromSelection(t,o).forEach(i=>e._applyForEachCell(i,s=>e._changeCellColor(s,r,n))),{selection:o}}static changeTableTextVerticalAlign(t,o,r){return e._getAllTablesFromSelection(t,o).forEach(n=>e._applyForEachCell(n,i=>E.setCellVerticalAlign(i,r))),{selection:o}}static changeTableRowTextVerticalAlign(t,o,r,n){let i=d(E.toTableBlock(t.blockMap.blocks[o]));return e._applyForEachRowCell(i,r,s=>E.setCellVerticalAlign(s,n)),{selection:D.createTableRowSelection(o,r)}}static changeTableCellTextVerticalAlign(t,o,r){let{startKey:n}=o,{rowKey:i,colKey:s}=o.customSelection,a=d(E.toTableBlock(t.blockMap.blocks[n])),c=E.getCell(a,i,s);return E.setCellVerticalAlign(c,r),{selection:o}}static changeTableColumnTextVerticalAlign(t,o,r,n){let i=d(E.toTableBlock(t.blockMap.blocks[o]));return e._applyForEachColumnCell(i,r,s=>E.setCellVerticalAlign(s,n)),{selection:D.createTableColumnSelection(o,r)}}static changeTableTextHorizontalAlign(t,o,r){let n=d(E.toTableBlock(t.blockMap.blocks[o]));return e._applyForEachCell(n,i=>E.setCellHorizontalAlign(i,r)),{selection:D.createTableBlockSelection(o)}}static changeTableRowTextHorizontalAlign(t,o,r,n){let i=d(E.toTableBlock(t.blockMap.blocks[o]));return e._applyForEachRowCell(i,r,s=>E.setCellHorizontalAlign(s,n)),{selection:D.createTableRowSelection(o,r)}}static changeTableColumnTextHorizontalAlign(t,o,r,n){let i=d(E.toTableBlock(t.blockMap.blocks[o]));return e._applyForEachColumnCell(i,r,s=>E.setCellHorizontalAlign(s,n)),{selection:D.createTableColumnSelection(o,r)}}};function Zx(e){let t=Ue(e.meta,"charactersMeta");return t&&t.name==="charactersMeta"?t.data:null}function tI(e,t){return Ue(e.meta,t)}function Jx(e){let t=tI(e,"isHeaderColumnPinned");return!!t&&t.name==="isHeaderColumnPinned"}function Em(e){return e<=27?"1.5":e<=31?"1.35":e<=56?"1.25":"normal"}var Rm=class extends Co{getLineHeightForFontSize(t){return Em(t)}};var oI="table",Qp={},Mm=class extends oe{constructor({block:t,isLock:o,onHyperlinkOverFn:r,readonlyMode:n,direction:i}){super({blockName:oI,direction:i}),this._block=t,this._readonlyMode=n,this._isLock=o,this._direction=i,this._onHyperlinkOverFn=r,this._onCellFocusSignal=this._createSignal(),this._onCellBlurSignal=this._createSignal(),this._onCellMouseOver=this._createSignal(),this._onCellMouseOut=this._createSignal(),this._invalidateModifiers()}onCellKeyDown(){return this._getBrowserEventSignal(ee.KEY_DOWN)}onCellBlurSignal(){return this._onCellBlurSignal}onCellFocusSignal(){return this._onCellFocusSignal}onCellMouseOver(){return this._onCellMouseOver}onCellMouseOut(){return this._onCellMouseOut}setBlock(t){this._block!==t&&(this._block=t,this._invalidateModifiers(),this._sheduleRender())}setLockMode(t){this._isLock!==t&&(this._isLock=t,this._sheduleRender())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._invalidateModifiers())}getCellElement(t){return this.domElement().querySelector(`[data-cell-key='${t}']`)}getLeftCellFromRow(t){let o=this._direction==="rtl"?vi.getLastColumnKey(this._block):vi.getFirstColumnKey(this._block);return d(E.getCell(this._block,t,o)).key}getFirstCellFromColumn(t){let o=vi.getFirstRowKey(this._block);return d(E.getCell(this._block,o,t)).key}_invalidateModifiers(){this.updateModifier("pin-header-column",Jx(this._block)),this.updateModifier("dir",this._direction)}_renderParagraph(t,o={}){let r=q(t);if(!r)throw new Error;let n=pr(new Rm({paragraph:r,idPrefix:"cell-paragraph"}),this._onHyperlinkOverFn,this._readonlyMode,this._isLock);return n.classList.add("cell-paragraph"),rt(n,o),n}_getCellStyles(t){let o="",r="",n=1;if(t.forEach(i=>{switch(i.name){case"backgroundColor":r=i.color;break;case"backgroundOpacity":n=i.opacity;break;case"charactersMeta":break;default:throw I(i),new Error(`unknown meta ${i}`)}}),r){let i=pe(st.whiteDefault),s=[...pe(r),n],[a,c,l]=pn(i,s);o+=`background-color: rgb(${a}, ${c}, ${l});`}return o}_getCellContentClasses(t){let o=new Ot("table-cell-content"),r=`${o.className()}`;return r+=` ${o.getModifierWithValueClassName("vertical-align",t)}`,r}_getParagraphStyles(t){return Bm(d(q(t.content)),Zx(t),Em)}_renderCell(t,o){let r=this._block.rowsMap[t].colsMap[o],n=()=>{this._onCellFocusSignal.dispatch(r.key)},i=()=>{this._onCellBlurSignal.dispatch(r.key)},s=()=>{this._onCellMouseOver.dispatch({cellKey:r.key,rowKey:t,colKey:o})},a=()=>{this._onCellMouseOut.dispatch({cellKey:r.key,rowKey:t,colKey:o})},c=this._getCellStyles(r.meta),l=this._getParagraphStyles(r),m=this._getCellContentClasses(r.verticalTextAlign);return J(Qp,`:cell-${this._block.key}-${t}-${o}-${r.key}`)`
<td
	style=${c}
	data-table-key=${this._block.key}
	data-cell-key=${r.key}
	data-row-key=${t}
	data-col-key=${o}
	contenteditable=${!this._readonlyMode&&!this._isLock}
	class="table-cell"
	onmouseover=${s}
	onmouseout=${a}
	onfocus=${n}
	onblur=${i}
	onkeydown=${this}
>
	<div
		contenteditable=${!this._readonlyMode&&!this._isLock}
		class=${m}
	>
		${this._renderParagraph(r.content,l)}
	</div>
</td>`}_renderRow(t){return J(Qp,`:row-${this._block.key}-${t}`)`
<tr
	contenteditable="false"
	class='table-row'
	data-row-key=${t}
>
	${this._block.colsOrder.map(o=>this._renderCell(t,o))}
</tr>`}_render(){return J(Qp,`:table-block-${this._block.key}`)`
<table
	contenteditable="false"
	class="${this._getCssClasses()}"
>
	${this._block.rowsOrder.map(t=>this._renderRow(t))}
</table>`}};var Im=class extends oe{constructor({tableBlock:t,tableRenderer:o,direction:r}){super({blockName:"table-scroll-container",direction:r}),this._tableBlock=t,this._tableRenderer=o,this._scrollSignal=this._createSignal()}setBlock(t){this._tableBlock!==t&&(this._tableBlock=t)}scrollSignal(){return this._scrollSignal}scrollLeft(){return this.domElement().scrollLeft}calculateCellBounds(t){if(!this._wasRendered())return null;let o=this._tableRenderer.getCellElement(t);if(!o)return null;let r=o.getBoundingClientRect(),n=this.domElement(),i=n.getBoundingClientRect();return{width:r.width,height:r.height,left:r.left-i.left+n.scrollLeft,top:r.top-i.top}}_onTableScroll(){this._scrollSignal.dispatch()}};var rI="table-shadow-container",nI={},Am=class extends oe{constructor({tableBlock:t,tableRenderer:o,tableScrollContainer:r,direction:n}){super({blockName:rI,direction:n}),this._tableBlock=t,this._tableScrollContainer=r,new ResizeObserver(()=>this._invalidateModifiers()).observe(o.domElement()),new ResizeObserver(()=>this._invalidateModifiers()).observe(this._tableScrollContainer.domElement()),this._addSignal(this._tableScrollContainer.scrollSignal(),()=>this._invalidateModifiers())}setDirection(t){this._direction!==t&&(super.setDirection(t),this._invalidateModifiers())}_invalidateModifiers(){let t=this._tableScrollContainer.domElement(),o=this._direction==="rtl"?Math.abs(Math.ceil(t.scrollLeft)):Math.ceil(t.scrollLeft),r=Math.ceil(t.scrollWidth-t.clientWidth);this.updateModifier("left-shadow",o>0),this.updateModifier("right-shadow",o<r)}_render(){return J(nI,`:table-block-shadow-${this._tableBlock.key}`)`
			<div class=${this._getCssClasses()}></div>
		`}};var Hp={},iI="table-block",e2={},Up=class extends Im{constructor({tableBlock:t,tableRenderer:o}){super({tableBlock:t,tableRenderer:o})}_render(){let t=this._tableBlock;return J(e2,`:table-block-scroll-container-${t.key}`)`
		<div
			class="${this._getCssClasses()}"
			contenteditable="false"
			onscroll=${()=>this._onTableScroll()}
		>
			${this._tableRenderer.domElement()}
		</div>`}},Wp=class extends oe{constructor({block:t,onHyperlinkOverFn:o,direction:r=ot()}){super({blockName:iI}),this._direction=r,this.updateModifier("dir",this._direction),this._block=t,this._tableRenderer=new Mm({block:t,onHyperlinkOverFn:o,readonlyMode:!0,isLock:!1,direction:this._direction}),this._tableScrollContainer=new Up({tableRenderer:this._tableRenderer,tableBlock:this._block}),this._tableShadowContainer=new Am({tableBlock:this._block,tableRenderer:this._tableRenderer,tableScrollContainer:this._tableScrollContainer,direction:this._direction}),this._invalidateModifiers()}setBlock(t){this._block!==t&&(this._block=t,this._invalidateModifiers(),this._tableRenderer.setBlock(t),this._sheduleRender())}_invalidateModifiers(){this.updateModifier("align",this._block.alignment)}_render(){let t=this._block;return J(e2,`:table-block-${this._block.key}`)`
			<figure
				class=${this._getCssClasses()}
				contenteditable="false"
				draggable="false"
				data-key=${t.key}
				tabindex="-1"
			>
				${this._tableScrollContainer.domElement()}
				${this._tableShadowContainer.domElement()}
			</figure>`}};function t2({block:e,blockBeforeType:t,blockAfterType:o,onHyperlinkOverFn:r,direction:n}){let i;return Hp[e.key]?(i=Hp[e.key],i.setBlock(e),i.setDirection(n)):(i=new _r({block:e,blockBeforeType:t,blockAfterType:o,direction:n,blockRenderer:new Wp({block:e,onHyperlinkOverFn:r})}),Hp[e.key]=i),i}function o2({getState:e,updateStateFn:t,setQuizApi:o,scrollableContainerRef:r,scrollToContinueGroupFn:n}){let i=Ee.selectedSection(e()),s=i.contentState,a=i.continueButtonKey,c=new tm(s,a);return c.registerRenderer(g.PARAGRAPH,l=>c.bindingBlockRenderer(_l,l,g.PARAGRAPH)),c.registerRenderer(g.COLLAGE,l=>c.bindingBlockRenderer(Ol,l,g.COLLAGE)),c.registerRenderer(g.EMBED,l=>c.bindingBlockRenderer(Vl,l,g.EMBED)),c.registerRenderer(g.QUIZ,l=>{let m=d(sI(e(),l.block.key));return c.bindingBlockRenderer(xx,{...l,quizProps:{quizState:m,setQuizApi:o,scrollableContainerRef:r}},g.QUIZ)}),c.registerRenderer(g.ATTACHMENT,Ox),c.registerRenderer(g.NOTE,l=>c.bindingBlockRenderer(Ul,l,g.NOTE)),c.registerRenderer(g.TABLE,t2),c.registerRenderer(g.FLIP_CARD,Xx),c.registerRenderer(g.DIVIDER,l=>c.bindingBlockRenderer(jl,l,g.DIVIDER)),c.registerRenderer(g.CONTINUE,l=>c.bindingBlockRenderer(t0,{...l,continueProps:{onContinueClick:m=>t(u=>{Ee.selectedSection(u).continueButtonKey=m}),isHidden:c.isHidden(l.block),scrollToContinueGroupFn:n}},g.CONTINUE)),c.registerRenderer(g.VIDEO,l=>c.bindingBlockRenderer(Zl,l,g.VIDEO)),c.registerRenderer(g.SNIPPET,l=>c.bindingBlockRenderer(Xl,l,g.SNIPPET)),c.registerRenderer(g.CODE,l=>c.bindingBlockRenderer(wl,l,g.CODE)),c.registerRenderer(g.LAYOUT,l=>c.bindingBlockRenderer(U0,l,g.LAYOUT)),c}function sI(e,t){let n=Ee.selectedSection(e).contentState.blocksState.find(i=>t===i.key);return n&&n.type===g.QUIZ?n:null}var xr=class extends oe{constructor({bemInfo:t,blockName:o,block:r,relatedData:n}){super({bemInfo:t,blockName:o,block:r,relatedData:n}),this._hidden=!1,this._x=null,this._y=null,this._width=null,this._height=null,this._text=""}onDisconnected(){return this._getBrowserEventSignal(ee.CUSTOM_DISCONNECTED)}setText(t){this._text=t,this._sheduleRender()}show(){this._hidden&&(this._hidden=!1,this._sheduleRender())}hide(){this._hidden||(this._hidden=!0,this._sheduleRender())}visible(){return!this._hidden}x(){return this._x}y(){return this._y}move(t,o){(t!=this._x||o!=this._y)&&(this._x=t,this._y=o,this._sheduleRender())}setWidth(t){t!=this._width&&(this._width=t,this._sheduleRender())}setHeight(t){t!=this._height&&(this._height=t,this._sheduleRender())}_getText(){return this._text}_getBaseStyles(){let t={display:this._hidden?"none":""};return this._x!=null&&(t.left=this._x),this._y!=null&&(t.top=this._y),this._width!=null&&(t.width=this._width),this._height!=null&&(t.height=this._height),t}_render(){return this._html`
<div
	class=${this._getCssClasses()}
	style=${this._getBaseStyles()}
	ondisconnected=${this}
>
	${this._text}
</div>`}};function r2(e,t,o){let r=o.getBoundingClientRect(),n=t.getBoundingClientRect(),i=Math.round(r.left-n.left+(r.width-e.clientWidth)*.5);Te(e,"inset-inline-start",`${i}px`)}var Pm=class extends xr{constructor(t,o){super({block:"tooltip-with-tail"}),o&&this.addBemInfo(o),this._relatedElement=t,this._addSignal(this.onDidRedraw(),()=>this._reCalcTailPosition()),this.showBelow()}showAbove(){this.updateModifier("show","above")}showBelow(){this.updateModifier("show","below")}_reCalcTailPosition(){r2(d(this._getChildElement("tail")),this.domElement(),this._relatedElement)}_renderContent(){return this._childHtml("content")`
<div></div>`}_render(){let t=Se([this.createChildBemInfo("tail")]);return this._html`
<div class=${this._getCssClasses()} style=${this._getBaseStyles()} onconnected=${()=>this._reCalcTailPosition()}>
	${this._childHtml("tail")`<div class=${t}></div>`}
	${this._renderContent()}
</div>`}};var Om=class extends oe{constructor(){super({blockName:"top-layer"}),this._component=null,this._componentStrategy=null,this._hideSignalKey=null,this._addSignal(this.onDidRedraw(),()=>{this._componentStrategy&&this._componentStrategy.invalidateComponentPosition()})}hide(){this._componentStrategy&&this._componentStrategy.hide()}_showImpl({component:t,componentStrategy:o}){this._component=t,this._componentStrategy=o,this._cleanListeners(),this._hideSignalKey=this._addSignal(this._componentStrategy.hideSignal(),()=>this._hideImpl()),this._componentStrategy.beforeShow(),this._sheduleRender()}_hideImpl(){this._cleanListeners(),this._component=null,this._componentStrategy=null,this._sheduleRender()}_cleanListeners(){this._hideSignalKey&&this._removeSignalByKey(this._hideSignalKey),this._hideSignalKey=null}_render(){return this._html`
<div class=${this._getCssClasses()}>
	${this._component}
</div>`}};var Ti=class extends Tt{constructor(t){super(),this._component=t,this._hideSignal=this._createSignal()}hide(){let t=this._beforeHide();t?t.addCallOnce(()=>this._hideSignal.dispatch()):this._hideSignal.dispatch()}invalidateComponentPosition(){}beforeShow(){}_beforeHide(){}hideSignal(){return this._hideSignal}};var aI=20,cI=10,Br=class extends Ti{constructor({component:t,relatedElement:o,offsetX:r=aI,offsetY:n=cI}){super(t),this._relatedElement=o,this._offsetX=r,this._offsetY=n}invalidateComponentPosition(){let t=this._relatedElement.getBoundingClientRect();(!t.width||!t.height||!this._relatedElement.parentNode)&&R.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`),this._component.move(t.left-this._offsetX,t.bottom+this._offsetY);let o=this._component.x()||0;o<0&&(o=this._offsetX),o+this._component.domElement().clientWidth>window.innerWidth&&(o=window.innerWidth-this._offsetX-this._component.domElement().clientWidth);let r=this._component.y()||0;r<0&&(r=this._offsetY),r+this._component.domElement().clientHeight>window.innerHeight&&(r=t.top-this._offsetY-this._component.domElement().clientHeight),this._component.move(o,r)}};var n2=150,lI=5,mI=10,Vm=class extends Br{constructor({tooltip:t,relatedElement:o,offsetX:r=lI,offsetY:n=mI,showBelow:i}){super({component:t,relatedElement:o,offsetX:r,offsetY:n}),this._showBelow=i,this._onMouseOutKey=null,this._onComponentMouseOutKey=null,this._onTouchStartKey=null}beforeShow(){this._onMouseOutKey=this._listen(this._relatedElement,ee.MOUSEOUT,r=>this._checkForHide(r)),this._onComponentMouseOutKey=this._listen(this._component.domElement(),ee.MOUSEOUT,r=>this._checkForHide(r)),this._onTouchStartKey=this._listen(document.body,ee.TOUCHSTART,r=>this._checkForHide(r));let t=this._component.domElement(),o=Gr(t);no({reducer:o,timingFn:rl(ho),duration:n2})}_beforeHide(){return this._onMouseOutKey&&this._unlistenByKey(this._onMouseOutKey),this._onComponentMouseOutKey&&this._unlistenByKey(this._onComponentMouseOutKey),this._onTouchStartKey&&this._unlistenByKey(this._onTouchStartKey),this._playHideAnimation()}invalidateComponentPosition(){let t=this._showBelow,o=this._getTooltip(),r=this._relatedElement.getBoundingClientRect();(!r.width||!r.height||!this._relatedElement.parentNode)&&R.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`);let n=o.domElement().getBoundingClientRect(),i=r.left+r.width*.5-n.width*.5,s=this._showBelow?r.bottom+this._offsetY:r.top-this._offsetY-n.height;o.move(i,s);let a=o.x()||0;a<0&&(a=this._offsetX),a+n.width>window.innerWidth&&(a=window.innerWidth-this._offsetX-n.width);let c=o.y()||0;c<0&&(c=r.bottom+this._offsetY,t=!0),this._component.move(a,c),t?o.showBelow():o.showAbove()}_checkForHide(t){let o=t.relatedTarget;o instanceof Node&&!this._relatedElement.contains(o)&&!this._component.domElement().contains(o)&&this.hide()}_getTooltip(){return this._component}_playHideAnimation(){let t=this._component.domElement(),o=Gr(t);return no({reducer:o,timingFn:ho,duration:n2,afterAnimation:()=>{this._component.hide()}})}};var Fm=class extends Ti{constructor(t){super(t),this._onMouseDownKey=null}invalidateComponentPosition(){}beforeShow(){this._onMouseDownKey=this._listen(document.body,ee.MOUSEDOWN,t=>this._onMouseDown(t))}_beforeHide(){return this._onMouseDownKey&&this._unlistenByKey(this._onMouseDownKey),null}_onMouseDown(t){let o=t.target;o instanceof Node&&!this._component.domElement().contains(o)&&this.hide()}};var Km=class extends Br{constructor(t){super(t),this._onMouseDownKey=null}beforeShow(){this._onMouseDownKey=this._listen(document.body,ee.MOUSEDOWN,t=>this._onMouseDown(t))}_beforeHide(){return this._onMouseDownKey&&this._unlistenByKey(this._onMouseDownKey),null}_onMouseDown(t){let o=t.target;o instanceof Node&&!this._relatedElement.contains(o)&&!this._component.domElement().contains(o)&&this.hide()}};var uI=5,dI=10,Lm=class extends Br{constructor({tooltip:t,relatedElement:o,offsetX:r=uI,offsetY:n=dI,showBelow:i}){super({component:t,relatedElement:o,offsetX:r,offsetY:n}),this._showBelow=i,this._onMouseOutKey=null,this._onTouchStartKey=null}beforeShow(){this._onMouseOutKey=this._listen(this._relatedElement,ee.MOUSEOUT,()=>this.hide()),this._onTouchStartKey=this._listen(document.body,ee.TOUCHSTART,t=>this._checkForHide(t))}_beforeHide(){return this._onMouseOutKey&&this._unlistenByKey(this._onMouseOutKey),this._onTouchStartKey&&this._unlistenByKey(this._onTouchStartKey),null}invalidateComponentPosition(){let t=this._showBelow,o=this._getTooltip(),r=this._relatedElement.getBoundingClientRect();(!r.width||!r.height||!this._relatedElement.parentNode)&&R.warn(`incorrect bounding box (${this._relatedElement.parentNode==null})`);let n=o.domElement().getBoundingClientRect(),i=r.left+r.width*.5-n.width*.5,s=this._showBelow?r.bottom+this._offsetY:r.top-this._offsetY-n.height;o.move(i,s);let a=o.x()||0;a<0&&(a=this._offsetX),a+n.width>window.innerWidth&&(a=window.innerWidth-this._offsetX-n.width);let c=o.y()||0;c<0&&(c=r.bottom+this._offsetY,t=!0),this._component.move(a,c),t?o.showBelow():o.showAbove()}_checkForHide(t){let o=t.target;o instanceof Node&&!this._relatedElement.contains(o)&&!this._component.domElement().contains(o)&&this.hide()}_getTooltip(){return this._component}};var $m=class extends Om{showPopup(t){this._showImpl({component:t.component,componentStrategy:new Km(t)})}showTooltip({tooltip:t,relatedElement:o,offsetX:r,offsetY:n,showBelow:i=!0,enableAnimation:s=!1}){let a=s?new Vm({tooltip:t,relatedElement:o,offsetX:r,offsetY:n,showBelow:i}):new Lm({tooltip:t,relatedElement:o,offsetX:r,offsetY:n,showBelow:i});this._showImpl({component:t,componentStrategy:a})}showFreePositioningPopup(t){this._showImpl({component:t,componentStrategy:new Fm(t)})}};function i2(e,t){return{animate:o=>{e.style.transform=`${t} scaleX(${o})`},complete:()=>{e.style.transform=t||""},changedProperties:["transform"]}}var Nm=class extends Pm{constructor(t,o){super(o),this._tooltipText=t}_renderContent(){let t=Se([this.createChildBemInfo("text")]);return this._childHtml("content")`
<div class=${t}>
	${this._tooltipText}
</div>`}};function pI(e){return e.contentState.blocksState.filter(t=>Bt.toQuizState(t))}function s2(e){let t=pI(e),o=[],r=[];return t.forEach(n=>{let i=n.quizData.settings.main;if(i.isGraded){let a=i.passingScore;n.bestAttempt!==null&&(n.bestAttempt>=a&&r.push(n),o.push(n))}else r.push(n),o.push(n)}),o.length!==t.length?"notCompleted":r.length===t.length?"passed":"failed"}function a2(e,t){let[,o]=sl(e,t);return o}function c2(e,{articleTitle:t,articleTitleClass:o}){let r=V(),n=a2(r);return qt({html:e,elementRef:r,text:t,show:n}),e`
<div class=${o} save-ref=${r}>${t}</div>`}function l2(e){return e?e.replace(/^\s|\s$/,bt.NBSP):bt.ZERO_WIDTH_SPACE}var{getCssClass:an}=Nf`/src/roll/player/renderer/navigation/NavigationItemRenderer.css`;function fI({passed:e}){return e?"passed":"failed"}function hI(e,{state:t}){let o=H(t,{passed:an("complete"),failed:an("failed"),notStarted:an("not-started",{dir:ot()})});return e`
<div class=${o}></div>`}function gI(e,{progress:t}){let r=Math.PI*18,n=(100-t*100)/100*r;return e`
		<div class=${an("progress-bar")}>
			<svg width="22" height="22" viewPort="0 0 11 11" version="1.1" xmlns="http://www.w3.org/2000/svg">
				<circle r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="0"></circle>
				<circle class=${an("bar")} r="${9}" cx="11" cy="11" fill="transparent" stroke-dasharray="56.5" stroke-dashoffset="${n}"></circle>
			</svg>
		</div>`}function m2(e,t){let o={selected:t.selected,intro:t.isIntro,dir:ot()},r=Ss(),n=t.state,i=n==="notStarted"&&t.disabled,s=i?t.onHoverDisabledState:null,a=r?null:s,c=r?s:null,l=i?null:t.onClick;return e`
<div
	class=${an("navigation-item",o)}
	disabled=${i?!0:null}
	onclick=${l}
	onmouseover=${a}
	passive-events=${{ontouchstart:c}}
>
	${e.switch(()=>n==="inProgress"?f(gI,{progress:t.progress}):f(hI,{state:n==="completed"?fI(t):n}))}
	<div class=${an("label")}>${l2(t.label)}</div>
</div>`}var zm=class extends oe{constructor(){super({blockName:"total-progress"}),this._progress=0}setProgress(t){this._progress=t,this._sheduleRender()}_render(){let t=Math.floor(this._progress*100)+"%";return this._html`
<div class=${this._getCssClasses()}>
	<div class=${this._getChildClass("numeric")}>${t}</div>
	<div class=${this._getChildClass("indicator-container")}>
		<div class=${this._getChildClass("indicator-progress")} style=${`width: ${t}`}></div>
	</div>
</div>`}};var Qm=class extends oe{constructor(t,o,r){super({blockName:"navigation-panel"}),this._state=t,this._settings=o,this._topLayer=r,this._totalProgress=new zm,this._totalProgress.addBemInfo(this.createChildBemInfo("progress")),this._sections=this._createSections(t),this.onSectionClick=this._createSignal(),this._ignoreNextAnimation=!1,this._articleTitle=this._state.intro.header.title||k("Roll.Common.IntroDefaultTitle")}setProgress(t){this._totalProgress.setProgress(t)}setState(t){this._state=t,this._updateRenderers()}ignoreNextShowPanelAnimation(){this._ignoreNextAnimation=!0}onTransitionEnd(){return this._getBrowserEventSignal(ee.TRANSITIONEND)}redrawOverlay(){this._updateRenderers()}_updateRenderers(){this.updateModifier("showed",this._state.navigationPanelShowed),this.updateModifier("in-overlay",ar()||At()),this._sections=this._createSections(this._state),this._ignoreNextAnimation?(this._ignoreNextAnimation=!1,this.updateModifier("ignore-transition",!0)):this.hasModifier("ignore-transition")&&this.updateModifier("ignore-transition",!1),this._sheduleRender()}_createSections(t){let o=[],r=-1,n=this._settings.navigationType=="sequence",i=k("Roll.Common.ChapterDefaultTitle");return Ee.sections(t).forEach((s,a)=>{let c=s==t.intro?k("Roll.Common.NavigationPanel.IntroTitle"):s.header.title||i,l=s.progress,m=s==Ee.selectedSection(t);m&&(r=l<1?a:a+1);let u=n&&r!=-1&&a>r&&l==0,p=()=>{let T=new Nm(k("Roll.Player.LockedNavigationItemTooltipText"),C);this._topLayer.showTooltip({tooltip:T,relatedElement:C,showBelow:!1,enableAnimation:!0})},S=s2(s),b=S==="passed"||S==="failed",y={label:c,selected:m,isIntro:s==t.intro,onClick:()=>this.onSectionClick.dispatch(s),onHoverDisabledState:p},_;s.progress===1&&b?_={...y,state:"completed",passed:S==="passed"}:s.progress===0?_={...y,state:"notStarted",disabled:u}:_={...y,state:"inProgress",progress:s.progress};let C=Pe(m2)(_,this._renderFunctionEx(s.key));o.push(C)}),o}_renderArticleTitle(){let t=Se([this.createChildBemInfo("article-title")]);return Pe(c2)({articleTitle:this._articleTitle,articleTitleClass:t},this._renderFunctionEx("article-title"))}_renderMainPanel(){return this._childHtml("main-panel")`
<div class='main-panel'>
	${this._renderArticleTitle()}
	${this._totalProgress}
	${this._sections}
</div>`}_render(){return this._html`
<div
	class=${this._getCssClasses()}
	ontransitionend=${this}
	onscroll=${()=>this._topLayer.hide()}
>
	${this._renderMainPanel()}
</div>`}};var Ps=new Map,u2=!1;function yI(e){Ps.delete(e)}function CI(e,t,o){Ps.has(t)||(Ps.set(t,{}),t.addDestructHandler(()=>{yI(t)}));let r=d(Ps.get(t));d(!r[e]),r[e]=o}function SI(e){Ps.forEach(t=>{t.hasOwnProperty(e)&&t[e]()})}function _I(e,t){return function(){let o=typeof t=="function"?t():t;return k(e,o)}}function kI({id:e,renderer:t,updateFn:o,parameters:r}){!u2&&vu&&(vu.add(SI),u2=!0);let n=r?_I(e,r):()=>k(e),i=null;if(o){let s=o.bind(t);i=()=>s(n()),i()}else i=()=>t._sheduleRender();return CI(e.toString(),t,i),{getMessageFn:n,forceUpdateFn:i}}function d2(e,t,o){let{getMessageFn:r}=kI({id:e,renderer:t,parameters:o});return r}var Hm=class extends oe{constructor({header:t,chapterIndex:o,chaptersCount:r,numberingEnabled:n,defaultTitle:i,marginTop:s,paddingTop:a}){super({blockName:"chapter-header",relatedData:t}),this._header=t,this._defaultTitle=i,this._marginTop=s,this._paddingTop=a,this._labelMessageFn=d2(io("Roll.Common.CurrentChapterFromTotal"),this,{current:o+1,total:r}),this._numberingEnabled=n}title(){return d(this._getChildElement("chapter-title"))}_render(){let t=Se(["text-chapter-number",this.createChildBemInfo("chapter-number")]),o=Se(["text-title",this.createChildBemInfo("title")]),r=Se(["text-subtitle",this.createChildBemInfo("subtitle")]),n=this._header.title||this._defaultTitle||k("Roll.Common.ChapterDefaultTitle");return this._html`
<div
	class=${this._getCssClasses()}
	style=${{"margin-top":this._marginTop,"padding-top":this._paddingTop}}
>
	${this._numberingEnabled?this._childHtml("numbering")`<p class=${t}>${this._labelMessageFn()}</p>`:null}
	${this._childHtml("chapter-title")`
		<p class=${o}>${n}</p>
	`}
	${this._header.subtitle?this._childHtml("chapter-subtitle")`<p class=${r}>${this._header.subtitle}</p>`:null}
</div>`}};var Um=class extends oe{constructor(t){super({blockName:"intro-header",relatedData:t}),this._header=t,this.updateModifier("with-cover",!!this._header.coverInfo),this.updateModifier("without-kicker",this._header.kicker=="")}kickerElement(){return this._getChildElement("kicker")}titleElement(){return d(this._getChildElement("intro-title"))}stripElement(){return this._getChildElement("strip")}_coverImage(){let t=this._header.coverInfo;if(!t)return null;let o={"background-image":`url(${t.src})`},r=pe(t.color),n=t.opacity,i={"background-color":`rgba(${r[0]}, ${r[1]}, ${r[2]}, ${n})`},s=Se(["intro-cover",this.createChildBemInfo("cover")]),a=Se(["intro-cover-overlay",this.createChildBemInfo("cover-overlay")]);return this._childHtml("cover")`
<div style=${o} class=${s}>
	<div style=${i} class="${a}">
</div>`}_render(){let t=Se(["intro-container"]),o=Se(["text-kicker",this.createChildBemInfo("kicker")]),r=Se(["text-title",this.createChildBemInfo("title")]),n=Se([this.createChildBemInfo("strip")]),i=this._header.coverInfo?null:this._childHtml("strip")`
				<div class=${n}></div>`;return this._html`
<div class=${this._getCssClasses()} data-at=${ne("intro-header")}>
	${this._coverImage()}
	<div class=${t}>
		${this._header.kicker?this._childHtml("kicker")`<p class=${o}>${this._header.kicker.trim()||bt.ZERO_WIDTH_SPACE}</p>`:null}
		${this._childHtml("intro-title")`
			<p class=${r} data-at=${ne("intro-header-title")}>${this._header.title?this._header.title.trim()||bt.ZERO_WIDTH_SPACE:k("Roll.Common.IntroDefaultTitle")}</p>
		`}
		${i}
	</div>
</div>`}};var Wm=class extends xr{constructor({bemInfo:t,blockName:o,autotestData:r}){super({bemInfo:t,blockName:o}),this._pressed=!1,this._disabled=!1,this._autotestData=r}onClick(){return this._getBrowserEventSignal(ee.CLICK)}onMouseDown(){return this._getBrowserEventSignal(ee.MOUSEDOWN)}onMouseOver(){return this._getBrowserEventSignal(ee.MOUSEOVER)}onMouseOut(){return this._getBrowserEventSignal(ee.MOUSEOUT)}setDisabled(t){this._disabled=t,this._sheduleRender()}pressed(){return this._pressed}setPressed(t){this._pressed=t,this.updateModifier("pressed",this._pressed)}_render(){return this._html`
			<button class=${this._getCssClasses()}
					disabled=${this._disabled}
					style=${this._getBaseStyles()}
					onclick=${this._getHandler(ee.CLICK)}
					data-at=${ne(this._autotestData)}
					onmousedown=${this._getHandler(ee.MOUSEDOWN)}
					onmouseover=${this._getHandler(ee.MOUSEOVER)}
					onmouseout=${this._getHandler(ee.MOUSEOUT)}>
				${this._getText()}
			</button>`}};var qm=class extends xr{constructor({previewMode:t,autotestData:o}){super({blockName:"top-panel"}),this._previewMode=t,this._autotestData=o,this.onClosePlayerRequest=this._createSignal(),this._showNavigationButton=new Wm({bemInfo:this.createChildBemInfo("show-navigation")}),this._showNavigationButton.updateModifier("dir",ot()),this._progress=0,this._animationRunning=!1,this._ignoreProgressTransition=!1,this._addSignal(this.onDidRedraw(),()=>{this._ignoreProgressTransition=!1})}onShowNavigationButtonClick(){return this._showNavigationButton.onClick()}setState(t){this._showNavigationButton.setPressed(t.navigationPanelShowed);let o=Ee.selectedSection(t);this._progress=o.progress,this._ignoreProgressTransition=o.progress<this._progress,this.updateModifier("floating",ar()||At()),this._sheduleRender()}setAnimationRunning(t){this._animationRunning=t}getProgressElement(){return d(this._getChildElement("progress"))}_renderCrossIcon(){if(this._previewMode)return null;let t=Pe(go)({}),o=this._getChildClass("close");if(Zs()){let r=t.getAttribute("class")||"";r=r.split(" ").includes(o)?r:`${t.className} ${o}`,t.setAttribute("class",r)}else t.classList.add(o),t.setAttribute("data-at",d(ne("roll-top-panel-close")));return St(t,"click",()=>this.onClosePlayerRequest.dispatch()),t}_render(){let t=Se(["top-panel-progress"]),o={width:`calc(100% * ${this._progress})`,transition:this._ignoreProgressTransition?"none":""};return this._html`
<div class=${this._getCssClasses()} style=${this._getBaseStyles()} data-at=${ne(this._autotestData)}>
	${this._showNavigationButton}
	${this._childHtml("progress")`<div class=${t} style=${o}></div>`}
	${this._renderCrossIcon()}
</div>`}};var xI=500,p2=56,qp=53,BI=600,bI=rl(Rd(ho,.14)),vI=Rd(ho,.64),TI=850,Gm=class extends oe{constructor({state:t,settings:o,previewMode:r,updateStateFn:n,setQuizApi:i,showWatermark:s}){super({blockName:"roll-player"}),this._showWatermark=s,this._topLayer=new $m,this._topWindow=window;try{window.top.location.href&&(this._topWindow=window.top)}catch(a){}this._state=t,this._settings=o,this._isOnePageLongread=o.longreadType==="onePage",this._topPanel=new qm({previewMode:r,autotestData:"roll-top-panel"}),this._navigationPanel=new Qm(t,o,this._topLayer),this._navigationPanel.addBemInfo(this.createChildBemInfo("navigation")),this._labelText="",this._iconMeta={},this._introHeaderRenderer=null,this._contentRef={},this._chapterHeaderRenderer=null,this._richTextRenderer=o2({getState:()=>this._state,updateStateFn:n,setQuizApi:i,scrollableContainerRef:this._contentRef,scrollToContinueGroupFn:a=>{let c={top:0,bottom:p2};US({element:a,container:this._content(),duration:xI,scrollDirection:"bottom",bounds:c})}}),this._contentBlockClassName=this.createChildBemInfo("content").className(),this._navigationButtonClassName=this.createChildBemInfo("next").className(),this._mainBlockClassName=this.createChildBemInfo("main").className(),this._state=t,this._invalidateRenderer(),this.onToggleNavigationButtonClick=this._createSignal(this._topPanel.onShowNavigationButtonClick()),this.onSectionClick=this._createSignal(),this._addSignal(this._navigationPanel.onSectionClick,a=>{let c=Ee.selectedSection(this._state);a==c?this._hideNavigationPanel(!1):(this._navigationPanel.ignoreNextShowPanelAnimation(),this._hideNavigationPanel(!0)),this.onSectionClick.dispatch(a)}),this.onGotoNextChapter=this._createSignal(),this.onSelectedSectionProgress=this._createSignal(),this.onClosePlayerRequest=this._createSignal(this._topPanel.onClosePlayerRequest),this._selectedChapterIndex=this._state.selectedSectionIndex,this._navigationPanelHideTransitionFinished=!0,this._prevScrollTop=0,this._abortContentAnimationSignal=new He,this._abortProgressAnimationSignal=new He,this._abortNextButtonIconSignal=new He,this._nextButtonIconAnimationCompleted=!0,Ai()&&(this._listen(d(this._topWindow),ee.RESIZE,()=>{this._invalidateHeight()}),this._listen(d(this._topWindow),ee.SCROLL,()=>{this._invalidateHeight()}),this._listen(d(this._topWindow),ee.ORIENTATIONCHANGE,()=>{setTimeout(()=>d(this._topWindow).scrollTo(0,0),500)})),this._listen(d(this._topWindow),ee.ORIENTATIONCHANGE,()=>{this._topLayer.hide()}),this._resizeObserver=new ResizeObserver(()=>{this._onResize()})}redrawNavigation(){this._sheduleRender(),this._navigationPanel.redrawOverlay()}state(){return this._state}updateState(t){this._state=t;let o=this._state.selectedSectionIndex,r=this._selectedChapterIndex!=o;if(this._invalidateRenderer(),r){this._selectedChapterIndex=o;let n=this._content();n.scrollTop=0}this._invalidateContentProgress(),r&&(this._runContentAnimation(),this._runProgressAnimation())}setProgress(t){this._navigationPanel.setProgress(t)}ignoreNextShowPanelAnimation(){this._navigationPanel.ignoreNextShowPanelAnimation()}_onResize(){this._topPanel.updateModifier("without-transition",!0),this._topPanel.move(null,0),this._prevScrollTop=0,this._invalidateRenderer()}_runContentAnimation(){let t=this._content();this.updateModifier("hide-content-scroll",t.scrollHeight==t.clientHeight);let o=[];if(this._introHeaderRenderer){let i=this._introHeaderRenderer.domElement();o.push(Gr(i),il(i))}if(this._chapterHeaderRenderer){let i=this._chapterHeaderRenderer.domElement();o.push(Gr(i),il(i))}let r=this._richTextRenderer.domElement();o.push(Gr(r),il(r));let n=nl(o);this._abortContentAnimationSignal.dispatch(),no({reducer:n,timingFn:bI,duration:BI,abortSignal:this._abortContentAnimationSignal}).addCallOnce(()=>{this.updateModifier("hide-content-scroll",!1)})}_runProgressAnimation(){this._abortProgressAnimationSignal&&this._abortProgressAnimationSignal.dispatch();let t=this._topPanel.getProgressElement(),o=i2(t);this._abortProgressAnimationSignal.dispatch(),this._topPanel.setAnimationRunning(!0),no({reducer:o,timingFn:vI,duration:TI,abortSignal:this._abortProgressAnimationSignal,beforeAnimation:()=>{t.style.transformOrigin="0 50%"},afterAnimation:()=>{t.style.transformOrigin=""}}).addCallOnce(()=>{this._topPanel.setAnimationRunning(!1)})}_getSelectedContent(){return Ee.selectedSection(this._state).contentState}_getCurrentContinueKey(){return Ee.selectedSection(this._state).continueButtonKey}_getIntroHeader(){let t=this._state;return t.selectedSectionIndex===-1?t.intro.header:null}_getChapterHeader(){return this._state.selectedSectionIndex===-1?null:Ee.selectedSection(this._state).header}_getSelectedSectionIndex(){return this._state.selectedSectionIndex}_getChaptersCount(){return this._state.chapters.length}_invalidateRenderer(){this._topPanel.setState(this._state),this._navigationPanel.setState(this._state);let t=(ar()||At())&&!this._isOnePageLongread;this.updateModifier("with-floating-top-panel",t);let o=this._getIntroHeader();this._introHeaderRenderer=o?new Um(o):null;let r=this._getChapterHeader();this._removeDisposable(this._chapterHeaderRenderer),this._chapterHeaderRenderer=null,r&&(this._chapterHeaderRenderer=new Hm({header:r,chapterIndex:this._getSelectedSectionIndex(),chaptersCount:this._getChaptersCount(),numberingEnabled:this._settings.numberingEnabled}));let n=this._getSelectedContent(),i=this._getCurrentContinueKey();this._richTextRenderer.updateState(n,i);let s=this._getNextSection();s?this._labelText=this._getNextSectionLabel(s):this._labelText="",this._sheduleRender()}_content(){return d(this.domElement().querySelector(`.${this._contentBlockClassName}`))}_invalidateContentProgress(){let t=this._content(),o=this._getContentHeight(),r=_t(Math.ceil(t.scrollTop+t.clientHeight)/o,0,1);this.onSelectedSectionProgress.dispatch(r)}_getContentHeight(){let t=this._content(),o=this._richTextRenderer.domElement(),r=this._getChildElement("next"),n=r?r.clientHeight:0,i=o.children,s=t.scrollHeight-o.scrollHeight-n;for(let a of i)s+=a.scrollHeight;return s}_invalidateHeight(){let t=d(this._topWindow).innerHeight;this.domElement().style.height=`${t}px`,this._navigationPanel.domElement().style.height=`${t}px`}_onScroll(t){if(this._invalidateContentProgress(),ar()||At()){t.preventDefault(),this._topPanel.updateModifier("without-transition",!1);let o=Math.max(t.target.scrollTop,0);if(o>=this._prevScrollTop){if(o>qp){let r=-Math.min(o,qp);this._topPanel.move(null,r),this._prevScrollTop=o}}else if(o<this._prevScrollTop){if(o<=qp){this._topPanel.updateModifier("without-transition",!0);let r=Math.abs(parseFloat(d(this._topPanel.domElement().style.top)))||0,n=-Math.min(o,r);this._topPanel.move(null,n),this._prevScrollTop=o}this._prevScrollTop-o>p2&&(this._topPanel.move(null,0),this._prevScrollTop=o)}}}_onConnected(){if(this._resizeObserver.observe(this.domElement()),Ai()&&this._invalidateHeight(),this._invalidateContentProgress(),Xs()){let t=()=>{tt(()=>{this._invalidateContentProgress(),t()})};t()}}_hideNavigationPanel(t=!1){$c()||!this._navigationPanelHideTransitionFinished||(this._navigationPanelHideTransitionFinished=t,this._addSignal(this._navigationPanel.onTransitionEnd(),()=>{this._navigationPanelHideTransitionFinished=!0,this._sheduleRender()}),this.onToggleNavigationButtonClick.dispatch())}_animateNextButtonIcon(t){let o=this._iconMeta.current;if(o){this._abortNextButtonIconSignal.dispatch();let{y:r}=da(o),n=t?"":"translateY(4px)",i=this._nextButtonIconAnimationCompleted?t?4:0:Math.abs(r),a=qS({element:o,initialTransform:n,from:i,to:t?0:4});no({reducer:a,timingFn:HS,duration:150,abortSignal:this._abortNextButtonIconSignal,afterAnimation:()=>{this._nextButtonIconAnimationCompleted=!0}}),this._nextButtonIconAnimationCompleted=!1}}_getNextSection(){return this._settings.nextButtonEnabled?Ee.nextSection(this._state):null}_getNextSectionLabel(t){return k("Roll.Player.GotoNextChapterLink",{title:t.header.title||k("Roll.Common.ChapterDefaultTitle")})}_renderCompleteButton(){let t=Se(["complete-section-content-container"]),o=Pe(Ce)({style:"primary",structure:"text",text:k("Roll.Player.Complete"),onClick:()=>this.onClosePlayerRequest.dispatch(),size:"xLarge",minWidth:!1});return o.classList.add(this._navigationButtonClassName),this._childHtml("complete")`
<div class=${t} data-at=${ne("complete-section-content-container")}>
	${o}
</div>
`}_renderNextButton(){if(!this._getNextSection())return this._renderCompleteButton();let o=Se(["next-section-content-container"]),r=Se(["next-section-label"]),n=this._nextButtonDisabled(),i=Pe(Ce)({style:"primary",structure:"text",text:k("Roll.Player.Continue"),onClick:n?void 0:()=>this.onGotoNextChapter.dispatch(),size:"xLarge",state:n?"disabled":"default",minWidth:!1});return i.classList.add(this._navigationButtonClassName),this._childHtml("next")`
<div class=${o}>
	<div class=${r}>
		${this._labelText}
	</div>
	${i}
</div>`}_nextButtonShowed(){let t=Ee.getLastContinueButtonKey(this._state),o=!!t&&t!==this._getCurrentContinueKey();return this._settings.nextButtonEnabled&&!o}_nextButtonDisabled(){let t=this._settings.navigationType=="sequence",o=Ee.selectedSection(this._state);return t&&o.progress<1}_render(){let t=Se(["overlay"]),o=Se(["copying-disabled"]),r=Se(["with-watermark"]),n=this._getCssClasses();return this._settings.copyingEnabled||(n=`${n} ${o}`),this._showWatermark&&(n=`${n} ${r}`),this._html`
<div class=${n} onconnected=${this._onConnected}>
	${this._isOnePageLongread?null:this._navigationPanel}
	<div class=${this._mainBlockClassName} data-at=${ne("roll-player-main")}>
		${this._isOnePageLongread?null:this._topPanel}
		<div class=${this._contentBlockClassName} onscroll=${this._onScroll} save-ref=${this._contentRef}>
			${this._introHeaderRenderer}
			${this._chapterHeaderRenderer}
			${this._richTextRenderer}
			${this._nextButtonShowed()?this._renderNextButton():null}
		</div>
	</div>
	${(ar()||At())&&this._state.navigationPanelShowed||!this._navigationPanelHideTransitionFinished?this._childHtml("overlay")`<div class=${t} passive-events=${{ontouchstart:this._hideNavigationPanel}} onmousedown=${this._hideNavigationPanel}></div>`:null}
	${this._topLayer}
</div>`}};function f2(e){let t=Date.now(),o=setInterval(()=>{let n=Date.now()-t;e(n)},100);return()=>clearInterval(o)}var h2=3e3,Ym=class extends Tt{constructor({playerData:t,previewMode:o=!1,resumeState:r,showWatermark:n}){super();let i=KS(t,r);this._attemptDate=Date.now(),this._state=i,this._settings=t.settings,this.onSelectedSectionChange=this._createSignal(),this.onPersistedStateChange=this._createSignal(),this.onSectionProgressChange=this._createSignal(),this.onQuizStatisticChange=this._createSignal(),this.onLongreadResultChange=this._createSignal(),this._longreadResult=this._calculateLongreadResult(),this._quizApiMap=new tl({longreadMainSettings:t.settings.main,updateQuizState:this._updateQuizState.bind(this),onQuizToGradeCompleted:this._onQuizToGradeCompleted.bind(this),onQuizStatisticChange:this.onQuizStatisticChange}),this._renderer=this._addDisposable(new Gm({state:this._state,updateStateFn:a=>this._updateState(a),setQuizApi:this._quizApiMap.setApi.bind(this._quizApiMap),previewMode:o,settings:new ol(this._settings),showWatermark:n})),this._onLongreadResultChangedWithThrottle=vd(this.onLongreadResultChange.toFn(),h2),this._onPersistedStateChangeWithThrottle=vd(this.onPersistedStateChange.toFn(),h2),this.onClosePlayerRequest=this._createSignal(),this._addSignal(this._renderer.onToggleNavigationButtonClick,()=>this._toggleNavigationPanel()),this._addSignal(this._renderer.onSectionClick,a=>this._selectSection(a)),this._addSignal(this._renderer.onGotoNextChapter,()=>this._gotoNextChapter()),this._addSignal(this._renderer.onSelectedSectionProgress,a=>{this._setSelectedSectionProgress(a),this.onSectionProgressChange.dispatch(),this._setLongreadProgress(this._getLongreadProgress())}),f2(a=>{this._longreadResult.duration=a});let s=Lc(()=>this.setInitialNavigationToggleState(),100);this._lastWindowWidth=0,this._listen(window,ee.RESIZE,s.call),this.setInitialNavigationToggleState(),this._addSignal(this._renderer.onClosePlayerRequest,()=>this._onClosePlayer())}isGraded(){let t=this._settings.main.grade;return t.mode==="gradeByQuiz"&&!!t.quizToGradeId}getTitle(){return this._state.intro.header.title||k("Roll.Common.IntroDefaultTitle")}getChaptersCount(){return this._state.chapters.length}getCurrentSectionIndex(){return this._state.selectedSectionIndex}getCurrentSectionProgress(){return Ee.selectedSection(this._state).progress}getCurrentSectionsStateProgress(){return this._state.chapters.map(t=>t.progress===1)}getIntroSectionStateProgress(){return this._state.intro.progress===1}getSuspendData(){let t=gS($S(this._renderer.state()),2);return CS(JSON.stringify({state:t,version:2}))}getArticle(){let t=this._state.chapters.map(o=>({key:o.key,title:o.header.title}));return{intro:{key:this._state.intro.key,title:this._state.intro.header.title},chapters:t}}getLongreadResult(){return this._longreadResult}setInitialNavigationToggleState(t=!0){let o=window.innerWidth;if(this._lastWindowWidth>qr.FULL&&$c())return;this._lastWindowWidth=o;let r=o>qr.FULL;this._updateState(n=>{if(r==n.navigationPanelShowed){r&&this._renderer.redrawNavigation();return}t||this._renderer.ignoreNextShowPanelAnimation(),n.navigationPanelShowed!=r&&(n.navigationPanelShowed=r)})}_getAllChaptersArray(){return[this._state.intro,...this._state.chapters]}_getSettingsChaptersCount(){return this._settings.main.chaptersCount===-1?this._getAllChaptersArray().length:this._settings.main.chaptersCount}_getGradedQuizProgressPortion(t){let o=0;return t.contentState.blocksState.forEach(r=>{let n=Bt.toQuizState(r);n&&n.quizData.settings.main.isGraded&&o++}),o?(1-.75)/o:0}_verifyProgress(t){return Ii(t,10)>=1?1:t}_getLongreadProgress(){let t=this._getAllChaptersArray();return t.reduce((o,r)=>o+r.progress,0)/t.length}_getLongreadProgressState(){let t=this._getAllChaptersArray(),o=this._getSettingsChaptersCount(),r=0;return t.forEach(n=>{n.progress===1&&r++}),r>=o}_updateState(t){let o=Ve(this._state,r=>{t(r)});this._state!=o&&(this._state=o,this._renderer.updateState(o),this._state.selectedSectionIndex!==o.selectedSectionIndex&&this.onSelectedSectionChange.dispatch(),this._onPersistedStateChangeWithThrottle())}_selectSection(t){this._updateState(o=>{o.selectedSectionIndex=t.key==o.intro.key?-1:o.chapters.findIndex(r=>r.key==t.key)})}_updateQuizState(t,o){this._updateState(r=>{let n=Ee.selectedSection(r),i=n.contentState,s=this._getGradedQuizProgressPortion(n);i.blocksState.forEach((a,c)=>{let l=Bt.toQuizState(a);l&&l.quizData.key===t&&(l.quizData.settings.main.isGraded&&Os(l.bestAttempt)&&!Os(o.bestAttempt)&&(n.progress=this._verifyProgress(n.progress+s)),i.blocksState[c]={...l,...o})})})}_gotoNextChapter(){this._updateState(t=>{let o=Ee.nextSection(t);o&&(t.selectedSectionIndex=o.key==t.intro.key?-1:t.chapters.findIndex(r=>r.key==o.key))})}_onQuizToGradeCompleted({score:t,passed:o}){let r=this._longreadResult.score;(!r||t>r)&&(this._longreadResult.score=t,this._longreadResult.longreadPassed=o,this._longreadResult.completed=!0,this.onLongreadResultChange.dispatch())}_setLongreadProgress(t){this._renderer.setProgress(t);let o=this._normalizeProgress(t);if(this._longreadResult.progress!==o){if(this._longreadResult.progress=o,!this.isGraded()){let r=this._getLongreadProgressState();this._longreadResult.longreadPassed=r,this._longreadResult.completed=r}this._onLongreadResultChangedWithThrottle()}}_setSelectedSectionProgress(t){this._updateState(o=>{let r=Ee.selectedSection(o);if(isNaN(t)||r.progress>=t)return;let n=this._getGradedQuizProgressPortion(r),i=0;r.contentState.blocksState.forEach(a=>{let c=Bt.toQuizState(a);c&&c.quizData.settings.main.isGraded&&!Os(c.bestAttempt)&&(i+=n)});let s=n?this._verifyProgress(t*.75+i):t;r.progress>=s||(r.progress=s)})}_toggleNavigationPanel(){this._updateState(t=>{t.navigationPanelShowed=!t.navigationPanelShowed})}_calculateLongreadResult(){let t=this._settings.main.grade,o=this._attemptDate,r=this._normalizeProgress(this._getLongreadProgress());if(t.mode!=="gradeByQuiz"||!t.quizToGradeId){let s=this._getLongreadProgressState();return{longreadPassed:s,progress:r,score:null,completed:s,attemptDate:o,duration:0}}let n=this._findQuizToGrade(t.quizToGradeId);if(!n)throw new Error(`graded quiz with id ${t.quizToGradeId} is not found`);let i=n.quizData.settings.main.passingScore;return n.bestAttempt?{longreadPassed:n.bestAttempt>=i,progress:r,score:n.bestAttempt,completed:!0,attemptDate:o,duration:0}:{longreadPassed:!1,progress:r,score:null,completed:!1,attemptDate:o,duration:0}}_findQuizToGrade(t){return[...this._state.intro.contentState.blocksState,...this._state.chapters.reduce((r,n)=>(r.push(...n.contentState.blocksState),r),[])].find(r=>{let n=Bt.toQuizState(r);return n&&n.quizData.longreadQuizId===t})}_normalizeProgress(t){return t*100}domElement(){return this._renderer.domElement()}_onClosePlayer(){this.onLongreadResultChange.dispatch(),this.onClosePlayerRequest.dispatch()}};function g2(e,t,o=200){let r=Q(()=>Lc(()=>{},o),[o]);Y(e,"touchstart",()=>{r.call()}),Y(e,"touchend",n=>{r.isPending()&&(n.preventDefault(),t&&t()),r.cancel()})}function y2(e){return e`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m4.5 11.5 7-7m0 7-7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
`}var C2={toast:"x9b5d5__toast",text:"x9b5d5__text"},S2={toast:{withMods:e=>__getCssClass("x5ff3c__toast",e)},closeIcon:"x5ff3c__close-icon"};function _2(e,{type:t,text:o,onClose:r}){let n=V();X(()=>{n.current.setAttribute("data-at",ne(`toast-${t}-close-button`)||"")},[n,t]),Y(n,"click",r),g2(n,r);let i=S2.toast.withMods({type:t});return e`
<div class=${`${C2.toast} ${i}`} data-at=${ne(`toast-${t}`)}>
	<div class=${C2.text}>
		${{html:o}}
	</div>
	${e(y2,{},{ref:n,className:S2.closeIcon})}
</div>`}var DI={fadeInAnimation:"xda1e9__fade-in-animation",fadeInWithShift:"xda1e9__fade-in-with-shift",fadeOutAnimation:"xda1e9__fade-out-animation",fadeOutWithShift:"xda1e9__fade-out-with-shift"};function jm(e){X(()=>{fn({"--toast-fade-in-duration":`${240}ms`,"--toast-fade-out-duration":`${120}ms`}),Te(e.current,"--shift-animation-height",`-${e.current.clientHeight+e.current.style.marginBottom}px`),e.current.classList.add(DI.fadeInAnimation)},[e])}var EI={fadeInAnimation:"xda1e9__fade-in-animation",fadeInWithShift:"xda1e9__fade-in-with-shift",fadeOutAnimation:"xda1e9__fade-out-animation",fadeOutWithShift:"xda1e9__fade-out-with-shift"};function RI(e,t,o){let r=P(void 0),n=P(void 0),i=!o.important,s=O(()=>{r.current!==void 0&&clearTimeout(r.current),n.current!==void 0&&clearTimeout(n.current)},[]),a=O(()=>{s(),e.current.classList.add(EI.fadeOutAnimation),n.current=setTimeout(()=>xl(t),120)},[t,e,s]),c=O(()=>{r.current=setTimeout(()=>a(),4e3)},[a]);return A(()=>(i&&(c(),e.current.onmouseenter=s,e.current.onmouseleave=c),()=>s()),[e,c,s,i]),A(()=>{o.markedAsRemoved&&a()},[a,o.markedAsRemoved]),a}function x2(e,{toastId:t,toastData:o}){let r=V();jm(r);let n=RI(r,t,o);return Ae(e,f(_2,{type:o.type,text:o.text,onClose:()=>{n(),o.onClose&&o.onClose()}}),r)}var B2={toast:"x9b5d5__toast",text:"x9b5d5__text"},Gp={toast:{withMods:e=>__getCssClass("x73656__toast",e)},text:"x73656__text",cancelButton:"x73656__cancel-button"};function b2(e,{text:t,cancelButtonInfo:o}){let r=Gp.toast.withMods({"with-cancel":o!==void 0});return e`
<div class=${`${B2.toast} ${r}`}>
	${e(dr,{size:"small",color:"onColor"})}
	<div class=${`${B2.text} ${Gp.text}`}>
		${{html:t}}
	</div>
	${e.renderIf(Ce,()=>o&&{style:"secondaryInversed",structure:"text",text:o.label,onClick:o.onClick,size:"small"},Gp.cancelButton)}
</div>`}var MI={fadeInAnimation:"xda1e9__fade-in-animation",fadeInWithShift:"xda1e9__fade-in-with-shift",fadeOutAnimation:"xda1e9__fade-out-animation",fadeOutWithShift:"xda1e9__fade-out-with-shift"};function II(e,t,o){let r=O(()=>{e.current.classList.add(MI.fadeOutAnimation),setTimeout(()=>xl(t),120)},[t,e]);return A(()=>{o.operationCompletePromise.then(r)},[r,o.operationCompletePromise]),A(()=>{o.markedAsRemoved&&r()},[r,o.markedAsRemoved]),r}function Yp(e,{toastId:t,toastData:o}){let r=V();jm(r);let n=II(r,t,o),i=o.type==="withLoad"?{text:o.text,cancelButtonInfo:void 0}:{text:o.text,cancelButtonInfo:{onClick:()=>{n(),o.onClose&&o.onClose()},label:o.cancelButtonLabel}};return Ae(e,f(b2,i),r)}var Xm={container:{withMods:e=>__getCssClass("x8a988__container",e)},toast:"x8a988__toast"};function v2(e){let t=B_(),o=ot();return e`
<div class=${Xm.container.withMods({dir:o})}>
	${e.renderAll(t,r=>{switch(r.type){case"basic":case"warning":case"critical":return ye(r.id,x2,{toastId:r.id,toastData:{type:r.type,text:r.text,important:r.important,markedAsRemoved:r.markedAsRemoved,onClose:r.onClose}},Xm.toast);case"withLoad":return ye(r.id,Yp,{toastId:r.id,toastData:{type:"withLoad",text:r.text,important:r.important,operationCompletePromise:r.operationCompletePromise,markedAsRemoved:r.markedAsRemoved,onClose:r.onClose}},Xm.toast);case"withLoadAndCancel":return ye(r.id,Yp,{toastId:r.id,toastData:{type:"withLoadAndCancel",text:r.text,important:r.important,operationCompletePromise:r.operationCompletePromise,cancelButtonLabel:r.cancelButtonLabel,onCancel:r.onCancel,markedAsRemoved:r.markedAsRemoved,onClose:r.onClose}},Xm.toast);default:return I(r),null}})}
</div>`}async function AI(){let e=await ku(xh);return e||(e=await Vf(kh),e)?e:null}function PI(e){document.body.appendChild(e.domElement());let t=bu("popup");document.body.appendChild(t);let o=bu("tooltip");document.body.appendChild(o);let r=Pe(v2)({});document.body.appendChild(r)}function OI(e,t,o,r,n,i,s=!1){Promise.all([ku(e),AI()]).then(([a,c])=>{if(!c)throw new Error;xC(c).then(l=>{if(!l)throw new Error;_h({settings:l.settings,i18nData:a});let m=Xp(s,!1),u=new Ym({playerData:l,resumeState:r,showWatermark:m});o(u),bC(document.body,m,n,i),PI(u)})})}function VI(e,t,o,r,n,i){return new Promise((s,a)=>{OI(e,t,s,o,r,n,i)})}cf("start",VI);})();
